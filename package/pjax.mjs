function Z(){return Z=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Z.apply(this,arguments)}var R;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(R||(R={}));var qt=function(t){return t},Dt="beforeunload",ve="popstate";function ge(t){t===void 0&&(t={});var e=t,n=e.window,r=n===void 0?document.defaultView:n,o=r.history;function s(){var h=r.location,f=h.pathname,b=h.search,j=h.hash,T=o.state||{};return[T.idx,qt({pathname:f,search:b,hash:j,state:T.usr||null,key:T.key||"default"})]}var c=null;function l(){if(c)N.call(c),c=null;else{var h=R.Pop,f=s(),b=f[0],j=f[1];if(N.length){if(b!=null){var T=C-b;T&&(c={action:h,location:j,retry:function(){z(T*-1)}},z(T))}}else ct(h)}}r.addEventListener(ve,l);var i=R.Pop,u=s(),C=u[0],J=u[1],St=Ft(),N=Ft();C==null&&(C=0,o.replaceState(Z({},o.state,{idx:C}),""));function Ot(h){return typeof h=="string"?h:Ee(h)}function Ct(h,f){return f===void 0&&(f=null),qt(Z({pathname:J.pathname,hash:"",search:""},typeof h=="string"?ut(h):h,{state:f,key:xe()}))}function Nt(h,f){return[{usr:h.state,key:h.key,idx:f},Ot(h)]}function Rt(h,f,b){return!N.length||(N.call({action:h,location:f,retry:b}),!1)}function ct(h){i=h;var f=s();C=f[0],J=f[1],St.call({action:i,location:J})}function Mt(h,f){var b=R.Push,j=Ct(h,f);function T(){Mt(h,f)}if(Rt(b,j,T)){var U=Nt(j,C+1),lt=U[0],Q=U[1];try{o.pushState(lt,"",Q)}catch{r.location.assign(Q)}ct(b)}}function Ht(h,f){var b=R.Replace,j=Ct(h,f);function T(){Ht(h,f)}if(Rt(b,j,T)){var U=Nt(j,C),lt=U[0],Q=U[1];o.replaceState(lt,"",Q),ct(b)}}function z(h){o.go(h)}var me={get action(){return i},get location(){return J},createHref:Ot,push:Mt,replace:Ht,go:z,back:function(){z(-1)},forward:function(){z(1)},listen:function(h){return St.push(h)},block:function(h){var f=N.push(h);return N.length===1&&r.addEventListener(Dt,Vt),function(){f(),N.length||r.removeEventListener(Dt,Vt)}}};return me}function Vt(t){t.preventDefault(),t.returnValue=""}function Ft(){var t=[];return{get length(){return t.length},push:function(e){return t.push(e),function(){t=t.filter(function(n){return n!==e})}},call:function(e){t.forEach(function(n){return n&&n(e)})}}}function xe(){return Math.random().toString(36).substr(2,8)}function Ee(t){var e=t.pathname,n=e===void 0?"/":e,r=t.search,o=r===void 0?"":r,s=t.hash,c=s===void 0?"":s;return o&&o!=="?"&&(n+=o.charAt(0)==="?"?o:"?"+o),c&&c!=="#"&&(n+=c.charAt(0)==="#"?c:"#"+c),n}function ut(t){var e={};if(t){var n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));var r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}const x=ge(),L=Object.assign,be=Object.keys,v=Object.create,Bt=Array.isArray,W=Array.from,ht="",a={targets:["body"],timeout:3e4,poll:15,schema:"pjax",async:!0,cache:!0,reverse:!0,limit:50,preload:null,hover:{trigger:"attribute",threshold:250},intersect:{rootMargin:"0px 0px 0px 0px",threshold:0},proximity:{distance:75,threshold:250,throttle:500},progress:{color:"#111",height:"3px",minimum:.08,easing:"cubic-bezier(0,1,0,1)",speed:300,trickle:!0,threshold:350,trickleSpeed:300}},d=new Set,y=v(null),M=v(null),m=v(null),$=v(null),I=v(null),g=v(null),dt=new Set,S=v(null),$e={__proto__:null,config:a,connect:d,schema:y,position:M,pages:m,snaps:$,events:I,transit:g,tracked:dt,timers:S},we=/https?:\/\/(w{3}\.)?/,ke=/(?:https?:)?\/\/(?:w{3}\.)?([^/]*?)?([/?][^;]*?)?(#[^#]*?)?$/i,Pe=/\b(?:append|prepend)/,Te=/^(?:application|text)\/(?:x-)?(?:ecma|java)script|text\/javascript$/,Le=/^\b(?:true|false)$/i,pt=/^[+-]?\d*\.?\d+$/,Ae=/\s+/g,Xt=/\[?[^,'"[\]()\s]+\]?/g,je=/\(?\[(['"]?.*['"]?,?)\]\)?/,Ie=/[xy]:[0-9.]+/,Se=/[xy]|\d*\.?\d+/g;var Oe=Math.pow;function tt(...t){return t.join(ht)}function Ce(t=2){return(e,n)=>{const r=e.length;return(r<1||e[r-1].length===t?e.push([n]):e[r-1].push(n))&&e}}function Ne(t){const e=v(null);return H((n,r,o)=>{const s=o.length-1>=r?r-1:r;r%2&&(e[o[s]]=pt.test(n)?Number(n):n)},t),e}function ft(t,e){if(t instanceof Element){const n=t.closest(e);if(n&&n.tagName==="A")return n}return!1}function Re(t){return new Blob([t]).size}function yt(t){if(t.nodeName!=="A")return!1;const e=t.getAttribute("href");return!(e in m&&"snapshot"in m[e]?m[e].snapshot in $:!1)}function Me(t,e){const n=document.body.querySelectorAll(t);return W(n).flatMap(r=>r.nodeName!=="A"?W(r.querySelectorAll(e)).filter(yt):yt(r)?r:[])}function mt(t){const e=document.body.querySelectorAll(t);return W(e).filter(yt)}function He(t){if(t===0)return"0 B";const e=parseInt(`${Math.floor(Math.log(t)/Math.log(1024))}`,10),n=["B","KB","MB","GB","TB"];return e===0?`${t} ${n[e]}`:`${(t/Oe(1024,e)).toFixed(1)} ${n[e]}`}function H(t,e){if(arguments.length===1)return o=>H(t,o);const n=e.length;if(n===0)return;let r=0;for(;r<n;)t(e[r],r,e),r++}function vt(t){const e=Object.getOwnPropertyNames(t);return e.length===0?!0:e.every(n=>delete t[n])}function qe(t){const e="hydrate|append|prepend|replace|progress|threshold|position|proximity|hover|history";return y.attrs=new RegExp(`^href|${t.schema}-(${e})$`,"i"),y.hydrate=`[${t.schema}-hydrate]`,y.href=`a:not([${t.schema}-disable]):not([href^="#"])`,y.track=`[${t.schema}-track]:not([${t.schema}-track=false])`,y.scripts=`script:not([${t.schema}-eval=false])`,y.styles=`style:not([${t.schema}-eval=false])`,y.stylelink=`link[rel=stylesheet]:not([${t.schema}-eval=false])`,typeof t.intersect=="object"&&(y.intersect=`[${t.schema}-intersect]:not([${t.schema}-intersect=false])`,y.interhref=tt("a",`:not([${t.schema}-disable])`,`:not(a[${t.schema}-intersect=false])`,':not([href^="#"])')),typeof t.proximity=="object"&&(y.proximity=tt("a",`[${t.schema}-proximity]`,`:not([${t.schema}-proximity=false])`,`:not([${t.schema}-disable])`,':not([href^="#"])')),typeof t.hover=="object"&&(y.mouseover=t.hover.trigger==="href"?tt("a",`:not([${t.schema}-disable])`,`:not([${t.schema}-hover=false])`,`:not([${t.schema}-intersect])`,`:not([${t.schema}-proximity])`,':not([href^="#"])'):tt("a",`[${t.schema}-hover]`,`:not([${t.schema}-intersect])`,`:not([${t.schema}-proximity])`,`:not([${t.schema}-disable])`,`:not([${t.schema}-hover=false])`,':not([href^="#"])')),t}function De(t={}){t.hover!==!1&&(L(a.hover,t.hover),delete t.hover),t.intersect!==!1&&(L(a.intersect,t.intersect),delete t.intersect),t.proximity!==!1&&(L(a.proximity,t.proximity),delete t.proximity),t.progress!==!1&&(L(a.progress,t.progress),delete t.progress);const e=L(a,t);return e.schema=e.schema===null?"data":`data-${e.schema}`,qe(e),e}var p=(t=>(t[t.INITIAL=1]="INITIAL",t[t.VISIT=2]="VISIT",t[t.HYDRATE=3]="HYDRATE",t[t.HOVER=4]="HOVER",t[t.INTERSECT=5]="INTERSECT",t[t.PROXIMITY=6]="PROXIMITY",t[t.PRELOAD=7]="PRELOAD",t[t.REVERSE=8]="REVERSE",t[t.POPSTATE=9]="POPSTATE",t[t.RELOAD=10]="RELOAD",t[t.PREFETCH=11]="PREFETCH",t[t.CAPTURE=12]="CAPTURE",t[t.FETCH=13]="FETCH",t))(p||{});const{origin:gt}=window.location,Yt=gt.replace(we,ht);function Ve(t){const e=v(null);for(const{nodeName:n,nodeValue:r}of t.attributes){if(!y.attrs.test(n))continue;if(n==="href"){const c=ut(r);e.key=c.pathname+(c.search||""),e.location=zt(e.key);continue}const o=n.slice(1+n.lastIndexOf("-")),s=r.replace(Ae,ht);je.test(s)?e[o]=Pe.test(o)?s.match(Xt).reduce(Ce(2),[]):s.match(Xt):Ie.test(s)?e[o]=Ne(s.match(Se)):Le.test(s)?e[o]=s==="true":pt.test(s)?e[o]=Number(s):e[o]=s}return e}function _t(t){if(t.charCodeAt(0)===47&&t.charCodeAt(1)!==47){const n=t.indexOf("#");return n!==-1?t.slice(0,n):t}if(t.charCodeAt(0)===63)return location.pathname+t;const e=t.match(ke);return e!==null?Yt!==e[1]?null:e[2]===void 0?"/":e[2]:null}function zt(t){const e=v(null),{hash:n,pathname:r,search:o}=ut(t);return e.origin=gt,e.hostname=Yt,e.pathname=r,e.lastpath=location.pathname+(location.search||""),o&&(e.search=o),n&&(e.hash=n),e}function E(t,e){if(t instanceof Element){const r=Ve(t);return r.type=e||p.VISIT,r}const n=v(null);return n.key=typeof t=="string"?_t(t):location.pathname+location.search,n.location=zt(n.key),n.type=e||p.VISIT,n}const Fe=new DOMParser;function xt(t){return Fe.parseFromString(t,"text/html")}var Be=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let r=n[t]&63;r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r<63?e+="_":e+="-"}return e};function A(t,...e){const n=t==="cache";n&&e.splice(-1,1,xt(e[e.length-1]));let r=!0;return H(o=>{const s=o.apply(null,e);n?s instanceof Document?r=s.documentElement.outerHTML:typeof r!="string"&&(r=s!==!1):r=s!==!1},I[t]||[]),r}function Xe(t,e){t in I||(I[t]=[]),I[t].push(e)}function Ye(t,e){const n=I[t],r=[];if(n&&e){let o=0;const s=n.length;for(;o<s;o++)n[o]!==e&&r.push(n[o])}return r.length?I[t]=r:delete I[t],this}let Et=!1;function et(){return M}function bt(){M.y=window.scrollY,M.x=window.scrollX,Et||(requestAnimationFrame(et),Et=!0)}function _e(){return Et=!1,M.x=0,M.y=0,M}function ze(){const t=v(null);return t.x=0,t.y=0,t}function Ue(){d.has(6)||(bt(),addEventListener("scroll",bt,{passive:!0}),d.add(6))}function We(){!d.has(6)||(removeEventListener("scroll",bt,!1),_e(),d.delete(6))}function nt(t){typeof t>"u"?(vt(m),vt($)):typeof t=="string"?(delete $[m[t].snapshot],delete m[t]):Bt(t)&&Wt(t)}function w(t){const e=v(null);return e.key=null,e.history=!0,e.type=p.VISIT,e.title=document.title,e.replace=a.targets,e.cache=a.cache,e.snapshot=e.cache?Be():null,e.position=ze(),e.location=v(null),a.proximity!==!1&&(e.proximity=a.proximity.threshold),a.hover!==!1&&(e.threshold=a.hover.threshold),a.progress!==!1&&(e.progress=a.progress.threshold),e.cache||delete t.cache,L(e,t)}function $t(t){const e=m[$t.prototype.key];if(t==="page")return e;if(t==="location")return e.location;if(t==="snapshot")return $[e.snapshot]}function Ut(t,e){const n=A("cache",t,e);if(n!==!1){switch(t.type){case p.HOVER:case p.PROXIMITY:case p.INTERSECT:t.type=p.PREFETCH;break}return m[t.key]=t,$t.prototype.key=t.key,t.cache&&($[t.snapshot]=typeof n=="string"?n:e),t}}function rt(t,e){const n=t.key in m?L(m[t.key],t):w(t);return typeof e=="string"&&($[n.snapshot]=e),n}function Ke(t){const e=m[t],n=$[e.snapshot];return{page:e,snapshot:n}}function O(t){return t in m&&"snapshot"in m[t]?m[t].snapshot in $:!1}function Wt(t=[]){return Object.getOwnPropertyNames(m).forEach(e=>{t.includes(e)?delete $[m[e].snapshot]:delete m[e]})}var k=typeof window<"u"?window:{screen:{},navigator:{}},F=(k.matchMedia||function(){return{matches:!1}}).bind(k),Ge={get passive(){return!0}},Kt=function(){};k.addEventListener&&k.addEventListener("p",Kt,Ge),k.removeEventListener&&k.removeEventListener("p",Kt,!1);var q="PointerEvent"in k,wt="ontouchstart"in k,Je="TouchEvent"in k;wt||Je&&F("(any-pointer: coarse)").matches;var Gt=k.navigator.userAgent||"",Qe=F("(pointer: coarse)").matches&&/iPad|Macintosh/.test(Gt)&&Math.min(k.screen.width||0,k.screen.height||0)>=768;(F("(pointer: coarse)").matches||!F("(pointer: fine)").matches&&wt)&&/Windows.*Firefox/.test(Gt),F("(any-pointer: fine)").matches||F("(any-hover: hover)").matches;let D=null,K=null;const kt=[];function Pt(t){const{speed:e,easing:n,minimum:r}=a.progress,o=typeof D=="number";t=Qt(t,r,1),D=t===1?null:t;const s=Ze(!o);en(c=>{if(s.style.transform=`translate3d(${Zt(t)}%,0,0)`,s.style.transition=`all ${e}ms ${n}`,t!==1)return setTimeout(c,e);s.style.transition="none",s.style.opacity="1",setTimeout(()=>{s.style.transition=`all ${e}ms ${n}`,s.style.opacity="0",setTimeout(()=>[tn(),c()],e)},e)})}function Jt(t){let e=D;if(!e)return te();if(e<1)return typeof t!="number"&&(e>=0&&e<.2?t=.1:e>=.2&&e<.5?t=.04:e>=.5&&e<.8?t=.02:e>=.8&&e<.99?t=.005:t=0),e=Qt(e+t,0,.994),Pt(e)}function Ze(t){if(K)return K;document.documentElement.classList.add("pjax-loading");const e=t?"-100":Zt(D||0),n=document.createElement("div");return n.id="pjax-progress",n.style.pointerEvents="none",n.style.background=a.progress.color,n.style.height=a.progress.height,n.style.position="fixed",n.style.zIndex="9999",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.transition="all 0 linear",n.style.transform=`translate3d(${e}%,0,0)`,document.body.appendChild(n),K=n,n}function tn(){document.documentElement.classList.remove("pjax-loading"),document.getElementById("pjax-progress")&&document.body.removeChild(K),K=null}function Qt(t,e,n){return t<e?e:t>n?n:t}function Zt(t){return(-1+t)*100}function en(t){const e=()=>{const n=kt.shift();n&&n(e)};kt.push(t),kt.length===1&&e()}function te(){D||Pt(0);const t=function(){setTimeout(()=>{!D||(Jt(),t())},a.progress.trickleSpeed)};a.progress.trickle&&t()}function nn(t){if(!(!t&&!D))return Jt(.3+.5*Math.random()),Pt(1)}var Tt=(t,e,n)=>new Promise((r,o)=>{var s=i=>{try{l(n.next(i))}catch(u){o(u)}},c=i=>{try{l(n.throw(i))}catch(u){o(u)}},l=i=>i.done?r(i.value):Promise.resolve(i.value).then(s,c);l((n=n.apply(t,e)).next())});let ot=0;function rn(t){return new Promise(e=>setTimeout(()=>e(t()),5))}function on(t,e){return Tt(this,null,function*(){ot=ot+Re(e)})}function Lt(t){const e=new XMLHttpRequest;return new Promise((n,r)=>{e.open("GET",t,a.async),e.setRequestHeader("X-Brixtol-Pjax","true"),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.onloadstart=o=>{g[t]=e},e.onload=o=>{n(e.status===200?e.responseText:!1)},e.onabort=o=>{delete g[t]},e.onloadend=o=>{delete g[t],on(t,e.responseText)},e.onerror=r,e.timeout=a.timeout,e.responseType="text",e.send(null)})}function ee(t,e,n){t in S||O(t)||(S[t]=setTimeout(e,n))}function sn(t){return t in S?(clearTimeout(S[t]),delete S[t]):!0}function an(){const t=v(null);return t.total=ot,t.weight=He(ot),t}function ne(t){t in g&&(g[t].abort(),console.warn(`@brixtol/pjax: XHR Request was cancelled for url: ${t}`))}function cn(t){for(const e in g)t!==e&&(g[e].abort(),console.warn(`@brixtol/pjax: Cancelled pending request: ${e}`))}function re(t,e=0){return Tt(this,null,function*(){return t in g&&e<=a.timeout?(e*5===a.progress.threshold&&te(),e++,rn(()=>re(t,e))):delete g[t]})}function P(t){return Tt(this,null,function*(){if(t.key in g){console.warn(`@brixtol/pjax: XHR Request is already in transit for: ${t.key}`);return}if(!A("request",t))return console.info(`@brixtol/pjax: Request cancelled via dispatched event for: ${t.key}`),!1;try{const e=yield Lt(t.key);if(e)return Ut(t,e);console.warn(`@brixtol/pjax: Failed to retrive response at: ${t.key}`)}catch(e){delete g[t.key],console.error("@brixtol/pjax: Fetch error:",e)}return!1})}var ln=(t,e,n)=>new Promise((r,o)=>{var s=i=>{try{l(n.next(i))}catch(u){o(u)}},c=i=>{try{l(n.throw(i))}catch(u){o(u)}},l=i=>i.done?r(i.value):Promise.resolve(i.value).then(s,c);l((n=n.apply(t,e)).next())});function it(t){const e=ft(t.target,y.mouseover);e&&(sn(_t(e.href)),oe(e))}function B(t){const e=ft(t.target,y.mouseover);if(!e)return;const n=E(e,p.HOVER);if(n.key in S)return;if(O(n.key))return st(e);un(e);const r=w(n),o=r.threshold||a.hover.threshold;ee(n.key,()=>ln(this,null,function*(){if(!A("prefetch",e,n))return st(e);(yield P(r))&&st(e)}),o)}function oe(t){q?t.addEventListener("pointerenter",B,!1):t.addEventListener("mouseenter",B,!1)}function un(t){q?(t.addEventListener("pointerout",it,!1),t.removeEventListener("pointerenter",B,!1)):(t.addEventListener("mouseleave",it,!1),t.removeEventListener("mouseenter",B,!1))}function st(t){q?(t.removeEventListener("pointerenter",B,!1),t.removeEventListener("pointerout",it,!1)):(t.removeEventListener("mouseleave",it,!1),t.removeEventListener("mouseenter",B,!1))}function ie(){!a.hover||d.has(4)||(H(oe,mt(y.mouseover)),d.add(4))}function se(){!d.has(4)||(vt(S),H(st,mt(y.mouseover)),d.delete(4))}var hn=(t,e,n)=>new Promise((r,o)=>{var s=i=>{try{l(n.next(i))}catch(u){o(u)}},c=i=>{try{l(n.throw(i))}catch(u){o(u)}},l=i=>i.done?r(i.value):Promise.resolve(i.value).then(s,c);l((n=n.apply(t,e)).next())});let X;function dn(t){return hn(this,null,function*(){if(t.isIntersecting){const e=E(t.target,p.INTERSECT);if(!A("prefetch",t.target,e))return X.unobserve(t.target);(yield P(w(e)))?X.unobserve(t.target):(console.warn(`@brixtol/pjax: Prefetch will retry at next intersect for: ${e.key}`),X.observe(t.target))}})}function ae(){!a.intersect||d.has(5)||(X=new IntersectionObserver(H(dn),a.intersect),H(X.observe,Me(y.intersect,y.interhref)),d.add(5))}function ce(){!d.has(5)||(X.disconnect(),d.has(5))}var At=(t,e,n)=>new Promise((r,o)=>{var s=i=>{try{l(n.next(i))}catch(u){o(u)}},c=i=>{try{l(n.throw(i))}catch(u){o(u)}},l=i=>i.done?r(i.value):Promise.resolve(i.value).then(s,c);l((n=n.apply(t,e)).next())});function pn(t){return new Promise((e,n)=>{const r=document.createElement("script");r.addEventListener("error",n),r.async=!1,r.text=t.target.text;for(const{nodeName:o,nodeValue:s}of t.target.attributes)r.setAttribute(o,s);document.contains(t.target)?t.target.replaceWith(r):(document.head.append(r),t.external?r.addEventListener("load",()=>r.remove()):r.remove()),t.external?r.addEventListener("load",()=>e()):e()})}function fn(t){if(!t.hasAttribute("src")&&!t.text)return;const e=t.type?t.type.trim().toLowerCase():"text/javascript",n=Te.test(e)?1:e==="module"?2:NaN,r=v(null);return r.blocking=!0,r.evaluate=!1,r.external=!1,isNaN(n)||t.noModule&&n===1||(t.src&&(r.external=!0),(n!==1||r.external&&(t.hasAttribute("async")||t.defer))&&(r.blocking=!1),r.evaluate=!0,r.target=t),r}function le(t){return At(this,null,function*(){try{const e=pn(t);t.blocking&&(yield e)}catch(e){console.error(e)}})}function yn(t){return At(this,null,function*(){const e=W(t,fn).filter(n=>n.evaluate).reduce((n,r)=>At(this,null,function*(){return r.external?Promise.all([n,le(r)]):(yield n,yield le(r))}),Promise.resolve());yield Promise.race([e])})}var mn=(t,e,n)=>new Promise((r,o)=>{var s=i=>{try{l(n.next(i))}catch(u){o(u)}},c=i=>{try{l(n.throw(i))}catch(u){o(u)}},l=i=>i.done?r(i.value):Promise.resolve(i.value).then(s,c);l((n=n.apply(t,e)).next())});function vn({clientX:t,clientY:e},n){return t<=n.right&&t>=n.left&&e<=n.bottom&&e>=n.top}function gn(t){const e=v(null),n=t.getBoundingClientRect(),r=t.getAttribute(`${a.schema}-proximity`),o=pt.test(r)?Number(r):a.proximity.distance;return e.target=t,e.top=n.top-o,e.bottom=n.bottom+o,e.left=n.left-o,e.right=n.right+o,e}function xn(t){let e=!1;return n=>{if(e)return;e=!0;const r=t.findIndex(o=>vn(n,o));if(r===-1)setTimeout(()=>{e=!1},a.proximity.throttle);else{const{target:o}=t[r],s=w(E(o,p.PROXIMITY));ee(s.key,()=>mn(this,null,function*(){if(!A("prefetch",o,s))return at();(yield P(s))&&(t.splice(r,1),e=!1,t.length===0&&(at(),console.info("@brixtol/pjax: Proximity observer has disconnected")))}),s.threshold||a.proximity.threshold)}}}let G;function ue(){if(!a.proximity||d.has(7))return;const t=mt(y.proximity).map(gn);t.length>0&&(G=xn(t),q?addEventListener("pointermove",G,!1):addEventListener("mousemove",G,!1),d.add(7))}function at(){!d.has(7)||(q?removeEventListener("pointermove",G,!1):removeEventListener("mousemove",G,!1),d.delete(7))}var En=(t,e,n)=>new Promise((r,o)=>{var s=i=>{try{l(n.next(i))}catch(u){o(u)}},c=i=>{try{l(n.throw(i))}catch(u){o(u)}},l=i=>i.done?r(i.value):Promise.resolve(i.value).then(s,c);l((n=n.apply(t,e)).next())});function bn(t,e){return t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING||-1}function $n(t){return En(this,null,function*(){const e=W(t.querySelectorAll(y.scripts));e.sort(bn),yield yn(e)})}function wn(t){t.querySelectorAll(y.track).forEach(e=>{!e.hasAttribute("id")||dt.has(e.id)||(document.body.appendChild(e),dt.add(e.id))})}function kn(t,e){const n=t.replace?t.replace:a.targets,r=n.join(","),o=document.body.querySelectorAll(r);if(o.length===0)return document.body.replaceWith(e.body);const s=e.body.querySelectorAll(r);o.forEach((c,l)=>{if(!!c.matches(n[l])&&!!A("render",c,s[l])&&(c.replaceWith(s[l]),t.append||t.prepend)){const i=document.createElement("div");return e.childNodes.forEach(i.appendChild),t.append?c.appendChild(i):c.insertBefore(i,c.firstChild)}}),wn(e.body)}function Pn(t,e){const n=t.hydrate.join(","),r=document.body.querySelectorAll(n);if(r.length>0){const o=e.body.querySelectorAll(n);r.forEach((s,c)=>{!A("hydrate",s,o[c])||!o[c]||(s.firstChild.nodeType===Node.TEXT_NODE?s.innerHTML=o[c].innerHTML:s.replaceWith(o[c]))})}t.history=void 0,t.type=p.VISIT,rt(t),Wt([t.key])}function V(t,e){a.hover!==!1&&se(),a.intersect!==!1&&ce(),a.proximity!==!1&&at();const n=xt($[t.snapshot]);return t.title=document.title=n.title||"",t.type===p.HYDRATE?Pn(t,n):(kn(t,n),t.history&&(e||(t.key===t.location.lastpath?x.replace(t.location,t):x.push(t.location,t)),scrollTo(t.position.x,t.position.y))),$n(n.head),nn(),a.hover!==!1&&ie(),a.intersect!==!1&&ae(),a.proximity!==!1&&ue(),A("load",t),t}var Tn=(t,e,n)=>new Promise((r,o)=>{var s=i=>{try{l(n.next(i))}catch(u){o(u)}},c=i=>{try{l(n.throw(i))}catch(u){o(u)}},l=i=>i.done?r(i.value):Promise.resolve(i.value).then(s,c);l((n=n.apply(t,e)).next())});let he=null,jt;function de(t){return x.replace(x.location,t),x.location.state}function Ln(){if(x.location.state===null)return!1;const t=x.location.state;return"location"in t&&"lastpath"in t.location?t.location.lastpath:!1}function An(){x.location.state===null&&(x.location.state=window.history.state||de(null));const t=L(x.location.state,{position:et()});return x.replace(x.location,t),t}function jn(t){return Tn(this,arguments,function*({key:e,state:n}){if(n.key!==jt&&ne(jt),console.log("POSTATE",n.key,O(n.key)),O(n.key))return V(n,!0);jt=n.key,n.type=p.POPSTATE;const r=yield P(n);return r?V(r,!0):location.assign(n.key)})}function In({action:t,location:e}){if(console.log("LISTENER",t,e),t===R.Pop)return jn(e)}function Sn(){d.has(2)||(he=x.listen(In),d.add(2))}function On(){d.has(2)&&(he(),d.delete(2))}var Cn=(t,e,n)=>new Promise((r,o)=>{var s=i=>{try{l(n.next(i))}catch(u){o(u)}},c=i=>{try{l(n.throw(i))}catch(u){o(u)}},l=i=>i.done?r(i.value):Promise.resolve(i.value).then(s,c);l((n=n.apply(t,e)).next())});function Nn(t){return!(t.target&&t.target.isContentEditable||t.defaultPrevented||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)}function pe(t,e){return function n(r){return r.preventDefault(),t.removeEventListener("click",n,!1),An(),typeof e=="object"?V(e):typeof e=="string"?It(e):location.assign(e)}}function Y(t){if(!Nn(t))return;const e=ft(t.target,y.href);if(!e)return;const n=E(e,p.VISIT);!A("trigger",t,n)||(O(n.key)?e.addEventListener("click",pe(e,rt(n)),!1):(n.key in g&&be(g).length>1&&cn(n.key),P(w(n)),e.addEventListener("click",pe(e,n.key),!1)))}function It(t,e=!1){return Cn(this,null,function*(){if(e){typeof e.cache=="string"&&!e.hydrate&&(e.cache==="clear"?nt():nt(e.key));const n=yield P(e);if(n)return V(n)}else{if(yield re(t))return V(m[t]);ne(t)}return location.assign(t)})}function Rn(){d.has(3)||(q?addEventListener("pointerdown",Y,!1):(addEventListener("mousedown",Y,!1),addEventListener("touchstart",Y,!1)),d.add(3))}function Mn(){!d.has(3)||(q?removeEventListener("pointerdown",Y,!1):(removeEventListener("mousedown",Y,!1),removeEventListener("touchstart",Y,!1)),d.delete(3))}function fe(){const t=w(E(p.INITIAL)),e=Ln();a.reverse&&typeof e=="string"&&(t.location.lastpath=e);const n=Ut(t,document.documentElement.outerHTML);if(t.position=et(),A("connected",n),a.preload!==null){if(Bt(a.preload))for(const r of a.preload){const o=E(r,p.PRELOAD);o.key!==r&&P(w(o))}else if(typeof a.preload=="object"&&t.key in a.preload)for(const r of a.preload[t.key]){const o=E(r,p.PRELOAD);o.key!==r&&P(w(o))}}if(de(n),n.location.lastpath!==t.key){const r=E(n.location.lastpath,p.REVERSE);P(w(r))}removeEventListener("load",fe)}function Hn(){d.has(1)||(Sn(),Ue(),Rn(),ie(),ae(),ue(),addEventListener("load",fe),d.add(1),console.info("@brixtol/pjax: Connection Established \u26A1"))}function qn(){d.has(1)?(On(),We(),Mn(),se(),ce(),at(),nt(),d.delete(1),console.warn("@brixtol/pjax: Instance has been disconnected! \u{1F614}")):console.warn("@brixtol/pjax: No connection made, disconnection is void \u{1F643}")}var _=(t,e,n)=>new Promise((r,o)=>{var s=i=>{try{l(n.next(i))}catch(u){o(u)}},c=i=>{try{l(n.throw(i))}catch(u){o(u)}},l=i=>i.done?r(i.value):Promise.resolve(i.value).then(s,c);l((n=n.apply(t,e)).next())});const ye=!!(window.history.pushState&&window.requestAnimationFrame&&window.addEventListener&&window.DOMParser);function Dn(t={}){De(t),ye?/https?/.test(window.location.protocol)?addEventListener("DOMContentLoaded",Hn):console.error("@brixtol/pjax: Invalid protocol, pjax expects https or http protocol"):console.error("@brixtol/pjax: Not supported by this browser")}function Vn(){return $e}function Fn(t){return _(this,null,function*(){const e=$t("page");t&&L(e,t),e.type=p.RELOAD;const n=yield P(e);return n?(console.info("@brixtol/pjax: Triggered reload, page was re-cached"),V(n)):(console.warn("@brixtol/pjax: Reload failed, triggering refresh (cache will be purged)"),location.assign(e.key))})}function Bn(t){const e=v(null);return t?t in m?Ke(t):console.error(`@brixtol/pjax: No store exists for ${t}`):(e.state=m,e.snaps=$,e.size=an(),e)}function Xn(t){return _(this,null,function*(){const e=E(t,p.FETCH);if(e.location.origin!==gt)return console.error("@brixtol/pjax: Cross origin fetches are not allowed");const n=yield Lt(e.key);if(n)return xt(n)})}function Yn(t){return nt(t)}function _n(t){return _(this,null,function*(){})}function zn(t,e){return _(this,null,function*(){const n=E(p.HYDRATE);n.hydrate=e,n.position=et();const r=yield Lt(t);if(!r)return console.warn("@brixtol/pjax: hydration failed");const o=O(n.key)?rt(n,r):w(n);if(a.reverse){const s=E(n.location.lastpath,p.REVERSE);P(s)}return V(o)})}function Un(t){return _(this,null,function*(){const e=E(t,p.PREFETCH);if(O(e.key)){console.warn(`@brixtol/pjax: Cache already exists for ${e.key}, prefetch skipped`);return}const n=yield P(w(e));if(n)return n;console.warn(`@brixtol/pjax: Prefetch failed for ${e.key}`)})}function Wn(t,e){return _(this,null,function*(){const n=E(t),r=typeof e=="object"?L(n,e):n;return O(n.key)?It(n.key,rt(r)):It(n.key,w(r))})}function Kn(){qn()}export{Bn as cache,Yn as clear,Dn as connect,Kn as disconnect,Xn as fetch,zn as hydrate,Ye as off,Xe as on,Un as prefetch,Fn as reload,Vn as session,ye as supported,_n as update,Wn as visit};
