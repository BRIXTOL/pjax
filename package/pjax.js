var tt=Math.pow;var u=(e,t,r)=>new Promise((o,n)=>{var s=b=>{try{N(r.next(b))}catch(X){n(X)}},l=b=>{try{N(r.throw(b))}catch(X){n(X)}},N=b=>b.done?o(b.value):Promise.resolve(b.value).then(s,l);N((r=r.apply(e,t)).next())});function K(){return K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},K.apply(this,arguments)}var S;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(S||(S={}));var rt=function(e){return e};var ot="beforeunload";var ir="popstate";function st(e){e===void 0&&(e={});var t=e,r=t.window,o=r===void 0?document.defaultView:r,n=o.history;function s(){var a=o.location,h=a.pathname,w=a.search,$=a.hash,T=n.state||{};return[T.idx,rt({pathname:h,search:w,hash:$,state:T.usr||null,key:T.key||"default"})]}var l=null;function N(){if(l)C.call(l),l=null;else{var a=S.Pop,h=s(),w=h[0],$=h[1];if(C.length){if(w!=null){var T=H-w;T&&(l={action:a,location:$,retry:function(){re(T*-1)}},re(T))}}else Ae(a)}}o.addEventListener(ir,N);var b=S.Pop,X=s(),H=X[0],ae=X[1],Ke=it(),C=it();H==null&&(H=0,n.replaceState(K({},n.state,{idx:H}),""));function Je(a){return typeof a=="string"?a:ar(a)}function Ue(a,h){return h===void 0&&(h=null),rt(K({pathname:ae.pathname,hash:"",search:""},typeof a=="string"?le(a):a,{state:h,key:sr()}))}function Ge(a,h){return[{usr:a.state,key:a.key,idx:h},Je(a)]}function Qe(a,h,w){return!C.length||(C.call({action:a,location:h,retry:w}),!1)}function Ae(a){b=a;var h=s();H=h[0],ae=h[1],Ke.call({action:b,location:ae})}function Ze(a,h){var w=S.Push,$=Ue(a,h);function T(){Ze(a,h)}if(Qe(w,$,T)){var Y=Ge($,H+1),Oe=Y[0],ce=Y[1];try{n.pushState(Oe,"",ce)}catch{o.location.assign(ce)}Ae(w)}}function et(a,h){var w=S.Replace,$=Ue(a,h);function T(){et(a,h)}if(Qe(w,$,T)){var Y=Ge($,H),Oe=Y[0],ce=Y[1];n.replaceState(Oe,"",ce),Ae(w)}}function re(a){n.go(a)}var nr={get action(){return b},get location(){return ae},createHref:Je,push:Ze,replace:et,go:re,back:function(){re(-1)},forward:function(){re(1)},listen:function(h){return Ke.push(h)},block:function(h){var w=C.push(h);return C.length===1&&o.addEventListener(ot,nt),function(){w(),C.length||o.removeEventListener(ot,nt)}}};return nr}function nt(e){e.preventDefault(),e.returnValue=""}function it(){var e=[];return{get length(){return e.length},push:function(r){return e.push(r),function(){e=e.filter(function(o){return o!==r})}},call:function(r){e.forEach(function(o){return o&&o(r)})}}}function sr(){return Math.random().toString(36).substr(2,8)}function ar(e){var t=e.pathname,r=t===void 0?"/":t,o=e.search,n=o===void 0?"":o,s=e.hash,l=s===void 0?"":s;return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),l&&l!=="#"&&(r+=l.charAt(0)==="#"?l:"#"+l),r}function le(e){var t={};if(e){var r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));var o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}var E=st(),P=Object.assign;var f=Object.create,fe=Array.isArray,q=Array.from,pe="";var i={targets:["body"],timeout:3e4,poll:15,schema:"pjax",async:!0,cache:!0,reverse:!0,limit:50,preload:null,hover:{trigger:"attribute",threshold:250},intersect:{rootMargin:"0px 0px 0px 0px",threshold:0},proximity:{distance:75,threshold:250,throttle:500},progress:{color:"#111",height:"3px",minimum:.08,easing:"cubic-bezier(0,1,0,1)",speed:300,trickle:!0,threshold:350,trickleSpeed:300}},c=f(null),m=f(null),x=f(null),p=f(null),Ne=new Set;function $e(e={}){e.hover!==!1&&(P(i.hover,e.hover),delete e.hover),e.intersect!==!1&&(P(i.intersect,e.intersect),delete e.intersect),e.proximity!==!1&&(P(i.proximity,e.proximity),delete e.proximity),e.progress!==!1&&(P(i.progress,e.progress),delete e.progress),P(i,e);let t=i.schema===null?"data":`data-${i.schema}`,r="hydrate|append|prepend|replace|progress|threshold|position|proximity|hover|history",o=`:not([${t}-disable]):not([href^="#"])`;return p.attrs=new RegExp(`^href|${t}-(${r})$`,"i"),p.hydrate=`[${t}-hydrate]`,p.track=`[${t}-track]:not([${t}-track=false])`,p.scripts=`script:not([${t}-eval=false])`,p.styles=`style:not([${t}-eval=false])`,p.stylelink=`link[rel=stylesheet]:not([${t}-eval=false])`,p.href=`a${o}`,typeof i.intersect=="object"&&(p.intersect=`[${t}-intersect]:not([${t}-intersect=false])`,p.interhref=`a${o}:not([${t}-intersect=false])`),typeof i.proximity=="object"&&(p.proximity=`a[${t}-proximity]${o}:not([${t}-proximity=false])`),typeof i.hover=="object"&&(p.hover=i.hover.trigger==="href"?`a${o}:not([${t}-hover=false]):not([${t}-intersect]):not([${t}-proximity])`:`a[${t}-hover]${o}:not([${t}-hover=false]):not([${t}-intersect]):not([${t}-proximity])`),i}var at=/https?:\/\/(w{3}\.)?/,ct=/(?:https?:)?\/\/(?:w{3}\.)?([^/]*?)?([/?][^;]*?)?(#[^#]*?)?$/i;var lt=/\b(?:append|prepend)/,ft=/^(?:application|text)\/(?:x-)?(?:ecma|java)script|text\/javascript$/,pt=/^\b(?:true|false)$/i,J=/^[+-]?\d*\.?\d+$/,ut=/\s+/g;var Me=/\[?[^,'"[\]()\s]+\]?/g,mt=/\(?\[(['"]?.*['"]?,?)\]\)?/,ht=/[xy]:[0-9.]+/,dt=/[xy]|\d*\.?\d+/g;function yt(e=2){return(t,r)=>{let o=t.length;return(o<1||t[o-1].length===e?t.push([r]):t[o-1].push(r))&&t}}function vt(e){let t=f(null);return R((r,o,n)=>{let s=n.length-1>=o?o-1:o;o%2&&(t[n[s]]=J.test(r)?Number(r):r)},e),t}function oe(e,t){if(e instanceof Element){let r=e.closest(t);if(r&&r.tagName==="A")return r}return!1}function xt(e){return new Blob([e]).size}function je(e){if(e.nodeName!=="A")return!1;let t=e.getAttribute("href");return(t in m&&"snapshot"in m[t]?m[t].snapshot in x:!1)===!1}function bt(e,t){let r=document.body.querySelectorAll(e);return q(r).flatMap(n=>n.nodeName!=="A"?q(n.querySelectorAll(t)).filter(je):je(n)?n:[])}function ne(e){let t=document.body.querySelectorAll(e);return q(t).filter(je)}function Et(e){if(e===0)return"0 B";let t=parseInt(`${Math.floor(Math.log(e)/Math.log(1024))}`,10),r=["B","KB","MB","GB","TB"];return t===0?`${e} ${r[t]}`:`${(e/tt(1024,t)).toFixed(1)} ${r[t]}`}function R(e,t){if(arguments.length===1)return n=>R(e,n);let r=t.length;if(r===0)return;let o=0;for(;o<r;)e(t[o],o,t),o++}function Se(e){let t=Object.getOwnPropertyNames(e);return t.length===0?!0:t.every(r=>delete e[r])}var{origin:ue}=window.location,Pt=ue.replace(at,pe);function cr(e){let t=f(null);for(let{nodeName:r,nodeValue:o}of e.attributes){if(!p.attrs.test(r))continue;if(r==="href"){let l=le(o);t.key=l.pathname+(l.search||""),t.location=wt(t.key);continue}let n=r.slice(1+r.lastIndexOf("-")),s=o.replace(ut,pe);mt.test(s)?t[n]=lt.test(n)?s.match(Me).reduce(yt(2),[]):s.match(Me):ht.test(s)?t[n]=vt(s.match(dt)):pt.test(s)?t[n]=s==="true":J.test(s)?t[n]=Number(s):t[n]=s}return t}function qe(e){if(e.charCodeAt(0)===47&&e.charCodeAt(1)!==47){let r=e.indexOf("#");return r!==-1?e.slice(0,r):e}if(e.charCodeAt(0)===63)return location.pathname+e;let t=e.match(ct);return t!==null?Pt!==t[1]?null:t[2]===void 0?"/":t[2]:null}function wt(e){let t=f(null),{hash:r,pathname:o,search:n}=le(e);return t.origin=ue,t.hostname=Pt,t.pathname=o,t.lastpath=location.pathname+(location.search||""),n&&(t.search=n),r&&(t.hash=r),t}function d(e,t){if(e instanceof Element){let o=cr(e);return o.type=t||2,o}let r=f(null);return r.key=typeof e=="string"?qe(e):location.pathname+location.search,r.location=wt(r.key),r.type=t||2,r}var lr=new DOMParser;function U(e){return lr.parseFromString(e,"text/html")}var It=(e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let o=r[e]&63;o<36?t+=o.toString(36):o<62?t+=(o-26).toString(36).toUpperCase():o<63?t+="_":t+="-"}return t};var D=f(null);function y(e,...t){let r=e==="cache";r&&t.splice(-1,1,U(t[t.length-1]));let o=!0;return R(n=>{let s=n.apply(null,t);r?s instanceof Document?o=s.documentElement.outerHTML:typeof o!="string"&&(o=s!==!1):o=s!==!1},D[e]||[]),o}function fr(e,t){e in D||(D[e]=[]),D[e].push(t)}function pr(e,t){let r=D[e],o=[];if(r&&t){let n=0,s=r.length;for(;n<s;n++)r[n]!==t&&o.push(r[n])}return o.length?D[e]=o:delete D[e],this}var G=f(null),He=!1;function V(){return G}function Ce(){G.y=scrollY,G.x=scrollX,He||(requestAnimationFrame(V),He=!0)}function ur(){return He=!1,G.x=0,G.y=0,G}function kt(){let e=f(null);return e.x=0,e.y=0,e}function Lt(){c.scroll||(Ce(),addEventListener("scroll",Ce,{passive:!0}),c.scroll=!0)}function Tt(){!c.scroll||(removeEventListener("scroll",Ce,!1),ur(),c.scroll=!1)}function _(e){typeof e=="undefined"?(Se(m),Se(x)):typeof e=="string"?(delete x[m[e].snapshot],delete m[e]):fe(e)&&De(e)}function v(e){let t=f(null);return t.key=null,t.history=!0,t.type=2,t.title=document.title,t.replace=i.targets,t.cache=i.cache,t.snapshot=t.cache?It():null,t.position=kt(),t.location=f(null),i.proximity!==!1&&(t.proximity=i.proximity.threshold),i.hover!==!1&&(t.threshold=i.hover.threshold),i.progress!==!1&&(t.progress=i.progress.threshold),t.cache||delete e.cache,P(t,e)}function he(e){let t=m[he.prototype.key];if(e==="page")return t;if(e==="location")return t.location;if(e==="snapshot")return x[t.snapshot]}function de(e,t){let r=y("cache",e,t);if(r!==!1){switch(e.type){case 4:case 6:case 5:e.type=11;break}return m[e.key]=e,he.prototype.key=e.key,e.cache&&(x[e.snapshot]=typeof r=="string"?r:t),e}}function B(e,t){let r=e.key in m?P(m[e.key],e):v(e);return typeof t=="string"&&(x[r.snapshot]=t),r}function Rt(e){let t=m[e],r=x[t.snapshot];return{page:t,snapshot:r}}function I(e){return e in m&&"snapshot"in m[e]?m[e].snapshot in x:!1}function De(e=[]){return Object.getOwnPropertyNames(m).forEach(t=>{e.includes(t)?delete x[m[t].snapshot]:delete m[t]})}var k=typeof window<"u"?window:{screen:{},navigator:{}},Q=(k.matchMedia||function(){return{matches:!1}}).bind(k),mr=!1,hr={get passive(){return mr=!0}},At=function(){};k.addEventListener&&k.addEventListener("p",At,hr);k.removeEventListener&&k.removeEventListener("p",At,!1);var A="PointerEvent"in k,Ve="ontouchstart"in k,dr="TouchEvent"in k,gr=Ve||dr&&Q("(any-pointer: coarse)").matches,Lo=(k.navigator.maxTouchPoints||0)>0||gr,Ot=k.navigator.userAgent||"",yr=Q("(pointer: coarse)").matches&&/iPad|Macintosh/.test(Ot)&&Math.min(k.screen.width||0,k.screen.height||0)>=768,To=(Q("(pointer: coarse)").matches||!Q("(pointer: fine)").matches&&Ve)&&!/Windows.*Firefox/.test(Ot),Ro=Q("(any-pointer: fine)").matches||Q("(any-hover: hover)").matches||yr||!Ve;var F=null,ie=null,_e=[];function Be(e){let{speed:t,easing:r,minimum:o}=i.progress,n=typeof F=="number";e=$t(e,o,1),F=e===1?null:e;let s=vr(!n);s.offsetWidth,br(l=>{if(s.style.transform=`translate3d(${Mt(e)}%,0,0)`,s.style.transition=`all ${t}ms ${r}`,e!==1)return setTimeout(l,t);s.style.transition="none",s.style.opacity="1",s.offsetWidth,setTimeout(()=>{s.style.transition=`all ${t}ms ${r}`,s.style.opacity="0",setTimeout(()=>[xr(),l()],t)},t)})}function Nt(e){let t=F;if(!t)return Fe();if(t<1)return typeof e!="number"&&(t>=0&&t<.2?e=.1:t>=.2&&t<.5?e=.04:t>=.5&&t<.8?e=.02:t>=.8&&t<.99?e=.005:e=0),t=$t(t+e,0,.994),Be(t)}function vr(e){if(ie)return ie;document.documentElement.classList.add("pjax-loading");let t=e?"-100":Mt(F||0),r=document.createElement("div");return r.id="pjax-progress",r.style.pointerEvents="none",r.style.background=i.progress.color,r.style.height=i.progress.height,r.style.position="fixed",r.style.zIndex="9999",r.style.top="0",r.style.left="0",r.style.width="100%",r.style.transition="all 0 linear",r.style.transform=`translate3d(${t}%,0,0)`,document.body.appendChild(r),ie=r,r}function xr(){document.documentElement.classList.remove("pjax-loading"),document.getElementById("pjax-progress")&&document.body.removeChild(ie),ie=null}function $t(e,t,r){return e<t?t:e>r?r:e}function Mt(e){return(-1+e)*100}function br(e){let t=()=>{let r=_e.shift();r&&r(t)};_e.push(e),_e.length===1&&t()}function Fe(){F||Be(0);let e=function(){setTimeout(()=>{!F||(Nt(),e())},i.progress.trickleSpeed)};i.progress.trickle&&e()}function jt(e){if(!(!e&&!F))return Nt(.3+.5*Math.random()),Be(1)}var L=f(null);function Er(e){return new Promise(t=>setTimeout(()=>t(e()),5))}var ge=0;function Pr(e){return u(this,null,function*(){ge=ge+xt(e)})}var W=f(null);function ye(e){let t=new XMLHttpRequest;return new Promise((r,o)=>{t.open("GET",e,i.async),t.setRequestHeader("X-Brixtol-Pjax","true"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.onloadstart=n=>{L[e]=t},t.onload=n=>{r(t.status===200?t.responseText:!1)},t.onabort=n=>{delete L[e]},t.onloadend=n=>{delete L[e],Pr(t.responseText)},t.onerror=o,t.timeout=i.timeout,t.responseType="text",t.send(null)})}function ve(e,t,r){e in W||I(e)||(W[e]=setTimeout(t,r))}function qt(e){return e in W?(clearTimeout(W[e]),delete W[e]):!0}function Ht(){let e=f(null);return e.total=ge,e.weight=Et(ge),e}function xe(e){e in L&&(L[e].abort(),console.warn(`@brixtol/pjax: XHR Request was cancelled for url: ${e}`))}function Ct(e){if(e in L)for(let t in L)e!==t&&(L[t].abort(),console.warn(`@brixtol/pjax: Cancelled pending request: ${t}`))}function We(e,t=0){return u(this,null,function*(){return e in L&&t<=i.timeout?(t*5===i.progress.threshold&&Fe(),t++,Er(()=>We(e,t))):delete L[e]})}function g(e){return u(this,null,function*(){if(e.key in L){console.warn(`@brixtol/pjax: XHR Request is already in transit for: ${e.key}`);return}if(!y("request",e))return console.info(`@brixtol/pjax: Request cancelled via dispatched event for: ${e.key}`),!1;try{let t=yield ye(e.key);if(t)return de(e,t);console.warn(`@brixtol/pjax: Failed to retrive response at: ${e.key}`)}catch(t){delete L[e.key],console.error("@brixtol/pjax: Fetch error:",t)}return!1})}function Ee(e){let t=oe(e.target,p.hover);t&&(qt(qe(t.href)),Dt(t))}function Z(e){let t=oe(e.target,p.hover);if(!t)return;let r=d(t,4);if(r.key in W)return;if(I(r.key))return be(t);wr(t);let o=v(r),n=o.threshold||i.hover.threshold;ve(r.key,()=>u(this,null,function*(){if(!y("prefetch",t,r))return be(t);(yield g(o))&&be(t)}),n)}function Dt(e){A?e.addEventListener("pointerenter",Z,!1):e.addEventListener("mouseenter",Z,!1)}function wr(e){A?(e.addEventListener("pointerout",Ee,!1),e.removeEventListener("pointerenter",Z,!1)):(e.addEventListener("mouseleave",Ee,!1),e.removeEventListener("mouseenter",Z,!1))}function be(e){A?(e.removeEventListener("pointerenter",Z,!1),e.removeEventListener("pointerout",Ee,!1)):(e.removeEventListener("mouseleave",Ee,!1),e.removeEventListener("mouseenter",Z,!1))}function Pe(){!i.hover||c.hover||(R(Dt,ne(p.hover)),c.hover=!0)}function we(){!c.hover||(R(be,ne(p.hover)),c.hover=!1)}var ee;function Ir(e){return u(this,null,function*(){if(e.isIntersecting){let t=d(e.target,5);if(!y("prefetch",e.target,t))return ee.unobserve(e.target);(yield g(v(t)))?ee.unobserve(e.target):(console.warn(`@brixtol/pjax: Prefetch will retry at next intersect for: ${t.key}`),ee.observe(e.target))}})}function Ie(){!i.intersect||c.intersect||(ee=new IntersectionObserver(R(Ir),i.intersect),R(ee.observe,bt(p.intersect,p.interhref)),c.intersect=!0)}function ke(){!c.intersect||(ee.disconnect(),c.intersect=!1)}function kr(e){return new Promise((t,r)=>{let o=document.createElement("script");o.addEventListener("error",r),o.async=!1,o.text=e.target.text;for(let{nodeName:n,nodeValue:s}of e.target.attributes)o.setAttribute(n,s);document.contains(e.target)?e.target.replaceWith(o):(document.head.append(o),e.external?o.addEventListener("load",()=>o.remove()):o.remove()),e.external?o.addEventListener("load",()=>t()):t()})}function Lr(e){if(!e.hasAttribute("src")&&!e.text)return;let t=e.type?e.type.trim().toLowerCase():"text/javascript",r=ft.test(t)?1:t==="module"?2:NaN,o=f(null);return o.blocking=!0,o.evaluate=!1,o.external=!1,isNaN(r)||e.noModule&&r===1||(e.src&&(o.external=!0),(r!==1||o.external&&(e.hasAttribute("async")||e.defer))&&(o.blocking=!1),o.evaluate=!0,o.target=e),o}function Bt(e){return u(this,null,function*(){try{let t=kr(e);e.blocking&&(yield t)}catch(t){console.error(t)}})}function Ft(e){return u(this,null,function*(){let r=q(e,Lr).filter(o=>o.evaluate).reduce((o,n)=>u(this,null,function*(){return n.external?Promise.all([o,Bt(n)]):(yield o,yield Bt(n))}),Promise.resolve());yield Promise.race([r])})}function Tr({clientX:e,clientY:t},r){return e<=r.right&&e>=r.left&&t<=r.bottom&&t>=r.top}function Rr(e){let t=f(null),r=e.getBoundingClientRect(),o=e.getAttribute(`${i.schema}-proximity`),n=J.test(o)?Number(o):i.proximity.distance;return t.target=e,t.top=r.top-n,t.bottom=r.bottom+n,t.left=r.left-n,t.right=r.right+n,t}function Ar(e){let t=!1;return r=>{if(t)return;t=!0;let o=e.findIndex(n=>Tr(r,n));if(o===-1)setTimeout(()=>{t=!1},i.proximity.throttle);else{let{target:n}=e[o],s=v(d(n,6));ve(s.key,()=>u(this,null,function*(){if(!y("prefetch",n,s))return stop();(yield g(s))&&(e.splice(o,1),t=!1,e.length===0&&(stop(),console.info("@brixtol/pjax: Proximity observer has disconnected")))}),s.threshold||i.proximity.threshold)}}}var se;function Le(){if(!i.proximity||c.proximity)return;let e=ne(p.proximity).map(Rr);e.length>0&&(se=Ar(e),A?addEventListener("pointermove",se,!1):addEventListener("mousemove",se,!1),c.proximity=!0)}function Te(){!c.proximity||(A?removeEventListener("pointermove",se,!1):removeEventListener("mousemove",se,!1),c.proximity=!1)}function Or(e,t){return e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_PRECEDING||-1}function Nr(e){return u(this,null,function*(){let t=q(e.querySelectorAll(p.scripts));t.sort(Or),yield Ft(t)})}function $r(e){e.querySelectorAll(p.track).forEach(r=>{!r.hasAttribute("id")||Ne.has(r.id)||(document.body.appendChild(r),Ne.add(r.id))})}function Mr(e,t){let r=e.replace?e.replace:i.targets,o=r.join(","),n=document.body.querySelectorAll(o);if(n.length===0)return document.body.replaceWith(t.body);let s=t.body.querySelectorAll(o);n.forEach((l,N)=>{if(!!l.matches(r[N])&&!!y("render",l,s[N])&&(l.replaceWith(s[N]),e.append||e.prepend)){let b=document.createElement("div");return t.childNodes.forEach(b.appendChild),e.append?l.appendChild(b):l.insertBefore(b,l.firstChild)}}),$r(t.body)}function jr(e,t){let r=e.hydrate.join(","),o=document.body.querySelectorAll(r);if(o.length>0){let n=t.body.querySelectorAll(r);o.forEach((s,l)=>{!y("hydrate",s,n[l])||!n[l]||(s.firstChild.nodeType===Node.TEXT_NODE?s.innerHTML=n[l].innerHTML:s.replaceWith(n[l]))})}e.history=void 0,e.type=2,B(e),De([e.key])}function O(e,t){we(),ke(),Te();let r=U(x[e.snapshot]);return e.title=document.title=r.title||"",e.type===3?jr(e,r):(Mr(e,r),e.history&&(t||(e.key===e.location.lastpath?E.replace(e.location,e):E.push(e.location,e)),scrollTo(e.position.x,e.position.y))),Nr(r.head),jt(),Pe(),Ie(),Le(),y("load",e),e}var Xe;function Ye(e){return E.replace(E.location,e),E.location.state}function zt(){if(E.location.state===null)return!1;let e=E.location.state;return"location"in e&&"lastpath"in e.location?e.location.lastpath:!1}function Xt(){E.location.state===null&&(E.location.state=window.history.state||Ye(null));let e=P(E.location.state,{position:V()});return E.replace(E.location,e),e}function Sr(r){return u(this,arguments,function*({key:e,state:t}){if(t.key!==Xe&&xe(Xe),console.log("POSTATE",t.key,I(t.key)),I(t.key))return O(t,!0);Xe=t.key,t.type=9;let o=yield g(t);return o?O(o,!0):location.assign(t.key)})}function qr({action:e,location:t}){if(console.log("LISTENER",e,t),e===S.Pop)return Sr(t)}var Yt;function Kt(){c.history||(Yt=E.listen(qr),c.history=!0)}function Jt(){!c.history||(Yt(),c.history=!1)}function Hr(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}function Gt(e,t){return function r(o){return o.preventDefault(),e.removeEventListener("click",r,!1),Xt(),typeof t=="object"?O(t):typeof t=="string"?Re(t):location.assign(t)}}function te(e){if(!Hr(e))return;let t=oe(e.target,p.href);if(!t)return;let r=d(t,2);!y("trigger",e,r)||(I(r.key)?t.addEventListener("click",Gt(t,B(r)),!1):(Ct(r.key),g(v(r)),t.addEventListener("click",Gt(t,r.key),!1)))}function Re(e,t=!1){return u(this,null,function*(){if(t){typeof t.cache=="string"&&!t.hydrate&&(t.cache==="clear"?_():_(t.key));let r=yield g(t);if(r)return O(r)}else{if(yield We(e))return O(m[e]);xe(e)}return location.assign(e)})}function Qt(){c.hrefs||(A?addEventListener("pointerdown",te,!1):(addEventListener("mousedown",te,!1),addEventListener("touchstart",te,!1)),c.hrefs=!0)}function Zt(){!c.hrefs||(A?removeEventListener("pointerdown",te,!1):(removeEventListener("mousedown",te,!1),removeEventListener("touchstart",te,!1)),c.hrefs=!1)}function tr(){let e=v(d(1)),t=zt();i.reverse&&typeof t=="string"&&(e.location.lastpath=t);let r=de(e,document.documentElement.outerHTML);if(e.position=V(),y("connected",r),i.preload!==null){if(fe(i.preload))for(let o of i.preload){let n=d(o,7);n.key!==o&&g(v(n))}else if(typeof i.preload=="object"&&e.key in i.preload)for(let o of i.preload[e.key]){let n=d(o,7);n.key!==o&&g(v(n))}}if(Ye(r),r.location.lastpath!==e.key){let o=d(r.location.lastpath,8);g(v(o))}removeEventListener("load",tr)}function rr(){Kt(),Lt(),Qt(),Pe(),Ie(),Le(),addEventListener("load",tr),console.info("@brixtol/pjax: Connection Established \u26A1")}function or(){Jt(),Tt(),Zt(),we(),ke(),Te(),_(),console.warn("@brixtol/pjax: Instance has been disconnected! \u{1F614}")}var Dr=!!(window.history.pushState&&window.requestAnimationFrame&&window.addEventListener&&window.DOMParser);function $n(e={}){$e(e),Dr?/https?/.test(window.location.protocol)?addEventListener("DOMContentLoaded",rr):console.error("@brixtol/pjax: Invalid protocol, pjax expects https or http protocol"):console.error("@brixtol/pjax: Not supported by this browser")}function Mn(e,t){if(e)if(t)e==="config"&&$e(t),e==="observers"&&P(c,t);else{if(e==="config")return i;if(e==="observers")return c;if(e==="pages")return m;if(e==="snapshots")return x}let r=f(null);return r.config=i,r.snapshots=x,r.pages=m,r.observers=c,r}function jn(e){return u(this,null,function*(){let t=he("page");e&&P(t,e),t.type=10;let r=yield g(t);return r?(console.info("@brixtol/pjax: Triggered reload, page was re-cached"),O(r)):(console.warn("@brixtol/pjax: Reload failed, triggering refresh (cache will be purged)"),location.assign(t.key))})}function Sn(e){let t=f(null);return e?e in m?Rt(e):console.error(`@brixtol/pjax: No store exists for ${e}`):(t.state=m,t.snapshots=x,t.size=Ht(),t)}function qn(e){return u(this,null,function*(){let t=d(e,13);if(t.location.origin!==ue)return console.error("@brixtol/pjax: Cross origin fetches are not allowed");let r=yield ye(t.key);if(r)return U(r)})}function Hn(e){return _(e)}function Cn(e){return u(this,null,function*(){})}function Dn(e,t){return u(this,null,function*(){let r=d(3);r.hydrate=t,r.position=V();let o=yield ye(e);if(!o)return console.warn("@brixtol/pjax: hydration failed");let n=I(r.key)?B(r,o):v(r);if(i.reverse){let s=d(r.location.lastpath,8);g(s)}return O(n)})}function Vn(e){return u(this,null,function*(){let t=d(e,11);if(I(t.key)){console.warn(`@brixtol/pjax: Cache already exists for ${t.key}, prefetch skipped`);return}let r=yield g(v(t));if(r)return r;console.warn(`@brixtol/pjax: Prefetch failed for ${t.key}`)})}function _n(e,t){return u(this,null,function*(){let r=d(e),o=typeof t=="object"?P(r,t):r;return I(r.key)?Re(r.key,B(o)):Re(r.key,v(o))})}function Bn(){or()}export{Sn as cache,Hn as clear,$n as connect,Bn as disconnect,qn as fetch,Dn as hydrate,pr as off,fr as on,Vn as prefetch,jn as reload,Mn as session,Dr as supported,Cn as update,_n as visit};
