var e=Object.defineProperty,t="undefined"!=typeof window?window:{screen:{},navigator:{}},n=(t.matchMedia||function(){return{matches:0}}).bind(t),r={get passive(){return 1}},o=function(){};t.addEventListener&&t.addEventListener("p",o,r),t.removeEventListener&&t.removeEventListener("p",o,0);var i="ontouchstart"in t,s=i||"TouchEvent"in t&&n("(any-pointer: coarse)").matches,a=(t.navigator.maxTouchPoints||0)>0||s,l=t.navigator.userAgent||"",c=n("(pointer: coarse)").matches&&/iPad|Macintosh/.test(l)&&Math.min(t.screen.width||0,t.screen.height||0)>=768,u=(n("(pointer: coarse)").matches||!n("(pointer: fine)").matches&&i)&&!/Windows.*Firefox/.test(l),f=n("(any-pointer: fine)").matches||n("(any-hover: hover)").matches||c||!i,d=!a||!f&&u?a?"touchOnly":"mouseOnly":"hybrid",p="undefined"!=typeof window;document.createElement("template"),document.createRange&&document.createRange();var h=s?"pointer":"mouse",m=window.location.origin,{assign:g,keys:y,entries:v}=Object,b=Object.defineProperty,$=Object.defineProperties,w=Object.create,{isArray:k}=Array,A=Array.from,x="",{warn:E,info:C,error:N,debug:T}=console,q=()=>document.body,O=()=>document.head,S=e=>e?g(w(null),e):w(null),L=e=>new Set(e),P=()=>new Map,R=class extends XMLHttpRequest{constructor(){super(...arguments),this.key=null}};R.r=P(),R.c=P(),R.s=S();var I,W=S({index:"",eval:1,patched:0,loaded:0,logLevel:2,qs:S(),config:S({fragments:["body"],timeout:3e4,globalThis:1,schema:"spx-",manual:0,logLevel:2,cache:1,components:null,maxCache:100,reverse:1,preload:null,annotate:0,eval:S({script:null,style:null,link:null,meta:0}),hover:S({trigger:"href",threshold:250}),intersect:S({rootMargin:"0px 0px 0px 0px",threshold:0}),proximity:S({distance:75,threshold:250,throttle:500}),progress:S({bgColor:"#111",barHeight:"3px",minimum:.08,easing:"linear",speed:200,threshold:500,trickle:1,trickleSpeed:200})}),fragments:P(),components:S({u:P(),f:P(),l:L(),t:P(),p:(I={get:(e,t)=>W.components.f.get(e[t])},new Proxy(S(),I))}),events:S(),observe:S(),memory:S(),pages:S(),snaps:S(),resources:L()});function j(e,t,n){let r=W.logLevel,o="[96mSPX[0m ";if(k(t)&&(t=t.join(" ")),2!==e&&1!==e||1!==r&&2!==r){if(e<=3&&3===r)n?E(o+t,n):E(o+t);else if(5===e||4===e){n?N(o+t,n):N(o+t);try{throw 4===e?new TypeError(t):new Error(t)}catch(e){}}}else C(`${o}%c${t}`,`color: ${n||"#999"};`)}var M=/\b(?:append|prepend)/,H=/\s+/g,D=/^\b(?:true|false)$/i,X=/^\d*\.?\d+$/,U=/^(?:[.-]?\d*\.?\d+|NaN)$/,Y=/\b(?:intersect|hover|proximity)\b/,F=/\b(?:SCRIPT|STYLE|LINK)\b/,z=/\[(['"]?.*['"]?,?)\]/,V=/[xy]\s*|\d*\.?\d+/gi;function B(e){let t=e.replace(/\s+,/g,",").replace(/,\s+/g,",").replace(/['"]/g,x);return 91===t.charCodeAt(0)&&(/^\[\s*\[/.test(t)||/,/.test(t)&&/\]$/.test(t))&&(t=t.replace(/^\[/,x).replace(/\]$/,x)),t.split(/,|\|/)}function K(e,t){try{let n=(t||e).replace(/\\'|'/g,(e=>"\\"===e[0]?e:'"')).replace(/\[|[^\s[\]]*|\]/g,(e=>/[[\]]/.test(e)?e:e.split(",").map((e=>e.replace(/^(\w+)$/,'"$1"').replace(/^"([\d.]+)"$/g,"$1"))).join(","))).replace(/([a-zA-Z0-9_-]+)\s*:/g,'"$1":').replace(/:\s*([$a-zA-Z_-]+)\s*([,\]}])/g,':"$1"$2').replace(/,([\]}])/g,"$1").replace(/([a-zA-Z_-]+)\s*,/g,'"$1",').replace(/([\]},\s]+)?"(true|false)"([\s,{}\]]+)/g,"$1$2$3");return JSON.parse(n)}catch(n){return j(5,"Invalid JSON expression in attribute value: "+JSON.stringify(e||t,null,2),n),t}}function Z(e){return e[e.length-1]}function _(e){return e.replace(/\./g,"\\.").replace(/@/g,"\\@").replace(/:/g,"\\:")}function G(e){return function(e){return e.replace(/\s+/g," ").trim()}(e.replace(/[\s .]+/g,".")).replace(/\s+/g," ").trim().split(/[ ,]/)}function J(e){if(U.test(e))return"NaN"===e?NaN:+e;if(D.test(e))return"true"===e;let t=e.charCodeAt(0);return 123===t||91===t?K(e):e}function Q(e){return setTimeout((()=>e()),1)}function ee(){return(new Date).getTime()}function te(e){return t=>t?"string"==typeof t?t in e:t.every((t=>t in e)):0}function ne(e,t){return e?t in e:0}function re(e,t,n){return void 0!==t?(b(e,t,{get:()=>n}),e):(t,n,r)=>{if(ne(e,t))return;let o=()=>n;return b(e,t,r?g(r,{get:o}):{get:o})}}function oe(e){return ne(e,"target")?1===e.target.length&&"body"===e.target[0]?e.target:e.target.filter(((e,t,n)=>"body"!==e&&e!==x&&-1===e.indexOf(",")?n.indexOf(e)===t:0)):1===W.config.fragments.length&&"body"===W.config.fragments[0]?["body"]:[]}function ie(e){return 1===e.length&&"body"===e[0]?"body":0===e.length?null:e.join(",")}function se(e){let t=typeof e;if("object"===t){for(let t in e)return 0;return 1}return"string"===t?void 0===e[0]:k(e)?e.length>0:0}var ae=function e(t=5){let n=Math.random().toString(36).slice(-t);return e.v.has(n)?e(t):(e.v.add(n),n)};function le(e=2){return(t,n)=>{let r=t.length;return(r<1||t[r-1].length===e?t.push([n]):t[r-1].push(n))&&t}}function ce(e){return e[0].toLowerCase()+e.slice(1)}function ue(e){return e[0].toUpperCase()+e.slice(1)}function fe(e){return/[A-Z]/.test(e)?e.replace(/(.{1})([A-Z])/g,"$1-$2").toLowerCase():e}function de(e){return/[_-]/.test(ce(e))?e.replace(/([_-]+).{1}/g,((e,t)=>e[t.length].toUpperCase())):e}function pe(e,t){let n="string"==typeof e?q().querySelectorAll(e):e,r=n.length;if(0!==r)for(let e=0;e<r&&0!=t(n[e],e);e++);}function he(e,t){if(1===arguments.length)return t=>he(e,t);let n=t.length;if(0!==n)for(let r=0;r<n;r++)e(t[r],r,t)}function me(e){for(let t in e)delete e[t]}ae.v=L();var ge=function(){let e,t=[],n=document.createElement("div"),r=null,o=null,i=e=>100*(-1+e),s=(e,t,n)=>e<t?t:e>n?n:e,a=()=>{let e=t.shift();e&&e(a)},l=e=>{e=s(e,W.config.progress.minimum,1),r=1===e?null:e;let l=o||(n.style.setProperty("transform",`translateX(${i(r||0)}%)`),o=q().appendChild(n),n);(e=>{t.push(e),1===t.length&&a()})((t=>{l.style.setProperty("transform",`translateX(${i(e)}%)`),1===e?setTimeout((()=>{(()=>{let e=q();e.contains(o)?o.animate({opacity:["1","0"]},{easing:"ease-out",duration:100}).onfinish=()=>{e.removeChild(o),o=null}:o=null})(),t()}),2*W.config.progress.speed):setTimeout(t,W.config.progress.speed)}))},c=e=>{let t=r;return t?t<1?("number"!=typeof e&&(e=t>=0&&t<.2?.1:t>=.2&&t<.5?.04:t>=.5&&t<.8?.02:t>=.8&&t<.99?.005:0),t=s(t+e,0,.994),l(t)):void 0:f()},u=()=>{setTimeout((()=>{r&&(c(),u())}),W.config.progress.trickleSpeed)};function f(t){W.config.progress&&(e=setTimeout((()=>{r||l(0),W.config.progress.trickle&&u()}),t||0))}return{start:f,done:function(t){clearTimeout(e),(t||r)&&(c(.3+.5*Math.random()),l(1))},style:({bgColor:e,barHeight:t,speed:r,easing:o})=>{n.style.cssText=function(...e){return e.join(x)}("pointer-events:none;",`background-color:${e};`,`height:${t};`,"position:fixed;","display:block;","z-index:2147483647;","top:0;","left:0;","width:100%;","will-change:opacity,transform;",`transition:transform ${r}ms ${o};`)}}}();function ye(e,t){let n=e.name,r=t;t=ce(t||n),ne(e,"connect")||(e.connect={id:t,state:{},nodes:[]});let o=te(e.connect);return o("state")||(e.connect.state={}),o("nodes")||(e.connect.nodes=[]),o("id")||(e.connect.id=t),t!==e.connect.id&&(t=de(e.connect.id)),n!==r&&/^[A-Z]|[_-]/.test(e.connect.id)&&j(3,[`Component identifer name "${e.connect.id}" must use camelCase format.`,`The identifer has been converted to "${t}"`]),t}function ve(e,t=0){let{u:n}=W.components;for(let r in e){let o=e[r],i=t?r:ye(o,r);n.has(i)||(n.set(i,o),j(1,`Component ${o.name} registered using id: ${i}`,"#F48FB1"))}W.config.components||(W.config.components=1)}function be(e,t){let n=`:not([${e}${t}=false]):not([${e}link])`;switch(t.charCodeAt(0)){case 104:return`${n}:not([${e}proximity]):not([${e}intersect])`;case 105:return`${n}:not([${e}hover]):not([${e}proximity])`;case 112:return`${n}:not([${e}intersect]):not([${e}hover])`}}function $e(e){return(new DOMParser).parseFromString(e,"text/html")}function we(e){return(e||document).documentElement.outerHTML}function ke(e){let t=e.indexOf("<title");if(-1===t)return x;let n=e.indexOf(">",t)+1,r=e.indexOf("</title",n);return function(e){let t=document.createElement("textarea");return t.innerHTML=e,t.value}(e.slice(n,r).trim())}function Ae(e,...t){let n="before:cache"===e;n&&(t[1]=$e(t[1]));let r=1;return he((e=>{let o=e.apply(null,t);n?o instanceof Document?r=o.documentElement.outerHTML:"string"!=typeof r&&(r=0!=o):r=0!=o}),W.events[e]||[]),r}function xe(e,t,n){return e in W.events||(W.events[e]=[]),W.events[e].push(n?t.bind(n):t)-1}function Ee(e,t){if(e in W.events){let n=W.events[e];if(n&&"number"==typeof t)n.splice(t,1),j(2,`Removed ${e} event listener (id: ${t})`),0===n.length&&delete W.events[e];else{let r=[];if(n&&t)for(let o=0,i=n.length;o<i;o++)n[o]!==t?r.push(n[o]):"x"!==e&&j(2,`Removed ${e} event listener (id: ${o})`);r.length?W.events[e]=r:delete W.events[e]}}else j(3,`There are no ${e} event listeners`);return this}var Ce={};function Ne(e,t){if(0==t(e))return;let n,r;for(e.firstElementChild&&(r=0,n=e.children[r]);n;)n&&Ne(n,t),n=e.children[++r]}function Te(e,t){return`on${e}`in t?1:(j(5,[`Invalid event name "${e}" provided. No such event exists in the DOM API.`,"Only known event listeners can be attached."],t),0)}function qe(e,t){let n=e[t.method];return function(r){t.params&&(ne(r,"attrs")||re(r,"attrs",S()),g(r.attrs,t.params)),n.call(e,r)}}function Oe(e,t){t.attached&&(t.listener.abort(),t.listener=new AbortController,t.options.signal=t.listener.signal,t.attached=0,W.components.t.delete(t.dom),j(1,[`Detached ${t.key} ${t.eventName} event from ${t.method}() method in component`,`${e.scope.static.id}: ${e.scope.key}`]))}function Se(e,t,n){if(!n.attached){if(!(n.method in e))return void j(3,`Undefined callback method: ${e.scope.static.id}.${n.method}()`);(function(e,t){for(let n=0,r=e.length;n<r;n++){let{name:r,value:o}=e[n];if(W.qs.R.test(r)&&!r.startsWith(W.qs.x)&&o){let e=r.slice(W.config.schema.length).split(":").pop();null===t.params&&(t.params=S()),e in t.params||(t.params[e]=J(o))}}})(t.attributes,n),n.isWindow?Te(n.eventName,window)&&addEventListener(n.eventName,qe(e,n)):Te(n.eventName,t)&&(t.addEventListener(n.eventName,qe(e,n),n.options),W.components.t.set(n.dom,t)),j(1,[`Attached ${n.key} ${n.eventName} event to ${n.method}() method in component`,`${e.scope.static.id}: ${e.scope.key}`]),n.attached=1}}((t,n)=>{for(var r in n)e(t,r,{get:n[r],enumerable:1})})(Ce,{connect:()=>ot,disconnect:()=>it,hook:()=>rt,mount:()=>nt,teardown:()=>tt});var Le,Pe,Re=(Le=class{constructor(e){this.state=S();let{t:t}=W.components,{scope:n}=$(this,{scope:{get:()=>Re.scopes.get(e)},dom:{get:()=>t.get(n.dom)}}),r=`${W.config.schema}${n.instanceOf}`;if(this.state=new Proxy(S(),{set:(e,o,i)=>{let s=n.static.state[o],a="object"==typeof i||k(i)?JSON.stringify(i):`${i}`;if("object"==typeof s&&ne(s,"persist")&&s.persist?e[o]=n.state[o]=i:e[o]=i,a.trim()!==x&&this.dom){let e=this.dom.hasAttribute(`${r}:${o}`)?`${r}:${o}`:`${r}:${fe(o)}`;a!==this.dom.getAttribute(`${r}:${o}`)&&this.dom.setAttribute(e,a)}if(o in n.binds){let{binds:e}=n;for(let n in e[o])e[o][n].value=a,t.has(e[o][n].dom)&&(t.get(e[o][n].dom).innerText=a)}return 1}}),se(n.state))for(let e in n.static.state){let t,r,o=n.static.state[e];"object"==typeof o?(t=o.typeof,r=o.default):t=o,t===String?this.state[e]=r||x:t===Boolean?this.state[e]=r||0:t===Number?this.state[e]=r?+r:0:t===Array?this.state[e]=r||[]:t===Object&&(this.state[e]=r||{}),n.state[e]=this.state[e]}else for(let e in n.static.state){if(!(e in n.state))if("object"==typeof n.static.state[e])n.state[e]=n.static.state[e].default;else switch(n.static.state[e]){case String:n.state[e]=x;break;case Boolean:case Number:n.state[e]=0;break;case Object:n.state[e]={};break;case Array:n.state[e]=[]}let t,o,i=n.static.state[e],s=fe(e),a=this.dom.hasAttribute(`${r}:${s}`)?this.dom.getAttribute(`${r}:${s}`):this.dom.getAttribute(`${r}:${e}`),l=null!==a&&a!==x;"object"==typeof i?(t=i.typeof,o=l,l||(a=i.default)):t=i,`has${ue(e)}`in this.state||b(this.state,`has${ue(e)}`,{get:()=>l}),"string"==typeof a&&a.startsWith("window.")?this.state[e]=window[a.slice(7)]:t===String?this.state[e]=a||x:t===Boolean?this.state[e]=a||0:t===Number?this.state[e]=a?+a:0:t===Array?this.state[e]=l?K(a):o?a:[]:t===Object&&(this.state[e]=l?K(a):o?a:{}),n.state[e]=this.state[e]}}get html(){return this.dom.closest("html")}},Le.scopes=P(),Le);function Ie(e,t,n,r){let o,i,s;for(e.firstElementChild&&(o=0,i=e.children[o],s=t.children[o]);i;)i&&(r.has(s)?(We(i,n,1),r.delete(s)):s.hasAttribute(W.qs.e)&&i.setAttribute(W.qs.e,s.getAttribute(W.qs.e)),Ie(i,s,n,r)),i=e.children[++o],s=t.children[o]}function We(e,t,n=0){let{t:r}=W.components;Ne(e,(e=>{if("false"!==e.getAttribute("spx-snapshot")&&Xe(e.attributes)&&!e.hasAttribute(W.qs.e)){let o=t.shift();if(o||j(5,"Undefined reference, the snapshot record failed to align",e),r.has(o)){let i=e.getAttribute(W.qs.e),s=r.get(o).getAttribute(W.qs.e);if(i!==s&&e.setAttribute(W.qs.e,s),0===t.length)return 0==n&&(tn(e.ownerDocument.documentElement.outerHTML),j(1,`Snapshot ${W.page.key} updated for: ${W.page.snap}`)),0}else j(5,"Undefined reference, the snapshot record failed to align",e)}}))}function je(e,t){let n=S(),{t:r}=W.components;for(let e in t)t[e].schema in n||(n[t[e].schema]=[]),n[t[e].schema].push(t[e].dom);for(let t in n){if(`${t}s`in e)continue;if(t in e){e[t]=n[t];continue}let o=n[t];o.length>1?$(e,{[t]:{get:()=>r.get(o[0]),set(e){o=e}},[`${t}s`]:{get:()=>o.map((e=>r.get(e)))}}):b(e,t,{get:()=>r.get(o[0]),set(e){o=e}})}}function Me({h:e,d:t,o:n,m:r}){let o=4===W.page.type,i=[],{t:s,l:a,f:l,u:c,p:u}=W.components;for(let n in e)for(let f of e[n]){if(null===f.instanceOf){if(!(n in t))continue;f.instanceOf=t[n]}let e,d;if(0!=f.mounted||null===r&&!o)e=c.get(f.instanceOf),Re.scopes.set(f.key,re(f,"static",e.connect)),d=new e(f.key);else{let t=rn();null!==f.alias&&f.alias in t?(d=t[f.alias][0],e=d.scope.static):f.instanceOf in t&&1===t[f.instanceOf].length&&(d=t[f.instanceOf][0],e=d.scope.static),f.key=d.scope.key,f.ref=d.scope.ref}if(se(f.nodes)||je(d,f.nodes),null===r&&"nodes"in e&&e.nodes.length>0)for(let t of e.nodes)re(d,`has${ue(t)}Node`,`${t}Node`in d);for(let e in f.events){let t;null!==r&&0==f.mounted?(t=d.scope.events[e]=f.events[e],u[e]=d.scope.key):t=f.events[e],Se(d,s.get(t.dom),t)}(null===r||(null!==r||o)&&1==f.mounted)&&(a.add(f.key),l.set(f.key,d),j(1,`Component ${f.static.id} (oninit) mounted: ${f.key}`,"#6DD093"),"oninit"in d&&i.push([d,"oninit"]),"onload"in d&&i.push([d,"onload"]))}return 0===W.page.type&&n.length>0&&Q((()=>We(W.snapDom.body,n))),i.length>0?nt(i):Promise.resolve()}function He(){let e=[];for(let t of W.page.fragments){let n=document.getElementById(t);n?(W.fragments.set(t,n),e.push(t)):W.fragments.delete(t)}Jt("fragments",e)}function De(e){for(let[t,n]of W.fragments)if(t===e.id||n.contains(e))return 1;return 0}function Xe(e){if("string"==typeof e)return e.indexOf("@")>-1||e===W.qs.E||e===W.qs.b||e===W.qs.N;for(let t=e.length-1;t>=0;t--)if(Xe(e[t].name))return 1;return 0}function Ue(e,t){Xe(e.attributes)&&(e.hasAttribute(W.qs.E)?function(e,t,n){let{u:r,t:o}=W.components,{h:i,d:s}=n,a=e.hasAttribute("id")?e.id.trim():null;n.n=ae(),n.o.push(n.n),o.set(n.n,e);for(let o of function(e){return e.trim().replace(/\s+/," ").split(/[|, ]/).map(de)}(t))if(r.has(o)){let t;o in i?(t=Z(i[o]),0==t.mounted?(ze(e,t.key,t.ref),t.dom=n.n,t.mounted=1,t.inFragment=De(e)):i[o].push(Ve(o,e,n))):i[o]=[Ve(o,e,n)],t=Z(i[o]),a&&!(a in s)&&(s[a]=o),_e(e,n,o,t.alias)}else j(5,`Component does not exist in registry: ${o}`)}(e,e.getAttribute(W.qs.E),t):_e(e,t,null,null))}function Ye(e=null){return S({d:S(),h:S(),n:null,o:[],m:e,V:e?S():null})}function Fe(e,{h:t,d:n}){return e in t?Z(e in n?t[n[e]]:t[e]):e in n?Z(t[n[e]]):(t[e]=[Ve(e)],t[e][0])}function ze(e,t,n){W.components.p[n]=t;let r=e.getAttribute(W.qs.e),o=r?`${r},${n}`:n;return e.setAttribute(W.qs.e,o),n}function Ve(e,t,n){let{u:r}=W.components,o=ae(),i=S({key:o,mounted:0,ref:`c.${o}`,state:S(),nodes:S(),events:S(),binds:S()});return t&&(ze(t,o,i.ref),i.dom=n.n,i.mounted=1,i.inFragment=De(t),t.hasAttribute("id")&&(i.alias=de(t.id.trim()))),r.has(e)?(i.instanceOf=e,i.alias?r.has(i.alias)?j(5,[`Component alias "${i.alias}" matches a component identifer in the registry.`,"An alias reference must be unique and cannot match component names."]):n.d[i.alias]=e:i.alias=null):(i.alias=e||null,i.instanceOf=null,i.mounted&&(n.d[i.alias]=null)),i}function Be(e,t,n,r){let o=S(),i=n.indexOf("{"),s=t.slice(W.config.schema.length),a=new AbortController;o.key=`e.${ae()}`,o.dom=`${r.n}`,o.isWindow=s.startsWith("window:"),o.eventName=o.isWindow?s.slice(7):s,o.attached=0,o.params=null,o.options={signal:a.signal};let l=n;if(i>-1){let e=n.slice(i,n.lastIndexOf("}",i)).match(/(passive|once)/g);null!==e&&(e.indexOf("once")>-1&&(o.options.once=1),e.indexOf("passive")>-1&&(o.options.passive=1)),l=n.slice(0,i)}let c=G(l);c.length>1&&j(3,`No more than 1 DOM Event listener method allowed in value: ${n}`);let[u,f]=c[0].split("."),d=Fe(u,r);o.listener=a,o.method=f.trim(),d.events[o.key]=o,ze(e,d.key,o.key)}function Ke(e,t,n){for(let r of G(t)){let[t,o]=r.split("."),i=Fe(t,n),s=ze(e,i.key,`n.${ae()}`);i.nodes[s]=S({key:s,keyProp:o,dom:n.n,schema:`${o}Node`,isChild:i.mounted})}}function Ze(e,t,n){for(let r of G(t)){let[t,o]=r.split("."),i=Fe(t,n),s=ze(e,i.key,`b.${ae()}`);o in i.binds||(i.binds[o]=S()),i.binds[o][s]=S({key:s,stateKey:o,value:e.innerText,dom:n.n,stateAttr:`${W.config.schema}${t}:${o}`,selector:`[${W.qs.e}*=${_(s)}]`,isChild:i.mounted})}}function _e(e,t,n,r){null===n&&null===r&&(t.n=ae(),t.o.push(t.n),W.components.t.set(t.n,e));for(let o=e.attributes.length-1;o>=0;o--){let{name:i,value:s}=e.attributes[o];if(n){let e=`${W.config.schema}${n}:`;r&&!i.startsWith(e)&&(e=`${W.config.schema}${r}:`),i.startsWith(e)&&(Fe(n,t).state[de(i.slice(e.length))]=s)}i.indexOf("@")>-1?Be(e,i,s,t):i===W.qs.N?Ze(e,s,t):i===W.qs.b&&Ke(e,s,t)}}function Ge(e){let t=Ye();if(e){if(e instanceof Set){for(let n of e)Ue(n,t);return e.clear(),t}return Ue(e,t),t}Ne(q(),(e=>Ue(e,t))),se(t.h)||Me(t)}function Je(e,t){let{p:n,l:r,t:o}=W.components;for(let i of t){let t=n[i];if(!t)continue;let s=i.charCodeAt(0);if(99===s)r.add(t.scope.key),o.set(t.scope.dom,e),t.scope.mounted=1,j(1,`Component ${t.scope.static.id} mounted: ${t.scope.key}`,"#6DD093");else if(101===s)Se(t,e,t.scope.events[i]);else if(110===s)o.set(t.scope.nodes[i].dom,e);else if(98===s){let{binds:n}=t.scope;for(let t in n)if(i in n[t]){e.innerText=n[t][i].value,o.set(n[t][i].dom,e);break}}}}function Qe(e,t,n){let{p:r,l:o,t:i}=W.components;for(let s of t){let t=r[s];if(!t)continue;let a=s.charCodeAt(0);if(99===a){t.scope.mounted=0,o.delete(t.scope.key),i.delete(t.scope.dom);let{scope:e}=t;for(let t in e.nodes)i.delete(e.nodes[t].dom);for(let t in e.binds)for(let n in e.binds[t])i.delete(e.binds[t][n].dom);for(let n in e.events)Oe(t,e.events[n]);j(1,`Component ${t.scope.static.id} unmounted: ${t.scope.key}`,"#7b97ca")}else if(101===a)Oe(t,t.scope.events[s]);else if(110===a){let r=t.scope.nodes[s];i.delete(r.dom),n&&e.isEqualNode(n)&&(ze(e,t.scope.key,s),Pe.o.push(r.dom))}else if(98===a){let{binds:r}=t.scope;for(let o in r)if(s in r[o]){i.delete(r[o][s].dom),n&&e.isEqualNode(n)&&(ze(e,t.scope.key,s),Pe.o.push(r[o][s].dom));break}}}}function et(e){1!==e.nodeType&&11!==e.nodeType||e.hasAttribute(W.qs.e)&&Qe(e,e.getAttribute(W.qs.e).split(","))}function tt(){for(let e in W.components.p)delete W.components.p[e];for(let e of W.components.f.values())for(let t in e.scope.events)Oe(e,e.scope.events[t]);W.components.t.clear(),W.components.f.clear(),W.components.l.clear(),j(2,"Component instances were disconnected")}function nt(e){let t=e.map((([e,t])=>e.scope.mounted?e[t](W.page):Promise.reject(e.scope.instanceOf)));return Promise.race(t)}function rt(e,t){if("onvisit"===e)return Q((()=>rt(null,t)));let{l:n,f:r}=W.components,o=1,i=[];null===e?e="onvisit":"onload"===e?(o=2,i=[],Jt("components",A(n))):"onexit"===e&&(o=3,i=[]);for(let s of n){let n=r.get(s);n&&e in n&&(1===o?n[e](t):i.push([n,e]))}i.length>0&&nt(i).then((()=>{for(let[e]of i)e.scope.mounted=2===o})).catch((()=>{for(let[e]of i)e.scope.mounted=0}))}function ot(){W.config.components&&(W.observe.components||(0===W.page.type?Ge():Pe?Me(Pe).then((()=>{rt("onload",W.page),Q((()=>{Pe=void 0}))})):rt("onload",W.page),W.observe.components=1))}function it(){W.observe.components&&(rt("onexit",W.page),W.observe.components=0)}function st(e,{method:t="GET",body:n=null,headers:r=null,type:o="text"}={}){return new Promise((function(i,s){let a=new R;if(a.key=e,a.responseType=o,a.open(t,e),a.setRequestHeader("spx-request","true"),null!==r)for(let e in r)a.setRequestHeader(e,r[e]);a.onloadstart=function(){R.r.set(this.key,a)},a.onload=function(){i(this.response)},a.onerror=function(){s(this.statusText)},a.onabort=function(){delete R.s[this.key],R.c.delete(this.key),R.r.delete(this.key)},a.onloadend=function(e){R.r.delete(this.key),W.memory.bytes=W.memory.bytes+e.loaded,W.memory.visits=W.memory.visits+1},a.send(n)}))}function at(e){return e in R.s?(clearTimeout(R.s[e]),delete R.s[e]):1}function lt(e,t,n){e in R.s||on(e)||(R.s[e]=setTimeout(t,n))}function ct(e){for(let[t,n]of R.r)e!==t&&(n.abort(),j(3,`Pending request aborted: ${t}`))}async function ut(e){if(e.rev===e.key)return;let t=Gt(yn(e.rev,4));await new Promise((e=>setTimeout((()=>e()),1))),dt(t).then((t=>{t?j(2,`Reverse fetch completed: ${t.rev}`):j(3,`Reverse fetch failed: ${e.rev}`)}))}async function ft(e){if(!R.c.has(e.key))return e;let t=await R.c.get(e.key);return R.c.delete(e.key),delete R.s[e.key],Qt(e,t)}async function dt(e){return R.r.has(e.key)&&7!==e.type?(4===e.type&&R.r.has(e.rev)?(R.r.get(e.rev).abort(),j(3,`Request aborted: ${e.rev}`)):j(3,`Request in transit: ${e.key}`),0):Ae("fetch",e)?(R.c.set(e.key,st(e.key)),ft(e)):(j(3,`Request cancelled via dispatched event: ${e.key}`),0)}function pt(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,x):e.removeAttribute(n))}function ht(e,t){let{value:n}=t;e.value!==n&&(e.value=n);let{firstChild:r}=e;if(r){let{nodeValue:t}=r;if(t===n||!n&&t===e.placeholder)return;r.nodeValue=n}}function mt(e,t){if(e===t)return 1;let n=e.charCodeAt(0),r=t.charCodeAt(0);return n<=90&&r>=97?e===t.toUpperCase():r<=90&&n>=97?t===e.toUpperCase():0}function gt(e){return e&&"getAttribute"in e?e.getAttribute("id"):void 0}function yt(e,t,n,r=1){et(e),t&&t.removeChild(e),bt(e,r,n)}function vt(e,t,n){let r=gt(t);if(r&&n.i.delete(r),e.isEqualNode(t))return;let o=e.getAttribute(W.qs.m);"false"!==o&&("children"!==o&&function(e,t){if(11===t.nodeType||11===e.nodeType)return;let n,r,o,i,s,a=t.attributes,l=e.getAttribute(W.qs.e),c=t.getAttribute(W.qs.e),u=0;for(let t=a.length-1;t>=0;t--)n=a[t],r=n.name,i=n.value,o=n.namespaceURI,o?(r=n.localName||r,s=e.getAttributeNS(o,r),s!==i&&("xmlns"===n.prefix&&(r=n.name),e.setAttributeNS(o,r,i))):(s=e.getAttribute(r),s!==i&&(e.setAttribute(r,i),!l&&!c&&!u&&(u=Xe(r))));let f=e.attributes;for(let s=f.length-1;s>=0;s--)n=f[s],r=n.name,i=n.value,o=n.namespaceURI,o?(r=n.localName||r,t.hasAttributeNS(o,r)||e.removeAttributeNS(o,r)):t.hasAttribute(r)||e.removeAttribute(r);(l||c||u)&&function(e,t,n,r){n&&(n=n.split(",")),r&&(r=r.split(",")),n&&r?(Qe(e,n),Je(e,r)):!n&&r?Je(e,r):(Pe?Pe.m=e:Pe=Ye(e),n&&!r&&Qe(e,n,t),Xe(t.attributes)&&Ue(e,Pe))}(e,t,l,c)}(e,t),"TEXTAREA"!==e.nodeName?function(e,t,n){let r,o,i,s,a,l,c=t.firstChild,u=e.firstChild;e:for(;c;){for(r=gt(c),o=c.nextSibling;u;){if(a=u.nextSibling,c.isEqualNode(u)){c=o,u=a;continue e}let t;if(i=gt(u),s=u.nodeType,s===c.nodeType&&(1===s?(r?r!==i&&((l=n.i.get(r))?a.isEqualNode(l)?t=0:(e.insertBefore(l,u),i?n.a.add(i):yt(u,e,n),u=l,i=gt(u)):t=0):i&&(t=0),t=0!=t&&mt(u.nodeName,c.nodeName),t&&vt(u,c,n)):(3===s||8===s)&&(t=1,u.nodeValue!==c.nodeValue&&(u.nodeValue=c.nodeValue))),t){c=o,u=a;continue e}i?n.a.add(i):yt(u,e,n),u=a}r&&(l=n.i.get(r))&&mt(l.nodeName,c.nodeName)?(e.appendChild(l),vt(l,c,n)):(c.actualize&&(c=c.actualize(e.ownerDocument||document)),e.appendChild(c),$t(c,n)),c=o,u=a}(function(e,t,n,r){for(;t;){let o=t.nextSibling;(n=gt(t))?r.a.add(n):yt(t,e,r),t=o}})(e,u,i,n),function(e,t){switch(e.nodeName){case"INPUT":!function(e,t){pt(e,t,"checked"),pt(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")}(e,t);break;case"OPTION":!function(e,t){let n=e.parentNode;if(n){let r=n.nodeName.toUpperCase();"OPTGROUP"===r&&(n=n.parentNode,r=n&&n.nodeName.toUpperCase()),"SELECT"===r&&!n.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}pt(e,t,"selected")}(e,t);break;case"SELECT":!function(e,t){if(!t.hasAttribute("multiple")){let t,n,r=0,o=-1,i=e.firstElementChild;for(;i;)if(n=i.nodeName&&i.nodeName.toUpperCase(),"OPTGROUP"===n)t=i,i=t.firstElementChild;else{if("OPTION"===n){if(i.hasAttribute("selected")){o=r;break}r++}i=i.nextElementSibling,!i&&t&&(i=t.nextElementSibling,t=null)}e.selectedIndex=o}}(e,t);break;case"TEXTAREA":ht(e,t)}}(e,t)}(e,t,n):ht(e,t))}function bt(e,t,n){if(1!==e.nodeType)return;let r=e.firstChild;for(;r;){let e;t&&(e=gt(r))?n.a.add(e):(et(r),r.firstChild&&bt(r,t,n)),r=r.nextSibling}}function $t(e,t){(1===e.nodeType||11===e.nodeType)&&function(e){e.hasAttribute(W.qs.e)?Je(e,e.getAttribute(W.qs.e).split(",")):Xe(e.attributes)&&(Pe?Pe.m=e:Pe=Ye(e),Ue(e,Pe))}(e);let n=e.firstChild;for(;n;){let e=n.nextSibling,r=gt(n);if(r){let e=t.i.get(r);e&&mt(n.nodeName,e.nodeName)?(n.parentNode.replaceChild(e,n),vt(e,n,t)):$t(n,t)}else $t(n,t);n=e}}function wt(e,t){if(1===e.nodeType||11===e.nodeType){let n=e.firstChild;for(;n;){let e=gt(n);e&&t.i.set(e,n),wt(n,t),n=n.nextSibling}}}function kt(e,t){let n=t.cloneNode(1),r=S({a:L(),i:P()});11===n.nodeType&&(n=n.firstElementChild),wt(e,r);let o=e,i=o.nodeType,s=n.nodeType;if(1===i)1===s?mt(e.nodeName,n.nodeName)||(et(e),o=function(e,t){let n,r=e.firstChild;for(;r;)n=r.nextSibling,t.appendChild(r),r=n;return t}(e,function(e,t){return t&&"http://www.w3.org/1999/xhtml"!==t?document.createElementNS(t,e):document.createElement(e)}(n.nodeName,n.namespaceURI))):o=n;else if(3===i||8===i){if(s===i)return o.nodeValue!==n.nodeValue&&(o.nodeValue=n.nodeValue),o;o=n}if(o.isEqualNode(n))et(e);else{if(n.isEqualNode(o))return o;if(vt(o,n,r),r.a.size>0)for(let e of r.a)if(r.i.has(e)){let t=r.i.get(e);yt(t,t.parentNode,r,0)}}return o!==e&&e.parentNode&&(o.actualize&&(o=o.actualize(e.ownerDocument||document)),e.parentNode.replaceChild(o,e)),r.i.clear(),r.a.clear(),o}function At(e,t){if(!(e instanceof Element))return 0;let n=e.closest(t);return n&&"A"===n.tagName?n:0}function xt(e){if("A"!==e.nodeName)return 0;let t=e.getAttribute("href");return t&&pn(t)?0==on(hn(t)):0}var Et,Ct=e=>{let t=[];return pe(e,(e=>{xt(e)&&t.push(e)})),t};function Nt(e){let t=At(e.target,W.qs.g);if(!t)return;let n=yn(t,10);if(on(n.key)||n.key in R.s)return;t.addEventListener(`${h}leave`,Tt,{once:1});let r=Gt(n),o=r.threshold||W.config.hover.threshold;lt(n.key,(function(){Ae("prefetch",t,n)&&dt(r).then((function(){delete R.s[n.key],Ot(t)}))}),o)}function Tt(e){let t=At(e.target,W.qs.g);t&&at(hn(t.href))}function qt(e){e.addEventListener(`${h}enter`,Nt)}function Ot(e){e.removeEventListener(`${h}enter`,Nt),e.removeEventListener(`${h}leave`,Tt)}function St(){!W.config.hover||W.observe.hover||(he(qt,Ct(W.qs.g)),W.observe.hover=1)}function Lt(){W.observe.hover&&(he(Ot,Ct(W.qs.g)),W.observe.hover=0)}async function Pt(e){if(e.isIntersecting){let t=yn(e.target,11);if(!Ae("prefetch",e.target,t))return Et.unobserve(e.target);await dt(Gt(t))?Et.unobserve(e.target):(j(3,`Prefetch will retry at next intersect for: ${t.key}`),Et.observe(e.target))}}function Rt(){if(!W.config.intersect||W.observe.intersect)return;Et||(Et=new IntersectionObserver(he(Pt),W.config.intersect));let e=he((e=>Et.observe(e))),t=function(e,t){let n=[];return pe(e,(e=>{if("A"!==e.nodeName)pe(e.querySelectorAll(t),(e=>{xt(e)&&n.push(e)}));else if(e.hasAttribute("href")){let{href:t}=e;pn(t)&&on(hn(t))&&n.push(e)}})),n}(W.qs.S,W.qs.H);e(t),W.observe.intersect=1}function It(){W.observe.intersect&&(Et.disconnect(),W.observe.intersect=0)}var Wt,jt=new MutationObserver((function([e]){if("childList"!==e.type)return;let t=e.addedNodes.length;if(t||e.removedNodes.length>0){let n=t?e.addedNodes[0]:e.removedNodes[0];if(1!==n.nodeType)return;W.eval&&F.test(n.nodeName)?"HEAD"===n.parentNode.nodeName?function(e,t){let{page:n,dom:r}=function(e){if(!e){if(null===zt.state)return void j(3,"Missing history state reference, page cannot be returned");e=zt.state.key}if(e in W.pages)return $(S(),{page:{get:()=>W.pages[e]},dom:{get:()=>$e(W.snaps[W.pages[e].snap])}});j(5,`No record exists: ${e}`)}(W.page.key),o=114===e.charCodeAt(0)?"removed":"appended";r.head.contains(t)?(r.head[e](t),W.snaps[n.snap]=r.documentElement.outerHTML,j(1,`Snapshot record was updated. Node ${o} from <head>`,t)):j(3,"Node does not exists in snapshot record, no mutation applied",t)}(t?"appendChild":"removeChild",n):function(e){let t=q().querySelectorAll(`${W.page.target.join(",")},[${W.qs.y}]`);for(let n=0,r=t.length;n<r;n++)if(t[n].contains(e))return 0;return 1}(n)&&!W.resources.has(n)?W.resources.add(n):W.resources.delete(n):n instanceof HTMLElement&&t&&!n.hasAttribute(W.qs.e)&&Ge(n)}}));function Mt(){W.observe.mutations&&(jt.observe(document.head,{childList:1}),jt.observe(q(),{childList:1,subtree:1}),W.observe.mutations=1)}function Ht(){if(W.observe.mutations){jt.takeRecords(),jt.disconnect();for(let e of W.resources)q().removeChild(e),W.resources.delete(e);W.observe.mutations=0}}function Dt(e){let t=e.getBoundingClientRect(),n=e.getAttribute(W.qs.A),r=X.test(n)?Number(n):W.config.proximity.distance;return{target:e,top:t.top-r,bottom:t.bottom+r,left:t.left-r,right:t.right+r}}function Xt(){if(!W.config.proximity||W.observe.proximity)return;let e=Ct(W.qs.A).map(Dt);e.length>0&&(Wt=function(e){let t=0;return n=>{if(t)return;t=1;let r=e.findIndex((e=>function({clientX:e,clientY:t},n){return e<=n.right&&e>=n.left&&t<=n.bottom&&t>=n.top}(n,e)));if(-1===r)setTimeout((()=>{t=0}),W.config.proximity.throttle);else{let{target:n}=e[r],o=Gt(yn(n,12)),i=o.threshold||W.config.proximity.threshold;lt(o.key,(async()=>{if(!Ae("prefetch",n,o))return Ut();await dt(o)&&(e.splice(r,1),t=0,0===e.length&&(Ut(),j(2,"Proximity observer disconnected")))}),i)}}}(e),addEventListener(`${h}move`,Wt,{passive:1}),W.observe.proximity=1)}function Ut(){W.observe.proximity&&(removeEventListener(`${h}move`,Wt),W.observe.proximity=0)}function Yt(e,t){let n=q();if("body"===e.selector)kt(n,t.body),Pe&&Pe.o.length>0&&Q((()=>{We(t.body,Pe.o),Jt("type",6)}));else if(null!==e.selector){let r=n.querySelectorAll(e.selector),o=t.body.querySelectorAll(e.selector),i=L();for(let e=0,t=r.length;e<t;e++){let t=r[e],n=o[e];!n||!t||Ae("render",t,n)&&(t.isEqualNode(n)||i.add(kt(t,n)))}6!==e.type&&Pe&&Pe.o.length>0&&Q((()=>{Ie(t.body,n,Pe.o,i),Jt("type",6),i.clear()}))}else for(let n of e.fragments){let e=W.fragments.get(n),r=t.getElementById(n);!r||!e||Ae("render",e,r)&&(e.isEqualNode(r)||(kt(e,r),Pe&&Pe.o.length>0&&Q((()=>{We(r,Pe.o),Jt("type",6)}))))}}function Ft(e){Lt(),It(),Ut(),Ht(),it(),He(),W.eval||(document.title=e.title);let t=nn(e.snap);return 7===e.type?function(e,t){let n=e.hydrate;if(1===n.length&&"body"===n[0])return void kt(q(),t.body);let r=n.join(","),o=q().querySelectorAll(r),i=e.preserve&&e.preserve.length>0?e.preserve.join(","):null,s=[];if(i){let e=q().querySelectorAll(i);for(let t=0,n=e.length;t<n;t++){let n=e[t];n.setAttribute(W.qs.m,"false"),s.push(n)}}if(o.length>0){let e=t.body.querySelectorAll(r);for(let t=0,n=o.length;t<n;t++){let n=o[t],r=e[t];if(e[t]instanceof HTMLElement){if(!Ae("hydrate",n,r))continue;kt(r,r)}}}if(i)for(let e of s)e.removeAttribute("spx-morph");e.hydrate=void 0,e.preserve=void 0,e.type=6,Ft(e)}(e,t):(async function(e,t){if(!W.eval||!e||!t)return;let n=[],r=L(),{children:o}=e;for(let e=0,n=t.length;e<n;e++)r.add(t[e].outerHTML);for(let t=0,i=o.length;t<i;t++){let i=o[t],{nodeName:s,outerHTML:a}=i,l=1;l="SCRIPT"===s?i.matches(W.qs.C):"STYLE"===s?i.matches(W.qs.M):"META"===s?i.matches(W.qs.w):"LINK"===s?i.matches(W.qs.q):"false"!==e.getAttribute(W.qs.L),r.has(a)?l?n.push(i):r.delete(a):n.push(i)}let i=[],s=document.createRange();for(let t of r){let n=s.createContextualFragment(t).firstChild;if(ne(n,"href")||ne(n,"src")){let e=new Promise((function(e){n.addEventListener("error",(()=>{j(3,`Resource <${n.nodeName.toLowerCase()}> failed:`,n),e()})),n.addEventListener("load",(()=>e()))}));i.push(e)}e.appendChild(n),r.delete(t)}for(let t=0,r=n.length;t<r;t++)e.removeChild(n[t]);await Promise.all(i)}(O(),t.head.children),Yt(e,t),scrollTo(e.scrollX,e.scrollY)),ge.done(),Q((()=>{St(),Rt(),Xt(),ot(),Mt()})),Ae("load",e),e}var zt=window.history;function Vt(e){if(null==zt.state||"object"!=typeof zt.state)return 0;let t=te(zt.state)(["key","rev","scrollX","scrollY","title"]);return"string"==typeof e?t&&zt.state.key===e:t}async function Bt(){await Promise.resolve(),W.loaded=1}function Kt({key:e,rev:t,title:n,scrollX:r,scrollY:o}){let i={key:e,rev:t,scrollX:r,scrollY:o,title:n||document.title};return zt.replaceState(i,i.title,i.key),j(1,`History replaceState: ${zt.state.key}`),zt.state}function Zt({key:e,rev:t,title:n}){let r={key:e,rev:t,title:n,scrollY:0,scrollX:0};return zt.pushState(r,r.title,r.key),j(1,`History pushState: ${zt.state.key}`),zt.state}async function _t(e){if((W.loaded||W.ready)&&null!==e.state)if(on(e.state.key)){!on(e.state.rev)&&e.state.rev!==e.state.key&&ut(e.state.rev);let t=W.pages[e.state.key];4===t.type?j(1,`History popState reverse (snapshot): ${t.key}`):j(1,`History popState session (snapshot): ${t.key}`),Jt("type",5),Ft(t)}else{j(1,`History popState fetch: ${e.state.key}`),tt(),e.state.type=5;let t=await dt(e.state);if(!t)return location.assign(e.state.key);let n=hn(location);if(t.key===n)Ft(t);else if(on(n))Ft(W.pages[n]);else{tt();let e=Gt(yn(n,5));await dt(e),Zt(e)}}}function Gt(e){let t=te(e);return e.ts=ee(),e.target=oe(e),t("selector")||("body"===e.target[0]?e.selector="body":e.selector=ie(e.target)),W.config.cache&&(t("cache")||(e.cache=W.config.cache),t("snap")||(e.snap=ae())),t("scrollY")||(e.scrollY=0),t("scrollX")||(e.scrollX=0),0!=W.config.hover&&10===e.type&&(t("threshold")||(e.threshold=W.config.hover.threshold)),0!=W.config.proximity&&12===e.type&&(t("proximity")||(e.proximity=W.config.proximity.distance),t("threshold")||(e.threshold=W.config.proximity.threshold)),W.config.progress&&!t("progress")&&(e.progress=W.config.progress.threshold),t("fragments")||(e.fragments=W.config.fragments),t("history")||(e.history=1),t("visits")||(e.visits=0),t("components")||(e.components=[]),W.pages[e.key]=e,W.pages[e.key]}function Jt(e,t,n=zt.state.key){return"location"===e?W.pages[n][e]=g(W.pages[n][e],t):"target"===e?(W.pages[n].target=oe(t),W.pages[n].selector=ie(W.pages[n].target)):"components"===e?W.pages[n].components=t:W.pages[n][e]=t,W.pages[n]}function Qt(e,t){let n=Ae("before:cache",e,t),r="string"==typeof n?n:t;return e.type>5&&e.type>9&&(e.type=1),e.title=ke(t),W.config.cache&&0!=n?"snap"in e?(W.pages[e.key]=e,W.snaps[e.snap]=r,function(e){6!==e.type&&Q((()=>{let t=nn(e.snap),n="body"!==e.selector&&null!==e.selector?`${e.target.join()},${W.qs.T}`:W.qs.T,r=t.body.querySelectorAll(n),o=0===e.type?q().querySelectorAll(n):null;pe(r,((t,n)=>{if(t.hasAttribute("id")){if(t.id.startsWith("t."))return}else t.setAttribute("id",`t.${ae()}`),null!==o&&o[n].setAttribute("id",`t.${ae()}`);e.fragments.push(t.id)})),tn(t.documentElement.outerHTML,e.snap)}))}(e),Ae("after:cache",e),rt("oncache",e),e):en(e,r):e}function en(e,t){let n=e.key in W.pages?W.pages[e.key]:Gt(e);return"string"==typeof t&&(W.snaps[n.snap]=t,e.title=ke(t)),g(n,e)}function tn(e,t){let n=t=t?47===t.charCodeAt(0)?t in W.pages?W.pages[t].snap:null:t:W.page.snap;n?W.snaps[n]=e:j(3,"Snapshot record does not exist, update failed")}function nn(e){let t=e=e?47===e.charCodeAt(0)?W.pages[e].snap:e:W.page.snap;return $e(W.snaps[t])}function rn({mounted:e=null}={}){let t=S();for(let n of W.components.f.values()){let{scope:r}=n;W.components.l.has(r.key)&&(null!==e&&r.mounted===e||(null===r.alias||r.alias in t?r.instanceOf in t?t[r.instanceOf].push(n):t[r.instanceOf]=[n]:t[r.alias]=[n]))}return se(t)?null:t}function on(e){return ne(W.pages,e)&&ne(W.pages[e],"snap")&&ne(W.snaps,W.pages[e].snap)&&"string"==typeof W.snaps[W.pages[e].snap]}function sn(e){e?"string"==typeof e?(delete W.snaps[W.pages[e].snap],delete W.pages[e]):k(e)&&he((e=>{delete W.snaps[W.pages[e].snap],delete W.pages[e]}),e):(me(W.pages),me(W.snaps))}var an=m.replace(/(?:https?:)?(?:\/\/(?:www\.)?|(?:www\.))/,x);function ln(e,t){let n=t?function(e){let t=g(S(e),{target:[],selector:null,cache:W.config.cache,history:1,scrollX:0,scrollY:0,fragments:W.config.fragments});return W.config.hover&&(t.threshold=W.config.hover.threshold),W.config.proximity&&(t.proximity=W.config.proximity.distance,t.threshold=W.config.proximity.threshold),W.config.progress&&(t.progress=W.config.progress.threshold),t}(t):S(),r=e.getAttributeNames();for(let o=0,i=r.length;o<i;o++){let i=r[o];if(i.startsWith(W.qs.x)){ne(n,"data")||(n.data=S());let t=de(i.slice(W.qs.x.length)),r=e.getAttribute(i).trim();U.test(r)?n.data[t]="NaN"===r?NaN:+r:D.test(r)?n.data[t]="true"===r:123===r.charCodeAt(0)||91===r.charCodeAt(0)?n.data[t]=K(i,r):n.data[t]=r}else{if(!W.qs.P.test(i))continue;let r=e.getAttribute(i).trim();if("href"===i)n.rev=un(location.pathname)+location.search,t||(n.location=gn(r),n.key=un(n.location.pathname)+n.location.search);else{let t=i.slice(i.lastIndexOf("-")+1),o=r.replace(H,x).trim();if("target"===t)n[t]="true"===o?[]:o!==x?B(o):[],n.selector=ie(n[t]);else if(z.test(o)){let e=o.match(/\[?[^,'"[\]()\s]+\]?/g);n[t]=M.test(t)?e.reduce(le(2),[]):e}else if("position"===t)if(V.test(o)){let e=o.match(V);n[`scroll${e[0].toUpperCase()}`]=+e[1],4===e.length&&(n[`scroll${e[2].toUpperCase()}`]=+e[3])}else j(3,`Invalid attribute value on <${i}>, expected: y:number or x:number`,e);else"scroll"===t?X.test(o)?n.scrollY=+o:j(3,`Invalid attribute value on <${i}>, expected: number`,e):D.test(o)&&!Y.test(i)?n[t]="true"===o:U.test(o)?n[t]=+o:("history"===t&&"push"!==o&&"replace"!==o&&j(5,`Invalid attribute value on <${i}>, expected: false, push or replace`,e),n[t]=o)}}}return n}function cn(e){let t=S();if(1===e.length&&47===e.charCodeAt(0))return t.pathname=e,t.hash=x,t.search=x,t;let n=e.indexOf("#");n>=0?(t.hash=e.slice(n),e=e.slice(0,n)):t.hash=x;let r=e.indexOf("?");return r>=0?(t.search=e.slice(r),e=e.slice(0,r)):t.search=x,t.pathname=e,t}function un(e){return 1===e.length?e:47===e.charCodeAt(e.length-1)?e.slice(0,-1):e}function fn(e,t){let n=e.indexOf("/",t);if(n>t){let t=e.indexOf("#",n);return t<0?un(e.slice(n)):e.slice(n,t)}let r=e.indexOf("?",t);if(r>t){let t=e.indexOf("#",r);return t<0?un(e.slice(r)):e.slice(r,t)}return e.length-t===an.length?"/":null}function dn(e){let t=e.startsWith("www.")?e.slice(4):e,n=t.indexOf("/");if(n>=0){let e=t.slice(n);if(t.slice(0,n)===an)return e.length>0?cn(e):cn("/")}else{let e=t.search(/[?#]/);if(e>=0){if(t.slice(0,e)===an)return cn("/"+t.slice(e))}else if(t===an)return cn("/")}return null}function pn(e){if("string"!=typeof e||0===e.length)return 0;if(47===e.charCodeAt(0))return 47!==e.charCodeAt(1)?1:e.startsWith("www.",2)?e.startsWith(an,6):e.startsWith(an,2);if(63===e.charCodeAt(0))return 1;if(e.startsWith("www."))return e.startsWith(an,4);if(e.startsWith("http")){let t=e.indexOf("/",4)+2;return e.startsWith("www.",t)?e.startsWith(an,t+4):e.startsWith(an,t)}}function hn(e){if("object"==typeof e)return un(e.pathname)+e.search;if(e===x||"/"===e)return"/";let t=function(e){return e.startsWith("http")?1:e.startsWith("//")?2:e.startsWith("www.")?3:1}(e);if(1===t){let t=115===e.charCodeAt(4)?8:7,n=e.startsWith("www.",t)?t+4:t;return e.startsWith(an,n)?fn(e,n):null}if(2===t){let t=e.startsWith("www.",2)?6:2;return e.startsWith(an,t)?fn(e,t):null}return 3===t?e.startsWith(an,4)?fn(e,4):null:e.startsWith(an,0)?fn(e,0):null}function mn(){let{pathname:e,search:t,hash:n}=location;return S({hostname:an,origin:m,pathname:e,search:t,hash:n})}function gn(e){if(e===x)return mn();let t=function(e){return 47===e.charCodeAt(0)?47!==e.charCodeAt(1)?cn(e):dn(e.slice(2)):63===e.charCodeAt(0)?cn(location.pathname+e):e.startsWith("https:")||e.startsWith("http:")?dn(e.slice(e.indexOf("/",4)+2)):e.startsWith("www.")?dn(e):null}(e);return null===t&&j(5,`Invalid pathname: ${e}`),t.origin=m,t.hostname=an,t}function yn(e,t=6){if(e instanceof Element){let n=ln(e);return n.type=t||6,n}let n=S();return 0===e?(n.location=mn(),n.key=n.rev=hn(n.location),n.type=e,n.visits=1,W.index=n.key):7===t?(n.location=gn(e),n.key=n.rev=hn(n.location),n.type=t):(n.rev=un(location.pathname)+location.search,n.location=gn("string"==typeof e?e:n.rev),n.key=hn(n.location),n.type=t),n}var vn=function(e){if(!function(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.button>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}(e))return;let t=At(e.target,W.qs.O);if(!t)return;let n=hn(t.href);if(null===n)return;let r=n===W.page.key,o=()=>{j(3,`Drag occurance deteced, cancelled visit: ${n}`),vn.drag=1,t.removeEventListener(`${h}move`,o)};if(t.addEventListener(`${h}move`,o,{once:1}),1==vn.drag)return vn.drag=0,vn(e);if(t.removeEventListener(`${h}move`,o),!Ae("visit",e))return;let i=(e,t=1)=>{W.pages[e.key].ts=ee(),W.pages[e.key].visits=e.visits+1,W.pages[e.rev].scrollX=window.scrollX,W.pages[e.rev].scrollY=window.scrollY,rt("onvisit",e),r?(j(1,`URL Pathname matches current route: ${n}`),Ft(e)):(Kt(W.pages[e.rev]),t?(Zt(e),Ft(e)):bn(e))};if(Lt(),Ut(),It(),on(n)){let e=en(ln(t,W.pages[n]));t.onclick=t=>{t.preventDefault(),i(e)}}else if(R.c.has(n)){ct(n),j(2,`Request in transit: ${n}`);let e=W.pages[n];t.onclick=t=>{t.preventDefault(),i(e,0)}}else{ct(),at(n);let e=Gt(yn(t,6));dt(e),t.onclick=t=>{t.preventDefault(),i(e,0)}}};async function bn(e){e.progress&&ge.start(e.progress);let t=await ft(e);t?(Zt(t),Ft(t)):location.assign(e.key)}async function $n(e,t){if(!t)return bn(W.pages[e]);{"string"==typeof t.cache&&("clear"===t.cache?sn():sn(t.key)),t.progress&&ge.start(t.progress);let e=await dt(t);e?(Zt(e),Ft(e)):location.assign(t.key)}}var wn=S({$:W,Component:Re,on:xe,off:Ee,observe:function(){Lt(),St(),It(),Rt(),Ut(),Xt(),it(),ot(),Ht(),Mt()},connect:function(e={}){if(0==p)return j(5,"Invalid runtime environment: window is undefined.");if(!wn.supported)return j(5,"Browser does not support SPX");if(!window.location.protocol.startsWith("http"))return j(5,"Invalid protocol, SPX expects HTTPS or HTTP protocol");(function(e=S()){(function(){if(W.patched)return;W.patched=1;let e=Element.prototype.setAttribute,t=document.createElement("i");Element.prototype.setAttribute=function(n,r){if(n.indexOf("@")<0)return e.call(this,n,r);t.innerHTML=`<i ${n}="${r}"></i>`;let o=t.firstElementChild.getAttributeNode(n);t.firstElementChild.removeAttributeNode(o),this.setAttributeNode(o)}})(),$(W,{ready:{get:()=>"complete"===document.readyState},types:{get:()=>S({INITIAL:0,PREFETCH:1,FETCH:2,PRELOAD:3,REVERSE:4,POPSTATE:5,VISIT:6,HYDRATE:7,CAPTURE:8,RELOAD:9,HOVER:10,INTERSECT:11,PROXIMITY:12})}}),"components"in e&&(ve(e.components),delete e.components),g(W.config,function(e){for(let t of["hover","intersect","proximity","progress"])ne(e,t)&&(0==e[t]?W.config[t]=0:"object"==typeof e[t]&&g(W.config[t],e[t]),delete e[t]);return e}(e));let t=W.config.schema,n="spx"===t?"spx":t.endsWith("-")?t:null===t?x:`${t}-`,r=`:not([${n}disable]):not([href^=\\#])`,o=`not([${n}eval=false])`,i=function(e,t,n){if("eval"in e)if(e.eval){if("object"==typeof e.eval){let t=g(W.config.eval,e.eval);W.eval=!!(t.link||t.meta||t.script||t.style)}}else W.eval=0;return e=>{if(0==W.eval||0==W.config.eval[e])return`${e}[${t}eval]:${n}`;if(1==W.config.eval[e])return`${e}:${n}`;let r="link"===e?`${e}[rel=stylesheet]:${n}`:"script"===e?`${e}:${n}:not([${t}eval=hydrate])`:`${e}:${n}`;return null===W.config.eval[e]?r:k(W.config.eval[e])?W.config.eval[e].length>0?W.config.eval[e].map((e=>`${e}:${n}`)).join(","):(j(3,`Missing eval ${e} value, SPX will use defaults`),r):void j(4,`Invalid eval ${e} value, expected boolean or array`)}}(e,n,o);W.config.fragments=function(e){let t=[];if(!("fragments"in e&&k(e.fragments)&&e.fragments.length>0))return["body"];for(let n of e.fragments){let e=n.charCodeAt(0);46!==e&&91!==e?35===e?t.push(n.slice(1).trim()):t.push(n.trim()):j(3,[`Invalid fragment selector "${n}" provided. Fragments must be id annotated values.`,"Use spx-target attributes for additional fragment selections."])}return t}(e),W.config.schema=n,W.config.index=null,W.memory.bytes=0,W.memory.visits=0,W.memory.limit=W.config.maxCache,g(W.qs,{P:new RegExp(`^href|${n}(hydrate|append|prepend|target|progress|threshold|scroll|position|proximity|hover|cache|history)$`,"i"),I:new RegExp(`${n}(?:node|bind|component)|@[a-z]|[a-z]:[a-z]`,"i"),R:new RegExp(`^${n}[a-zA-Z0-9-]+:`,"i"),y:`${n}target`,T:`[${n}target]:not([${n}target=false])`,m:`${n}morph`,L:`${n}eval`,S:`[${n}intersect]${be(n,"intersect")}`,k:`[${n}track]:not([${n}track=false])`,E:`${n}component`,b:`${n}node`,N:`${n}bind`,e:"data-spx",O:W.config.annotate?`a[${n}link]${r}`:`a${r}`,C:i("script"),M:i("style"),q:i("link"),w:i("meta"),D:`script[${n}eval=hydrate]:${o}`,W:`link[rel=stylesheet][href*=\\.css]:${o},script[src*=\\.js]:${o}`,x:`${n}data:`,A:`a[${n}proximity]${r}${be(n,"proximity")}`,H:`a${r}${be(n,"intersect")}`,g:0!=W.config.hover&&"href"===W.config.hover.trigger?`a${r}${be(n,"hover")}`:`a[${n}hover]${r}${be(n,"hover")}`}),ge.style(W.config.progress)})(e),W.config.globalThis&&0==ne(window,"spx")&&re(window,"spx",wn);let t=function(){let e=function(e){if(!W.observe.history)return zt.scrollRestoration&&(zt.scrollRestoration="manual"),addEventListener("popstate",_t,0),addEventListener("load",Bt,0),W.observe.history=1,"object"==typeof e&&0===e.type?function(e){return Vt(e.key)?(scrollTo(zt.state.scrollX,zt.state.scrollY),g(e,zt.state)):Kt(e),e}(e):e}(Gt(yn(0)));$(W,{prev:{get:()=>W.pages[zt.state.rev]},page:{get:()=>W.pages[zt.state.key]},snapDom:{get:()=>$e(W.snaps[W.page.snap])}});let t=()=>{let t=Qt(e,we());return W.observe.hrefs||(vn.drag=0,"mouseOnly"===d?addEventListener(`${h}down`,vn,0):("touchOnly"===d||addEventListener(`${h}down`,vn,0),addEventListener("touchstart",vn,0)),W.observe.hrefs=1),He(),0==W.config.manual&&(St(),Rt(),Xt(),ot(),Mt()),Q((()=>{Jt("type",6),ut(t),function(e){if(null!==W.config.preload){if(k(W.config.preload)){let e=W.config.preload.filter((e=>{let t=yn(e,3);return t.key!==e?dt(Gt(t)):0}));return Promise.allSettled(e)}if("object"==typeof W.config.preload&&ne(W.config.preload,e.key)){let t=W.config.preload[e.key].map((e=>dt(Gt(yn(e,3)))));Promise.allSettled(t)}}}(t)})),Ae("x"),t};return new Promise((e=>{let{readyState:n}=document;if("interactive"===n||"complete"===n)return e(t());addEventListener("DOMContentLoaded",(()=>e(t())))}))}();return async function(e){let n=await t;if("AsyncFunction"===e.constructor.name)try{await e(n)}catch(e){j(3,"Connection Error",e)}else e(n);j(2,"Connection Established")}},capture:function(e){let t=function(e){if(!e){if(null===zt.state)return void j(3,"Missing history state reference, page cannot be returned");e=zt.state.key}if(e in W.pages)return W.pages[e];j(5,`No page record exists for: ${e}`)}();if(!t)return;let n=nn();if(1===(e=k(e)?e:t.target).length&&"body"===e[0])return kt(n.body,q()),void en(t,we(n));let r=e.join(","),o=q().querySelectorAll(r);pe(n.body.querySelectorAll(r),((e,t)=>{kt(e,o[t])})),en(t,we(n))},form:async function(e,t){let n=new FormData;for(let e in t.data)n.append(e,t.data[e]);return await st(e,{method:t.method,body:n})},render:async function(e,t,n){let r=W.page,o=yn(e);o.location.origin!==m&&j(5,"Cross origin fetches are not allowed");let i=await st(o.key,{type:"document"});if(i||j(5,`Fetch failed for: ${o.key}`,i),await n.call(r,i),"replace"===t){r.title=i.title;let e=en(g(r,o),we(i));return Kt(e),e}return Ft(Qt(o,we(i)))},session:function(){return $(S(),{config:{get:()=>W.config},snaps:{get:()=>W.snaps},pages:{get:()=>W.pages},observers:{get:()=>W.observe},components:{get:()=>W.components},fragments:{get:()=>W.fragments},memory:{get(){let e=W.memory;return e.size=function(e){return e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":e<1073741824?(e/1048576).toFixed(1)+" MB":(e/1073741824).toFixed(1)+" GB"}(e.bytes),e}}})},reload:async function(){let e=W.pages[zt.state.key];e.type=9;let t=await dt(e);return t?(j(2,"Triggered reload, page was re-cached"),Ft(t)):(j(3,"Reload failed, triggering refresh (cache will purge)"),location.assign(e.key))},fetch:async function(e){let t=yn(e,2);t.location.origin!==m&&j(5,"Cross origin fetches are not allowed");let n=await st(t.key);if(n)return n},clear:sn,hydrate:async function(e,t){let n=yn(e,7);if(dt(n),k(t)){n.hydrate=[],n.preserve=[];for(let e of t)33===e.charCodeAt(0)?n.preserve.push(e.slice(1)):n.hydrate.push(e)}else n.hydrate=W.config.fragments;let r=await ft(n);if(r){let{key:e}=zt.state;if(Kt(r),Ft(r),n.key!==e){W.index===e&&(W.index=n.key);for(let t in W.pages)W.pages[t].rev===e&&(W.pages[t].rev=n.key);sn(e)}}return nn(r.key)},prefetch:async function(e){let t=yn(e,1);if(on(t.key))return void j(3,`Cache already exists for ${t.key}, prefetch skipped`);let n=await dt(Gt(t));if(n)return n;j(5,`Prefetch failed for ${t.key}`)},visit:async function(e,t){let n=yn(e),r="object"==typeof t?g(n,t):n;return on(n.key)?$n(n.key,en(r)):$n(n.key,Gt(r))},disconnect:function(){W.observe.history&&(zt.scrollRestoration&&(zt.scrollRestoration="auto"),removeEventListener("popstate",_t,0),removeEventListener("load",Bt,0),W.observe.history=0),W.observe.hrefs&&("mouseOnly"===d?removeEventListener(`${h}down`,vn,0):("touchOnly"===d||removeEventListener(`${h}down`,vn,0),removeEventListener("touchstart",vn,0)),W.observe.hrefs=0),Ht(),Lt(),It(),Ut(),W.config.components&&(it(),tt(),W.components.u.clear()),sn(),W.config.globalThis&&delete window.spx,j(2,"Disconnected")},register:function(...e){if("string"==typeof e[0])e.length>2&&j(5,[`Named component registration expects 2 parameters, recieved ${e.length}.`,'Registry should follow this structure: spx.register("identifer", YourComponent)'],e),ve({[Ce[0]]:e[1]});else for(let t of e)if(k(t))for(let e of t)"string"==typeof e[0]?ve({[e[0]]:e[1]}):"function"==typeof e&&ve({[ye(e)]:e},1);else{let e=typeof t;"function"===e?ve({[ye(t)]:t},1):"object"===e&&ve(t)}W.ready?ot():xe("x",(function e(){ot(),Ee("x",e)}))},get config(){return W.config},supported:!!(p&&window.history.pushState&&window.requestAnimationFrame&&window.DOMParser&&window.Proxy),history:S({get state(){return zt.state},api:zt,push:Zt,replace:Kt,has:Vt,reverse:function(){return null!==zt.state&&"rev"in zt.state&&zt.state.key!==zt.state.rev}})}),kn=wn;export{kn as default};