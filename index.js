var p=(e,t,r)=>new Promise((o,s)=>{var i=v=>{try{u(r.next(v))}catch(_){s(_)}},c=v=>{try{u(r.throw(v))}catch(_){s(_)}},u=v=>v.done?o(v.value):Promise.resolve(v.value).then(i,c);u((r=r.apply(e,t)).next())});import{supportsPointerEvents as Ot}from"detect-it";var L=Ot?"pointer":"mouse",E=window.history,U=window.location.origin;var w=Object.assign,d=Object.create,W=Array.isArray,ae=Array.from,S="";function N(e=d(null)){return e.x=window.scrollX,e.y=window.scrollY,e}function Fe(e){let t=document.createElement("textarea");return t.innerHTML=e,t.value}function f(e,t){if(e===1)console.info("SPX: "+t);else if(e===2)console.warn("SPX: "+t);else{console.error("SPX: "+t);try{throw e===3?new TypeError(t):new Error(t)}catch(r){}}}function l(e,t){return t in e}function Xe(){return Math.random().toString(36).slice(2)}function Ke(e=2){return(t,r)=>{let o=t.length;return(o<1||t[o-1].length===e?t.push([r]):t[o-1].push(r))&&t}}function ve(e){return e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":e<1073741824?(e/1048576).toFixed(1)+" MB":(e/1073741824).toFixed(1)+" GB"}function R(e,t){if(arguments.length===1)return o=>R(e,o);let r=t.length;if(r!==0)for(let o=0;o<r;o++)e(t[o],o,t)}function Ee(e){for(let t in e)delete e[t]}var Be=()=>({selectors:{},targets:["body"],timeout:3e4,schema:"spx",manual:!1,cache:!0,limit:100,preload:null,async:!0,annotate:!1,eval:{script:null,style:null,link:null,meta:!1},hover:{trigger:"attribute",threshold:250},intersect:{rootMargin:"0px 0px 0px 0px",threshold:0},proximity:{distance:75,threshold:250,throttle:500},progress:{background:"#111",height:"3px",minimum:.09,easing:"linear",speed:300,trickle:!0,threshold:500,trickleSpeed:300}});var n=Be(),m=d(null),T=d(null),a=d(null),I=d(null),be=new Set;function Mt(e){return l(e,"hover")&&(e.hover===!1?n.hover=!1:typeof e.hover=="object"&&w(n.hover,e.hover),delete e.hover),l(e,"intersect")&&(e.intersect===!1?n.intersect=!1:typeof e.intersect=="object"&&w(n.intersect,e.intersect),delete e.intersect),l(e,"proximity")&&(e.proximity===!1?n.proximity=!1:typeof e.proximity=="object"&&w(n.proximity,e.proximity),delete e.proximity),l(e,"progress")&&(e.progress===!1?n.progress=!1:typeof e.progress=="object"&&w(n.progress,e.progress),delete e.progress),e}function Pe(e={}){w(n,Mt(e)),l(e,"eval")&&w(n.eval,e.eval),n.index=null;let t=n.schema===null,r=t?"data":`data-${n.schema}`,o=`:not([${r}-disable]):not([href^="#"])`;n.selectors.hrefs=n.annotate?t?`a[data-spx]${o}`:`a[${r}]${o}`:`a${o}`,n.selectors.tracking=`[${r}-track]:not([${r}-track=false])`,n.selectors.scripts=s("script"),n.selectors.styles=s("style"),n.selectors.links=s("link"),n.selectors.metas=s("meta"),n.selectors.evals=`[${r}-eval]:not([${r}-eval=false]):not(script)`,n.selectors.attributes=new RegExp("^href|"+r+"-("+"hydrate|append|prepend|target|progress|threshold|position|proximity|hover"+")$","i"),n.selectors.proximity=`a[${r}-proximity]${o}${i("proximity")}`,n.selectors.intersector=`[${r}-intersect]${i("intersect")}`,n.selectors.intersects=`a${o}${i("intersect")}`,n.selectors.hover=n.hover.trigger==="href"?`a${o}${i("hover")}`:`a[${r}-hover]${o}${i("hover")}`,T.bytes=0,T.visits=0,T.limit=n.limit;function s(c){let u=`not([${r}-eval=false])`,v=c==="link"?`${c}[rel=stylesheet]:${u},${c}[rel~=preload]:${u}`:c==="script"?`${c}[${r}-eval]:${u}`:`${c}:${u}`;if(n.eval[c]===!1||n.eval[c]===null)return v;if(n.eval[c]===!0)return`${c}[${r}-eval]:${u}`;if(W(n.eval[c]))return n.eval[c].length>0?n.eval[c].map(_=>`${_}:${u}`).join(","):(f(2,`Missing eval ${c} option, SPX will use defaults`),v);f(3,`Invalid eval ${c} option, expected boolean or array`)}function i(c){let u=`:not([${r}-${c}=false])`;if(c.charCodeAt(0)===104)return`${u}:not([${r}-proximity]):not([${r}-intersect])`;if(c.charCodeAt(0)===105)return`${u}:not([${r}-hover]):not([${r}-proximity])`;if(c.charCodeAt(0)===112)return`${u}:not([${r}-intersect]):not([${r}-hover])`}}var Ve=/(?:https?:)?\/\/(?:www\.)?/;var Ye=/\b(?:append|prepend)/,ze=/^(?:application|text)\/(?:x-)?(?:ecma|java)script|text\/javascript$/,Ue=/^\b(?:true|false)$/i,Q=/^[+-]?\d*\.?\d+$/,Ge=/\s+/g;var Je=/\b(?:intersect|hover|proximity)\b/;var Ie=/\[?[^,'"[\]()\s]+\]?/g,_e=/\(?\[(['"]?.*['"]?,?)\]\)?/,Qe=/[xy]:[0-9.]+/,Ze=/[xy]|\d*\.?\d+/g;var P=U.replace(Ve,S);function qt(e){let t=d(null);return R((r,o,s)=>{let i=s.length-1>=o?o-1:o;o%2&&(t[s[i]]=Q.test(r)?Number(r):r)},e),t}function Te(e,t){let r=t||d(null);for(let{nodeName:o,nodeValue:s}of e.attributes)if(n.selectors.attributes.test(o))if(o==="href")r.rev=location.pathname+location.search,t||(r.location=Re(s),r.key=r.location.pathname+r.location.search);else{let i=o.slice(1+o.lastIndexOf("-")),c=s.replace(Ge,S);_e.test(c)?r[i]=Ye.test(i)?c.match(Ie).reduce(Ke(2),[]):c.match(Ie):Qe.test(c)?r[i]=qt(c.match(Ze)):Ue.test(c)?Je.test(o)||(r[i]=c==="true"):Q.test(c)?r[i]=Number(c):r[i]=c}return r}function G(e){let t=d(null);if(e.length===1&&e.charCodeAt(0)===47)return t.pathname=e,t.hash=S,t.search=S,t;let o=e.indexOf("#");o>=0?(t.hash=e.slice(o),e=e.slice(0,o)):t.hash=S;let s=e.indexOf("?");return s>=0?(t.search=e.slice(s),e=e.slice(0,s)):t.search=S,t.pathname=e,t}function fe(e,t){let r=e.indexOf("/",t);if(r>t){let s=e.indexOf("#",r);return s<0?e.slice(r):e.slice(r,s)}let o=e.indexOf("?",t);if(o>t){let s=e.indexOf("#",o);return s<0?e.slice(o):e.slice(o,s)}return e.length-t===P.length?"/":null}function we(e){let t=e.startsWith("www.")?e.slice(4):e,r=t.indexOf("/");if(r>=0){let o=t.slice(r);if(t.slice(0,r)===P)return o.length>0?G(o):G("/")}else{let o=t.search(/[?#]/);if(o>=0){if(t.slice(0,o)===P)return G("/"+t.slice(o))}else if(t===P)return G("/")}return null}function kt(e){return e.startsWith("http")?1:e.startsWith("//")?2:e.startsWith("www.")?3:0}function et(e){if(typeof e!="string"||e.length===0)return!1;if(e.charCodeAt(0)===47)return e.charCodeAt(1)!==47?!0:e.startsWith("www.",2)?e.startsWith(P,6):e.startsWith(P,2);if(e.charCodeAt(0)===63)return!0;if(e.startsWith("www."))return e.startsWith(P,4);if(e.startsWith("http")){let t=e.indexOf("/",4)+2;return e.startsWith("www.",t)?e.startsWith(P,t+4):e.startsWith(P,t)}}function Ht(e){return e.charCodeAt(0)===47?e.charCodeAt(1)!==47?G(e):we(e.slice(2)):e.charCodeAt(0)===63?G(location.pathname+e):e.startsWith("https:")||e.startsWith("http:")?we(e.slice(e.indexOf("/",4)+2)):e.startsWith("www.")?we(e):null}function A(e){if(typeof e=="object")return e.pathname+e.search;if(e===S)return"/";let t=kt(e);if(t===1){let r=e.charCodeAt(4)===115?8:7,o=e.startsWith("www.",r)?r+4:r;return e.startsWith(P,o)?fe(e,o):null}if(t===2){let r=e.startsWith("www.",2)?6:2;return e.startsWith(P,r)?fe(e,r):null}return t===3?e.startsWith(P,4)?fe(e,4):null:e.startsWith(P,0)?fe(e,0):null}function Ct(){return{hostname:P,origin:U,pathname:location.pathname,search:location.search,hash:location.hash}}function Re(e){if(e===S)return Ct();let t=Ht(e);return t.origin=U,t.hostname=P,t}function h(e,t=7){if(e instanceof Element){let o=Te(e);return o.type=t||7,o}let r=d(null);return t===8?(r.location=Re(e),r.key=A(r.location),r.rev=r.key,r.type=t):(r.rev=location.pathname+location.search,r.location=Re(typeof e=="string"?e:r.rev),r.key=A(r.location),r.type=t),r}function j(e){return new DOMParser().parseFromString(e,"text/html")}function Ae(e){let t=e.indexOf(">",e.indexOf("<title"))+1,r=e.indexOf("</title",t);return Fe(e.slice(t,r).trim())}import{deviceType as xe}from"detect-it";var F=d(null);function x(e,...t){let r=e==="store";r&&t.splice(-1,1,j(t[t.length-1]));let o=!0;return R(s=>{let i=s.apply(null,t);r?i instanceof Document?o=i.documentElement.outerHTML:typeof o!="string"&&(o=i!==!1):o=i!==!1},F[e]||[]),o}function tt(e,t,r){l(F,e)||(F[e]=[]),F[e].push(r?t.bind(r):t)}function rt(e,t){let r=F[e],o=[];if(r&&t){let s=0,i=r.length;for(;s<i;s++)r[s]!==t&&o.push(r[s])}return o.length?F[e]=o:delete F[e],this}function k(e){e?typeof e=="string"?(delete I[a[e].uuid],delete a[e]):W(e)&&R(t=>{delete I[a[t].uuid],delete a[t]},e):(Ee(a),Ee(I))}function g(e){return e.target=l(e,"target")?e.target.length===1&&e.target[0]==="body"?e.target:[].concat(n.targets,e.target):n.targets,n.cache&&(l(e,"cache")||(e.cache=n.cache),l(e,"uuid")||(e.uuid=Xe())),l(e,"position")||(e.position=d(null),e.position.y=0,e.position.x=0),n.hover!==!1&&e.type===11&&(l(e,"threshold")||(e.threshold=n.hover.threshold)),n.proximity!==!1&&e.type===13&&(l(e,"proximity")||(e.proximity=n.proximity.distance),l(e,"threshold")||(e.threshold=n.proximity.threshold)),n.progress!==!1&&!l(e,"progress")&&(e.progress=n.progress.threshold),l(e,"visits")||(e.visits=0),a[e.key]=e,a[e.key]}function ue(e,t){let r=x("store",e,t),o=typeof r=="string"?r:t;return e.type>6&&(e.type>10?e.type=2:l(a,e.rev)&&(a[e.rev].position.x=window.scrollX,a[e.rev].position.y=window.scrollY)),e.title=Ae(o),!n.cache||r===!1?e:l(e,"uuid")?(a[e.key]=e,I[e.uuid]=o,x("cached",e),e):M(e,o)}function M(e,t){let r=l(a,e.key)?a[e.key]:g(e);return typeof t=="string"&&(I[r.uuid]=t,e.title=Ae(t),e.position=N()),w(r,e)}function le(e=E.state.key){if(l(a,e)){let t=d(null);return t.page=a[e],t.dom=j(I[t.page.uuid]),t}f(4,`No record exists: ${e}`)}function b(e){return l(a,e)&&l(a[e],"uuid")&&l(I,a[e].uuid)&&typeof I[a[e].uuid]=="string"}function Z(e,t){if(!(e instanceof Element))return!1;let r=e.closest(t);return r&&r.tagName==="A"?r:!1}function $e(e){if(e.nodeName!=="A")return!1;let t=e.href;return et(t)?!b(A(t)):!1}function ot(e,t){let r=[];return document.body.querySelectorAll(e).forEach(o=>{o.nodeName!=="A"?o.querySelectorAll(t).forEach(s=>{$e(o)&&r.push(s)}):$e(o)&&r.push(o)}),r}var ee=e=>{let t=[];return document.body.querySelectorAll(e).forEach(r=>{$e(r)&&t.push(r)}),t};var te=new Map,X=new Map,Le=class extends XMLHttpRequest{constructor(){super(...arguments);this.key=null}},K=new Map;function Ne(e){return new Promise(function(t,r){let o=new Le;o.key=e,o.responseType="text",o.open("GET",e),o.setRequestHeader("X-SPX","true"),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.onload=function(){t(this.response)},o.onerror=function(){r(this.statusText)},o.onabort=function(){K.delete(this.key)},o.onloadend=function(s){T.bytes=T.bytes+s.loaded,T.visits=T.visits+1,K.delete(this.key)},o.send(),K.set(e,o)})}function me(e,t,r){X.has(e)||b(e)||X.set(e,setTimeout(t,r))}function pe(e){return X.has(e)?(clearTimeout(X.get(e)),X.delete(e)):!0}function Oe(e){return K.forEach((t,r)=>{e!==r&&(t.abort(),f(2,`Pending request aborted: ${r}`))})}function nt(e){if(n.preload!==null){if(W(n.preload)){let t=n.preload.filter(r=>{let o=h(r,4);return o.key!==r?y(g(o)):!1});return Promise.allSettled(t)}else if(typeof n.preload=="object"&&l(n.preload,e.key)){let t=n.preload[e.key].map(r=>y(g(h(r,4))));return Promise.allSettled(t)}}}function de(e){return p(this,null,function*(){if(b(e)){a[e].position=N();return}let t=h(e,5),r=g(t);setTimeout(()=>y(r))})}function re(e){return p(this,null,function*(){if(!te.has(e.key))return e;let t=yield te.get(e.key);return ue(e,t)})}function y(e){return p(this,null,function*(){return K.has(e.key)&&e.type!==8?(e.type===5&&K.has(e.rev)?(K.get(e.rev).abort(),f(2,`Request aborted: ${e.rev}`)):f(2,`Request in transit: ${e.key}`),!1):x("fetch",e)?(te.set(e.key,Ne(e.key)),re(e)):(f(2,`Request cancelled via dispatched event: ${e.key}`),!1)})}function st(e){let t=Z(e.target,n.selectors.hover);if(!t)return;let r=h(t,11);if(X.has(r.key)||b(r.key))return;t.addEventListener(`${L}leave`,it,{once:!0});let o=g(r),s=o.threshold||n.hover.threshold;me(r.key,function(){return p(this,null,function*(){if(!x("prefetch",t,r))return;(yield y(o))&&ct(t)})},s)}function it(e){let t=Z(e.target,n.selectors.hover);t&&pe(A(t.href))}function Wt(e){e.addEventListener(`${L}enter`,st)}function ct(e){e.removeEventListener(`${L}enter`,st),e.removeEventListener(`${L}leave`,it)}function oe(){!n.hover||m.hover||(R(Wt,ee(n.selectors.hover)),m.hover=!0)}function B(){m.hover&&(R(ct,ee(n.selectors.hover)),m.hover=!1)}import{supportsPointerEvents as at}from"detect-it";function jt({clientX:e,clientY:t},r){return e<=r.right&&e>=r.left&&t<=r.bottom&&t>=r.top}function Dt(e){let t=e.getBoundingClientRect(),r=e.getAttribute(n.selectors.proximity),o=Q.test(r)?Number(r):n.proximity.distance;return{target:e,top:t.top-o,bottom:t.bottom+o,left:t.left-o,right:t.right+o}}function Ft(e){let t=!1;return function(r){if(t)return;t=!0;let o=e.findIndex(s=>jt(r,s));if(o===-1)setTimeout(()=>{t=!1},n.proximity.throttle);else{let{target:s}=e[o],i=g(h(s,13)),c=i.threshold||n.proximity.threshold;me(i.key,()=>p(this,null,function*(){if(!x("prefetch",s,i))return C();(yield y(i))&&(e.splice(o,1),t=!1,e.length===0&&(C(),f(1,"Proximity observer disconnected")))}),c)}}}var ne;function se(){if(!n.proximity||m.proximity)return;let e=ee(n.selectors.proximity).map(Dt);e.length>0&&(ne=Ft(e),at?addEventListener("pointermove",ne,{passive:!0}):addEventListener("mousemove",ne,{passive:!0}),m.proximity=!0)}function C(){m.proximity&&(at?removeEventListener("pointermove",ne):removeEventListener("mousemove",ne),m.proximity=!1)}var V;function Xt(e){return p(this,null,function*(){if(e.isIntersecting){let t=h(e.target,12);if(!x("prefetch",e.target,t))return V.unobserve(e.target);(yield y(g(t)))?V.unobserve(e.target):(f(2,`Prefetch will retry at next intersect for: ${t.key}`),V.observe(e.target))}})}function ie(){if(!n.intersect||m.intersect)return;V||(V=new IntersectionObserver(R(Xt),n.intersect));let e=R(r=>V.observe(r)),t=ot(n.selectors.intersector,n.selectors.intersects);e(t),m.intersect=!0}function Y(){m.intersect&&(V.disconnect(),m.intersect=!1)}var z=null,ft,ce=null,ke=[];function He(e){let{speed:t,easing:r,minimum:o}=n.progress,s=typeof z=="number";e=lt(e,o,1),z=e===1?null:e;let i=Kt(!s);i.offsetWidth,Vt(c=>{if(i.style.transform=`translate3d(${mt(e)}%,0,0)`,i.style.transition=`all ${t}ms ${r}`,e!==1)return setTimeout(c,t);i.style.transition="none",i.style.opacity="1",i.offsetWidth,setTimeout(()=>{i.style.transition=`all ${t}ms ${r}`,i.style.opacity="0",setTimeout(()=>[Bt(),c()],t)},t)})}function ut(e){let t=z;if(!t)return he();if(t<1)return typeof e!="number"&&(t>=0&&t<.2?e=.1:t>=.2&&t<.5?e=.04:t>=.5&&t<.8?e=.02:t>=.8&&t<.99?e=.005:e=0),t=lt(t+e,0,.994),He(t)}function Kt(e){if(ce)return ce;document.documentElement.classList.add("spx-load");let t=e?"-100":mt(z||0),r=document.createElement("div");return r.id="spx-progress",r.style.pointerEvents="none",r.style.background=n.progress.background,r.style.height=n.progress.height,r.style.position="fixed",r.style.zIndex="9999999",r.style.top="0",r.style.left="0",r.style.width="100%",r.style.transition="all 0 linear",r.style.transform=`translate3d(${t}%,0,0)`,document.body.appendChild(r),ce=r,r}function Bt(){document.documentElement.classList.remove("spx-load"),document.getElementById("spx-progress")&&document.body.removeChild(ce),ce=null}function lt(e,t,r){return e<t?t:e>r?r:e}function mt(e){return(-1+e)*100}function Vt(e){let t=()=>{let r=ke.shift();r&&r(t)};ke.push(e),ke.length===1&&t()}function he(e){n.progress&&(ft=setTimeout(function(){z||He(0);let t=function(){setTimeout(()=>{z&&(ut(),t())},n.progress.trickleSpeed)};n.progress.trickle&&t()},e||0))}function pt(e){if(clearTimeout(ft),!(!e&&!z))return ut(.3+.5*Math.random()),He(1)}function Yt(e){return new Promise((t,r)=>{let o=document.createElement("script");o.addEventListener("error",r,{once:!0}),o.async=!1,o.text=e.target.text;for(let{nodeName:s,nodeValue:i}of e.target.attributes)o.setAttribute(s,i);document.contains(e.target)?e.target.replaceWith(o):(document.head.append(o),e.external?o.addEventListener("load",()=>o.remove(),{once:!0}):o.remove()),e.external&&o.addEventListener("load",()=>t(),{once:!0}),t()})}function zt(e){if(!e.hasAttribute("src")&&!e.text)return;let t=e.type?e.type.trim().toLowerCase():"text/javascript",r=ze.test(t)?1:t==="module"?2:NaN,o=d(null);return o.blocking=!0,o.evaluate=!1,o.external=!1,isNaN(r)||e.noModule&&r===1||(e.src&&(o.external=!0),(r!==1||o.external&&(e.hasAttribute("async")||e.defer))&&(o.blocking=!1),o.evaluate=!0,o.target=e),o}function ht(e){return p(this,null,function*(){try{let t=Yt(e);e.blocking&&(yield t)}catch(t){console.error(t)}})}function gt(e){return p(this,null,function*(){let r=ae(e,zt).filter(o=>o.evaluate).reduce((o,s)=>p(this,null,function*(){return s.external?Promise.all([o,ht(s)]):(yield o,yield ht(s))}),Promise.resolve());yield Promise.race([r])})}import yt from"morphdom";function Ut(e,t){return e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_PRECEDING||-1}function Gt(e){return p(this,null,function*(){let t=ae(e.querySelectorAll(n.selectors.scripts));yield gt(t.sort(Ut))})}function Jt(e){document.head.querySelectorAll(n.selectors.evals).forEach(t=>{e.head.contains(t)||t.remove()}),document.head.append(...e.querySelectorAll(n.selectors.evals))}function _t(e){for(let t of e.querySelectorAll(n.selectors.tracking))t.hasAttribute("id")?be.has(t.id)||(document.body.appendChild(t),be.add(t.id)):f(2,`Tracked node <${t.tagName.toLowerCase()}> must contain an id attribute`)}function Qt(e,t){let r=e.target;if(r.length===1&&r[0]==="body")return document.body.replaceWith(t.body);let o=r.join(","),s=t.body.querySelectorAll(o);document.body.querySelectorAll(o).forEach((i,c)=>{if(i.matches(r[c])&&x("render",i,s[c])&&(i.getAttribute("data-spx-render")==="morph"?yt(i,s[c],{onBeforeElUpdated:(u,v)=>!u.isEqualNode(v)}):i.replaceWith(s[c]),e.append||e.prepend)){let u=document.createElement("div");return t.childNodes.forEach(u.appendChild),e.append?i.appendChild(u):i.insertBefore(u,i.firstChild)}}),_t(t.body)}function Zt(e,t){let r=e.hydrate.join(","),o=document.body.querySelectorAll(r);if(o.length>0){let s=t.body.querySelectorAll(r);o.forEach((i,c)=>{s[c]&&x("hydrate",i,s[c])&&yt(i,s[c],{onBeforeElUpdated:(u,v)=>!u.isEqualNode(v)})})}e.type=7,M(e)}function $(e){document.title=e.title,B(),Y(),C();let t=j(I[e.uuid]);return e.type===8?Zt(e,t):(Jt(t),Qt(e,t),scrollTo(e.position.x,e.position.y)),Gt(t.head),pt(),oe(),ie(),se(),x("load",e),e}function vt(e){let t=d(null);return t.key=e.key,t.rev=e.rev,t.title=e.title,t.position=e.position,t}function er(){return document.readyState==="complete"}function Et(){return E.state!==null&&l(E.state,"rev")&&E.state.key!==E.state.rev}function ge(e){return E.replaceState(vt(e),e.title,e.key),e}function ye(e){return E.pushState(vt(e),e.title,e.key),e}var xt;function bt(e){if(er()&&e.state!==null){if(clearInterval(xt),b(e.state.key))return de(e.state.rev),$(a[e.state.key]);xt=setTimeout(function(){return p(this,null,function*(){e.state.type=6;let t=yield y(e.state);if(!t)return location.assign(e.state.key);let r=A(location);if(t.key===r)return $(t);if(b(r))return $(a[r]);{let o=g(h(r,6));yield y(o),E.pushState(o,document.title,r)}})},200)}}function Pt(){m.history||(addEventListener("popstate",bt,!1),m.history=!0)}function It(){m.history&&(removeEventListener("popstate",bt,!1),m.history=!1)}function tr(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}function D(e){if(!tr(e))return;let t=Z(e.target,n.selectors.hrefs);if(!t)return;let r=A(t.href);if(r===null||!x("visit",e))return;B(),C(),Y();let o=!1;if(t.addEventListener("dragstart",function s(){o=!0,f(2,`Drag occurance on link: ${r}`),t.removeEventListener("dragstart",s)},{once:!0}),b(r)){let s=Te(t,a[r]),i=M(s);t.addEventListener("click",function(u){u.preventDefault(),!o&&(a[i.rev].position=N(),ye(i),$(i))},{once:!0})}else if(te.has(r)){let s=a[r];Oe(r),t.addEventListener("click",function(c){c.preventDefault(),!o&&(a[s.rev].position=N(),je(s))},{once:!0})}else{Oe(),pe(r);let s=h(t,7),i=g(s);y(i),t.addEventListener("click",function(u){u.preventDefault(),!o&&(a[i.rev].position=N(),je(i))},{once:!0})}}function je(e){return p(this,null,function*(){he(e.progress);let t=yield re(e);if(t)ye(t),$(t);else return location.assign(e.key)})}function De(e,t){return p(this,null,function*(){if(t){typeof t.cache=="string"&&(t.cache==="clear"?k():k(t.key)),he(t.progress);let r=yield y(t);r?(ye(r),$(r)):location.assign(t.key)}else return je(a[e])})}function wt(){m.hrefs||(xe==="mouseOnly"?addEventListener(`${L}down`,D,!1):(xe==="touchOnly"||addEventListener(`${L}down`,D,!1),addEventListener("touchstart",D,!1)),m.hrefs=!0)}function Rt(){m.hrefs&&(xe==="mouseOnly"?removeEventListener(`${L}down`,D,!1):(xe==="touchOnly"||removeEventListener(`${L}down`,D,!1),removeEventListener("touchstart",D,!1)),m.hrefs=!1)}function At(){Pt();let e=g(h(1));return n.index=e.key,new Promise(t=>{addEventListener("DOMContentLoaded",()=>{wt(),n.manual===!1&&(oe(),ie(),se());let r=ue(e,document.documentElement.outerHTML);Et()&&(r.rev=E.state.rev),r.position=N(),ge(r),r.rev!==r.key&&setTimeout(()=>de(r.rev)),setTimeout(()=>nt(r)),t(r)},{once:!0})})}function $t(){B(),oe(),Y(),ie(),C(),se()}function Lt(){It(),Rt(),B(),Y(),C(),k(),f(1,"Disconnected \u{1F614}")}import rr from"morphdom";var Nt=!!(window.history.pushState&&window.requestAnimationFrame&&window.addEventListener&&window.DOMParser);function or(e={}){if(!Nt)return f(4,"Browser does not support SPX");if(!window.location.protocol.startsWith("http"))return f(4,"Invalid protocol, SPX expects https or http protocol");Pe(e);let t=At();return function(r){return p(this,null,function*(){let o=yield t;if(r.constructor.name==="AsyncFunction")try{yield r(o)}catch(s){f(3,"Connection Established \u26A1")}else r(o);f(1,"Connection Established \u26A1")})}}function nr(e,t){if(e)if(t)e==="config"&&Pe(t),e==="observers"&&w(m,t);else{if(e==="config")return n;if(e==="observers")return m;if(e==="pages")return a;if(e==="snapshots")return I;if(e==="memory")return ve(T.bytes)}let r=d(null);return r.config=n,r.snapshots=I,r.pages=a,r.observers=m,r.memory=T,r.memory.size=ve(r.memory.bytes),r}function sr(e,t){if(e===void 0)return le();if(typeof e=="string"){let r=A(e);b(r)||f(4,`No store exists at: ${r}`);let o=le(r);return t!==void 0?M(w(o.page,t)):o}if(typeof e=="object")return M(e)}function ir(){return p(this,null,function*(){let e=a[E.state.key];e.type=10;let t=yield y(e);return t?(f(1,"Triggered reload, page was re-cached"),$(t)):(f(2,"Reload failed, triggering refresh (cache will be purged)"),location.assign(e.key))})}function cr(e){return p(this,null,function*(){let t=h(e,3);t.location.origin!==U&&f(4,"Cross origin fetches are not allowed");let r=yield Ne(t.key);if(r)return j(r)})}function ar(e){let{page:t,dom:r}=le();if(e=W(e)?e:t.target,e.length===1&&e[0]==="body")return r.body.replaceWith(document.body);let o=e.join(","),s=document.body.querySelectorAll(o);r.body.querySelectorAll(o).forEach((i,c)=>{i.matches(e[c])&&rr(i,s[c],{onBeforeElUpdated:(u,v)=>!u.isEqualNode(v)})}),M(t,r.documentElement.innerHTML)}function fr(e){return p(this,null,function*(){let t=h(e,2);if(b(t.key)){f(2,`Cache already exists for ${t.key}, prefetch skipped`);return}let r=yield y(g(t));if(r)return r;f(4,`Prefetch failed for ${t.key}`)})}function ur(e,t){return p(this,null,function*(){let r=h(e,8);y(r),t&&(r.hydrate=t);let o=yield re(r);if(o){let{key:s}=E.state;if(ge(o),$(o),r.key!==s){n.index===s&&(n.index=r.key);for(let i in a)a[i].rev===s&&(a[i].rev=r.key);k(s)}}return o})}function lr(e,t){return p(this,null,function*(){let r=h(e),o=typeof t=="object"?w(r,t):r;return b(r.key)?De(r.key,M(o)):De(r.key,g(o))})}var bn={supported:Nt,on:tt,off:rt,observe:$t,connect:or,capture:ar,session:nr,state:sr,reload:ir,fetch:cr,clear:k,hydrate:ur,prefetch:fr,visit:lr,disconnect:Lt};export{ar as capture,or as connect,bn as default,cr as fetch,ur as hydrate,fr as prefetch,ir as reload,nr as session,sr as state,Nt as supported,lr as visit};
