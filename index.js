var e=Object.defineProperty,t="undefined"!=typeof window?window:{screen:{},navigator:{}},n=(t.matchMedia||function(){return{matches:!1}}).bind(t),o={get passive(){return!0}},r=function(){};t.addEventListener&&t.addEventListener("p",r,o),t.removeEventListener&&t.removeEventListener("p",r,!1);var i="ontouchstart"in t,s=i||"TouchEvent"in t&&n("(any-pointer: coarse)").matches,a=(t.navigator.maxTouchPoints||0)>0||s,l=t.navigator.userAgent||"",c=n("(pointer: coarse)").matches&&/iPad|Macintosh/.test(l)&&Math.min(t.screen.width||0,t.screen.height||0)>=768,u=(n("(pointer: coarse)").matches||!n("(pointer: fine)").matches&&i)&&!/Windows.*Firefox/.test(l),f=n("(any-pointer: fine)").matches||n("(any-hover: hover)").matches||c||!i,d=!a||!f&&u?a?"touchOnly":"mouseOnly":"hybrid",p="undefined"!=typeof window;document.createElement("template"),document.createRange&&document.createRange();var h=s?"pointer":"mouse",m=window.location.origin,{assign:g,keys:y,entries:v}=Object,b=Object.defineProperty,$=Object.defineProperties,w=Object.create,{isArray:k}=Array,A=Array.from,x="",{warn:E,info:C,error:N,debug:T}=console,q=()=>document.body,O=()=>document.head,S=e=>e?g(w(null),e):w(null),L=e=>new Set(e),P=()=>new Map,R=class extends XMLHttpRequest{constructor(){super(...arguments),this.key=null}};R.r=P(),R.f=P(),R.s=S();var I,W=S({index:"",eval:!0,patched:!1,loaded:!1,logLevel:2,qs:S(),config:S({fragments:["body"],timeout:3e4,globalThis:!0,schema:"spx-",manual:!1,logLevel:2,cache:!0,components:null,maxCache:100,reverse:!0,preload:null,annotate:!1,eval:S({script:null,style:null,link:null,meta:!1}),hover:S({trigger:"href",threshold:250}),intersect:S({rootMargin:"0px 0px 0px 0px",threshold:0}),proximity:S({distance:75,threshold:250,throttle:500}),progress:S({bgColor:"#111",barHeight:"3px",minimum:.08,easing:"linear",speed:200,threshold:500,trickle:!0,trickleSpeed:200})}),fragments:P(),components:S({u:P(),a:P(),p:L(),t:P(),l:(I={get:(e,t)=>W.components.a.get(e[t])},new Proxy(S(),I))}),events:S(),observe:S(),memory:S(),pages:S(),snaps:S(),resources:L()});function j(e,t,n){let o=W.logLevel,r="[96mSPX[0m ";if(k(t)&&(t=t.join(" ")),2!==e&&1!==e||1!==o&&2!==o){if(e<=3&&3===o)n?E(r+t,n):E(r+t);else if(5===e||4===e){n?N(r+t,n):N(r+t);try{throw 4===e?new TypeError(t):new Error(t)}catch(e){}}}else C(`${r}%c${t}`,`color: ${n||"#999"};`)}var M=/\b(?:append|prepend)/,H=/\s+/g,D=/^\b(?:true|false)$/i,U=/^\d*\.?\d+$/,X=/^(?:[.-]?\d*\.?\d+|NaN)$/,Y=/\b(?:intersect|hover|proximity)\b/,F=/\b(?:SCRIPT|STYLE|LINK)\b/,z=/\[(['"]?.*['"]?,?)\]/,B=/[xy]\s*|\d*\.?\d+/gi;function V(e){let t=e.replace(/\s+,/g,",").replace(/,\s+/g,",").replace(/['"]/g,x);return 91===t.charCodeAt(0)&&(/^\[\s*\[/.test(t)||/,/.test(t)&&/\]$/.test(t))&&(t=t.replace(/^\[/,x).replace(/\]$/,x)),t.split(/,|\|/)}function K(e,t){try{let n=(t||e).replace(/\\'|'/g,(e=>"\\"===e[0]?e:'"')).replace(/\[|[^\s[\]]*|\]/g,(e=>/[[\]]/.test(e)?e:e.split(",").map((e=>e.replace(/^(\w+)$/,'"$1"').replace(/^"([\d.]+)"$/g,"$1"))).join(","))).replace(/([a-zA-Z0-9_-]+)\s*:/g,'"$1":').replace(/:\s*([$a-zA-Z_-]+)\s*([,\]}])/g,':"$1"$2').replace(/,([\]}])/g,"$1").replace(/([a-zA-Z_-]+)\s*,/g,'"$1",').replace(/([\]},\s]+)?"(true|false)"([\s,{}\]]+)/g,"$1$2$3");return JSON.parse(n)}catch(n){return j(5,"Invalid JSON expression in attribute value: "+JSON.stringify(e||t,null,2),n),t}}function Z(e){return e[e.length-1]}function _(e){return e.replace(/\./g,"\\.").replace(/@/g,"\\@").replace(/:/g,"\\:")}function G(e){return function(e){return e.replace(/\s+/g," ").trim()}(e.replace(/[\s .]+/g,".")).replace(/\s+/g," ").trim().split(/[ ,]/)}function J(e){if(X.test(e))return"NaN"===e?NaN:+e;if(D.test(e))return"true"===e;let t=e.charCodeAt(0);return 123===t||91===t?K(e):e}function Q(e){return setTimeout((()=>e()),1)}function ee(){return Promise.resolve()}function te(){return(new Date).getTime()}function ne(e){return t=>!!t&&("string"==typeof t?t in e:t.every((t=>t in e)))}function oe(e,t){return!!e&&t in e}function re(e,t,n){return void 0!==t?(b(e,t,{get:()=>n}),e):(t,n,o)=>{if(oe(e,t))return;let r=()=>n;return b(e,t,o?g(o,{get:r}):{get:r})}}function ie(e){return oe(e,"target")?1===e.target.length&&"body"===e.target[0]?e.target:e.target.filter(((e,t,n)=>"body"!==e&&e!==x&&-1===e.indexOf(",")&&n.indexOf(e)===t)):1===W.config.fragments.length&&"body"===W.config.fragments[0]?["body"]:[]}function se(e){return 1===e.length&&"body"===e[0]?"body":0===e.length?null:e.join(",")}function ae(e){let t=typeof e;if("object"===t){for(let t in e)return!1;return!0}return"string"===t?void 0===e[0]:!!k(e)&&e.length>0}var le=function e(t=5){let n=Math.random().toString(36).slice(-t);return e.v.has(n)?e(t):(e.v.add(n),n)};function ce(e=2){return(t,n)=>{let o=t.length;return(o<1||t[o-1].length===e?t.push([n]):t[o-1].push(n))&&t}}function ue(e){return e[0].toLowerCase()+e.slice(1)}function fe(e){return e[0].toUpperCase()+e.slice(1)}function de(e){return/[A-Z]/.test(e)?e.replace(/(.{1})([A-Z])/g,"$1-$2").toLowerCase():e}function pe(e){return/[_-]/.test(ue(e))?e.replace(/([_-]+).{1}/g,((e,t)=>e[t.length].toUpperCase())):e}function he(e,t){let n="string"==typeof e?q().querySelectorAll(e):e,o=n.length;if(0!==o)for(let e=0;e<o&&!1!==t(n[e],e);e++);}function me(e,t){if(1===arguments.length)return t=>me(e,t);let n=t.length;if(0!==n)for(let o=0;o<n;o++)e(t[o],o,t)}function ge(e){for(let t in e)delete e[t]}le.v=L();var ye=function(){let e,t=[],n=document.createElement("div"),o=null,r=null,i=e=>100*(-1+e),s=(e,t,n)=>e<t?t:e>n?n:e,a=()=>{let e=t.shift();e&&e(a)},l=e=>{e=s(e,W.config.progress.minimum,1),o=1===e?null:e;let l=r||(n.style.setProperty("transform",`translateX(${i(o||0)}%)`),r=q().appendChild(n),n);(e=>{t.push(e),1===t.length&&a()})((t=>{l.style.setProperty("transform",`translateX(${i(e)}%)`),1===e?setTimeout((()=>{(()=>{let e=q();e.contains(r)?r.animate({opacity:["1","0"]},{easing:"ease-out",duration:100}).onfinish=()=>{e.removeChild(r),r=null}:r=null})(),t()}),2*W.config.progress.speed):setTimeout(t,W.config.progress.speed)}))},c=e=>{let t=o;return t?t<1?("number"!=typeof e&&(e=t>=0&&t<.2?.1:t>=.2&&t<.5?.04:t>=.5&&t<.8?.02:t>=.8&&t<.99?.005:0),t=s(t+e,0,.994),l(t)):void 0:f()},u=()=>{setTimeout((()=>{o&&(c(),u())}),W.config.progress.trickleSpeed)};function f(t){W.config.progress&&(e=setTimeout((()=>{o||l(0),W.config.progress.trickle&&u()}),t||0))}return{start:f,done:function(t){clearTimeout(e),(t||o)&&(c(.3+.5*Math.random()),l(1))},style:({bgColor:e,barHeight:t,speed:o,easing:r})=>{n.style.cssText=function(...e){return e.join(x)}("pointer-events:none;",`background-color:${e};`,`height:${t};`,"position:fixed;","display:block;","z-index:2147483647;","top:0;","left:0;","width:100%;","will-change:opacity,transform;",`transition:transform ${o}ms ${r};`)}}}();function ve(e,t){let n=e.name,o=t;t=ue(t||n),oe(e,"define")||(e.define={id:t,state:{},nodes:[]});let r=ne(e.define);return r("state")||(e.define.state={}),r("nodes")||(e.define.nodes=[]),r("id")||(e.define.id=t),t!==e.define.id&&(t=pe(e.define.id)),n!==o&&/^[A-Z]|[_-]/.test(e.define.id)&&j(3,[`Component identifer name "${e.define.id}" must use camelCase format.`,`The identifer has been converted to "${t}"`]),t}function be(e,t=!1){let{u:n}=W.components;for(let o in e){let r=e[o],i=t?o:ve(r,o);n.has(i)||(n.set(i,r),j(1,`Component ${r.name} registered using id: ${i}`,"#F48FB1"))}W.config.components||(W.config.components=!0)}function $e(e,t){let n=`:not([${e}${t}=false]):not([${e}link])`;switch(t.charCodeAt(0)){case 104:return`${n}:not([${e}proximity]):not([${e}intersect])`;case 105:return`${n}:not([${e}hover]):not([${e}proximity])`;case 112:return`${n}:not([${e}intersect]):not([${e}hover])`}}function we(e){return(new DOMParser).parseFromString(e,"text/html")}function ke(e){return(e||document).documentElement.outerHTML}function Ae(e){let t=e.indexOf("<title");if(-1===t)return x;let n=e.indexOf(">",t)+1,o=e.indexOf("</title",n);return function(e){let t=document.createElement("textarea");return t.innerHTML=e,t.value}(e.slice(n,o).trim())}function xe(e,...t){let n="before:cache"===e;n&&(t[1]=we(t[1]));let o=!0;return me((e=>{let r=e.apply(null,t);n?r instanceof Document?o=r.documentElement.outerHTML:"string"!=typeof o&&(o=!1!==r):o=!1!==r}),W.events[e]||[]),o}function Ee(e,t,n){return e in W.events||(W.events[e]=[]),W.events[e].push(n?t.bind(n):t)-1}function Ce(e,t){if(e in W.events){let n=W.events[e];if(n&&"number"==typeof t)n.splice(t,1),j(2,`Removed ${e} event listener (id: ${t})`),0===n.length&&delete W.events[e];else{let o=[];if(n&&t)for(let r=0,i=n.length;r<i;r++)n[r]!==t?o.push(n[r]):"x"!==e&&j(2,`Removed ${e} event listener (id: ${r})`);o.length?W.events[e]=o:delete W.events[e]}}else j(3,`There are no ${e} event listeners`);return this}var Ne={};function Te(e,t){if(!1===t(e))return;let n,o;for(e.firstElementChild&&(o=0,n=e.children[o]);n;)n&&Te(n,t),n=e.children[++o]}function qe(e,t){return`on${e}`in t||(j(5,[`Invalid event name "${e}" provided. No such event exists in the DOM API.`,"Only known event listeners can be attached."],t),!1)}function Oe(e,t,n){let o=e[t.method];return function(n){t.params&&(oe(n,"attrs")||re(n,"attrs",S()),g(n.attrs,t.params)),o.call(e,n)}}function Se(e,t){t.attached&&(t.listener.abort(),t.listener=new AbortController,t.options.signal=t.listener.signal,t.attached=!1,W.components.t.delete(t.dom),j(1,[`Detached ${t.key} ${t.eventName} event from ${t.method}() method in component`,`${e.scope.static.id}: ${e.scope.key}`]))}function Le(e,t,n){if(!n.attached){if(!(n.method in e))return void j(3,`Undefined callback method: ${e.scope.static.id}.${n.method}()`);(function(e,t){for(let n=0,o=e.length;n<o;n++){let{name:o,value:r}=e[n];if(W.qs.O.test(o)&&!o.startsWith(W.qs.x)&&r){let e=o.slice(W.config.schema.length).split(":").pop();null===t.params&&(t.params=S()),e in t.params||(t.params[e]=J(r))}}})(t.attributes,n),n.isWindow?qe(n.eventName,window)&&addEventListener(n.eventName,Oe(e,n)):qe(n.eventName,t)&&(t.addEventListener(n.eventName,Oe(e,n),n.options),W.components.t.set(n.dom,t)),j(1,[`Attached ${n.key} ${n.eventName} event to ${n.method}() method in component`,`${e.scope.static.id}: ${e.scope.key}`]),n.attached=!0}}((t,n)=>{for(var o in n)e(t,o,{get:n[o],enumerable:!0})})(Ne,{connect:()=>at,disconnect:()=>lt,hook:()=>st,hookArguments:()=>ot,mount:()=>it,teardown:()=>rt});var Pe,Re,Ie=(Pe=class{constructor(e){this.state=S();let{t:t}=W.components,{scope:n}=$(this,{scope:{get:()=>Ie.scopes.get(e)},dom:{get:()=>t.get(n.dom)}}),o=`${W.config.schema}${n.instanceOf}`;if(this.state=new Proxy(S(),{set:(e,r,i)=>{let s=n.static.state[r],a="object"==typeof i||k(i)?JSON.stringify(i):`${i}`;if("object"==typeof s&&oe(s,"persist")&&s.persist?e[r]=n.state[r]=i:e[r]=i,a.trim()!==x&&this.dom){let e=this.dom.hasAttribute(`${o}:${r}`)?`${o}:${r}`:`${o}:${de(r)}`;a!==this.dom.getAttribute(`${o}:${r}`)&&this.dom.setAttribute(e,a)}if(r in n.binds){let{binds:e}=n;for(let n in e[r])e[r][n].value=a,t.has(e[r][n].dom)&&(t.get(e[r][n].dom).innerText=a)}return!0}}),ae(n.state))for(let e in n.static.state){let t,o,r=n.static.state[e];"object"==typeof r?(t=r.typeof,o=r.default):t=r,t===String?this.state[e]=o||x:t===Boolean?this.state[e]=o||!1:t===Number?this.state[e]=o?+o:0:t===Array?this.state[e]=o||[]:t===Object&&(this.state[e]=o||{}),n.state[e]=this.state[e]}else for(let e in n.static.state){if(!(e in n.state))if("object"==typeof n.static.state[e])n.state[e]=n.static.state[e].default;else switch(n.static.state[e]){case String:n.state[e]=x;break;case Boolean:n.state[e]=!1;break;case Number:n.state[e]=0;break;case Object:n.state[e]={};break;case Array:n.state[e]=[]}let t,r,i=n.static.state[e],s=de(e),a=this.dom.hasAttribute(`${o}:${s}`)?this.dom.getAttribute(`${o}:${s}`):this.dom.getAttribute(`${o}:${e}`),l=null!==a&&a!==x;"object"==typeof i?(t=i.typeof,r=l,l||(a=i.default)):t=i,`has${fe(e)}`in this.state||b(this.state,`has${fe(e)}`,{get:()=>l}),"string"==typeof a&&a.startsWith("window.")?this.state[e]=window[a.slice(7)]:t===String?this.state[e]=a||x:t===Boolean?this.state[e]=a||!1:t===Number?this.state[e]=a?+a:0:t===Array?this.state[e]=l?K(a):r?a:[]:t===Object&&(this.state[e]=l?K(a):r?a:{}),n.state[e]=this.state[e]}}get html(){return this.dom.closest("html")}},Pe.scopes=P(),Pe);function We(e,t,n,o){let r,i,s;for(e.firstElementChild&&(r=0,i=e.children[r],s=t.children[r]);i;)i&&(o.has(s)?(je(i,n,!0),o.delete(s)):s.hasAttribute(W.qs.e)&&i.setAttribute(W.qs.e,s.getAttribute(W.qs.e)),We(i,s,n,o)),i=e.children[++r],s=t.children[r]}function je(e,t,n=!1){let{t:o}=W.components;Te(e,(e=>{if("false"!==e.getAttribute("spx-snapshot")&&Xe(e.attributes)&&!e.hasAttribute(W.qs.e)){let r=t.shift();if(r||j(5,"Undefined reference, the snapshot record failed to align",e),o.has(r)){let i=e.getAttribute(W.qs.e),s=o.get(r).getAttribute(W.qs.e);if(i!==s&&e.setAttribute(W.qs.e,s),0===t.length)return!1===n&&(rn(e.ownerDocument.documentElement.outerHTML),j(1,`Snapshot ${W.page.key} updated for: ${W.page.snap}`)),!1}else j(5,"Undefined reference, the snapshot record failed to align",e)}}))}function Me(e,t){let n=S(),{t:o}=W.components;for(let e in t)t[e].schema in n||(n[t[e].schema]=[]),n[t[e].schema].push(t[e].dom);for(let t in n){if(`${t}s`in e)continue;if(t in e){e[t]=n[t];continue}let r=n[t];r.length>1?$(e,{[t]:{get:()=>o.get(r[0]),set(e){r=e}},[`${t}s`]:{get:()=>r.map((e=>o.get(e)))}}):b(e,t,{get:()=>o.get(r[0]),set(e){r=e}})}}function He({h:e,d:t,o:n,m:o}){let r=4===W.page.type,i=!r||0===W.page.type,s=[],{t:a,p:l,a:c,u:u,l:f}=W.components;for(let n in e)for(let d of e[n]){if(null===d.instanceOf){if(!(n in t))continue;d.instanceOf=t[n]}let e,p;if(5!==d.mounted||null===o&&!r)e=u.get(d.instanceOf),Ie.scopes.set(d.key,re(d,"static",e.define)),p=new e(d.key);else{let t=an();if(null!==d.alias&&d.alias in t?(p=t[d.alias][0],e=p.scope.static):d.instanceOf in t&&1===t[d.instanceOf].length&&(p=t[d.instanceOf][0],e=p.scope.static),!p){j(3,"Increment component instance failed as instance was undefined",d);continue}d.key=p.scope.key,d.ref=p.scope.ref,d.connect=p.scope.connect,d.mounted=2}if(ae(d.nodes)||Me(p,d.nodes),null===o&&"nodes"in e&&e.nodes.length>0)for(let t of e.nodes)re(p,`has${fe(t)}Node`,`${t}Node`in p);for(let e in d.events){let t;null!==o&&5===d.mounted?(t=p.scope.events[e]=d.events[e],f[e]=p.scope.key):t=d.events[e],Le(p,a.get(t.dom),t)}if(null===o||(null!==o||r)&&2===d.mounted){l.add(d.key),c.set(d.key,p),j(1,`Component ${d.static.id} (connect) mounted: ${d.key}`,"#6DD093");let e=-1;"connect"in p&&(s.push([d.key,"connect"]),i&&(p.scope.mounted=1,e=s.length-1)),"onmount"in p&&(e>-1?s[e].push("onmount"):s.push([d.key,"onmount"]))}}return i&&n.length>0&&Q((()=>je(W.snapDom.body,n))),s.length>0?it(s):Promise.resolve()}function De(){let e=[];for(let t of W.page.fragments){let n=document.getElementById(t);n?(W.fragments.set(t,n),e.push(t)):W.fragments.delete(t)}tn("fragments",e)}function Ue(e){for(let[t,n]of W.fragments)if(t===e.id||n.contains(e))return!0;return!1}function Xe(e){if("string"==typeof e)return e.indexOf("@")>-1||e===W.qs.E||e===W.qs.b||e===W.qs.N;for(let t=e.length-1;t>=0;t--)if(Xe(e[t].name))return!0;return!1}function Ye(e,t){Xe(e.attributes)&&(e.hasAttribute(W.qs.E)?function(e,t,n){let{u:o,t:r}=W.components,{h:i,d:s}=n,a=e.hasAttribute("id")?e.id.trim():null;n.n=le(),n.o.push(n.n),r.set(n.n,e);for(let r of function(e){return e.trim().replace(/\s+/," ").split(/[|, ]/).map(pe)}(t))if(o.has(r)){let t;r in i?(t=Z(i[r]),5===t.mounted?(Be(e,t.key,t.ref),t.dom=n.n,t.mounted=2,t.inFragment=Ue(e)):i[r].push(Ve(r,e,n))):i[r]=[Ve(r,e,n)],t=Z(i[r]),a&&!(a in s)&&(s[a]=r),Ge(e,n,r,t.alias)}else j(5,`Component does not exist in registry: ${r}`)}(e,e.getAttribute(W.qs.E),t):Ge(e,t,null,null))}function Fe(e=null){return S({d:S(),h:S(),n:null,o:[],m:e,U:e?S():null})}function ze(e,{h:t,d:n}){return e in t?Z(e in n?t[n[e]]:t[e]):e in n?Z(t[n[e]]):(t[e]=[Ve(e)],t[e][0])}function Be(e,t,n){W.components.l[n]=t;let o=e.getAttribute(W.qs.e),r=o?`${o},${n}`:n;return e.setAttribute(W.qs.e,r),n}function Ve(e,t,n){let{u:o}=W.components,r=le(),i=S({key:r,mounted:5,connect:!1,ref:`c.${r}`,state:S(),nodes:S(),events:S(),binds:S()});return t&&(Be(t,r,i.ref),i.dom=n.n,i.mounted=2,i.inFragment=Ue(t),t.hasAttribute("id")&&(i.alias=pe(t.id.trim()))),o.has(e)?(i.instanceOf=e,i.alias?o.has(i.alias)?j(5,[`Component alias "${i.alias}" matches a component identifer in the registry.`,"An alias reference must be unique and cannot match component names."]):n.d[i.alias]=e:i.alias=null):(i.alias=e||null,i.instanceOf=null,2===i.mounted&&(n.d[i.alias]=null)),i}function Ke(e,t,n,o){let r=S(),i=n.indexOf("{"),s=t.slice(W.config.schema.length),a=new AbortController;r.key=`e.${le()}`,r.dom=`${o.n}`,r.isWindow=s.startsWith("window:"),r.eventName=r.isWindow?s.slice(7):s,r.attached=!1,r.params=null,r.options={signal:a.signal};let l=n;if(i>-1){let e=n.slice(i,n.lastIndexOf("}",i)).match(/(passive|once)/g);null!==e&&(e.indexOf("once")>-1&&(r.options.once=!0),e.indexOf("passive")>-1&&(r.options.passive=!0)),l=n.slice(0,i)}let c=G(l);c.length>1&&j(3,`No more than 1 DOM Event listener method allowed in value: ${n}`);let[u,f]=c[0].split("."),d=ze(u,o);r.listener=a,r.method=f.trim(),d.events[r.key]=r,Be(e,d.key,r.key)}function Ze(e,t,n){for(let o of G(t)){let[t,r]=o.split("."),i=ze(t,n),s=Be(e,i.key,`n.${le()}`);i.nodes[s]=S({key:s,keyProp:r,dom:n.n,schema:`${r}Node`,isChild:2===i.mounted})}}function _e(e,t,n){for(let o of G(t)){let[t,r]=o.split("."),i=ze(t,n),s=Be(e,i.key,`b.${le()}`);r in i.binds||(i.binds[r]=S()),i.binds[r][s]=S({key:s,stateKey:r,value:e.innerText,dom:n.n,stateAttr:`${W.config.schema}${t}:${r}`,selector:`[${W.qs.e}*=${_(s)}]`,isChild:2===i.mounted})}}function Ge(e,t,n,o){null===n&&null===o&&(t.n=le(),t.o.push(t.n),W.components.t.set(t.n,e));for(let r=e.attributes.length-1;r>=0;r--){let{name:i,value:s}=e.attributes[r];if(n){let e=`${W.config.schema}${n}:`;o&&!i.startsWith(e)&&(e=`${W.config.schema}${o}:`),i.startsWith(e)&&(ze(n,t).state[pe(i.slice(e.length))]=s)}i.indexOf("@")>-1?Ke(e,i,s,t):i===W.qs.N?_e(e,s,t):i===W.qs.b&&Ze(e,s,t)}}function Je(e){let t=Fe();if(e){if(e instanceof Set){for(let n of e)Ye(n,t);return e.clear(),t}return Ye(e,t),t}Te(q(),(e=>Ye(e,t))),ae(t.h)||He(t)}function Qe(){Q((()=>{Re=void 0}))}function et(e,t){let{l:n,p:o,t:r}=W.components;for(let i of t){let t=n[i];if(!t)continue;let s=i.charCodeAt(0);if(99===s)o.add(t.scope.key),r.set(t.scope.dom,e),t.scope.mounted=2,j(1,`Component ${t.scope.static.id} mounted: ${t.scope.key}`,"#6DD093");else if(101===s)Le(t,e,t.scope.events[i]);else if(110===s)r.set(t.scope.nodes[i].dom,e);else if(98===s){let{binds:n}=t.scope;for(let t in n)if(i in n[t]){e.innerText=n[t][i].value,r.set(n[t][i].dom,e);break}}}}function tt(e,t,n){let{l:o,t:r,p:i}=W.components;for(let s of t){let t=o[s];if(!t)continue;let a=s.charCodeAt(0);if(99===a){i.delete(s),r.delete(t.scope.dom);let{scope:e}=t;for(let t in e.nodes)r.delete(e.nodes[t].dom);for(let t in e.binds)for(let n in e.binds[t])r.delete(e.binds[t][n].dom);for(let n in e.events)Se(t,e.events[n]);j(1,`Component ${t.scope.static.id} unmounted: ${t.scope.key}`,"#7b97ca"),e.mounted=4}else if(101===a)Se(t,t.scope.events[s]);else if(110===a){let o=t.scope.nodes[s];r.delete(o.dom),n&&e.isEqualNode(n)&&(Be(e,t.scope.key,s),Re.o.push(o.dom))}else if(98===a){let{binds:o}=t.scope;for(let i in o)if(s in o[i]){r.delete(o[i][s].dom),n&&e.isEqualNode(n)&&(Be(e,t.scope.key,s),Re.o.push(o[i][s].dom));break}}}}function nt(e){1!==e.nodeType&&11!==e.nodeType||e.hasAttribute(W.qs.e)&&tt(e,e.getAttribute(W.qs.e).split(","))}function ot(){return g(S(),{page:g(S(),W.page)})}function rt(){for(let e in W.components.l)delete W.components.l[e];for(let e of W.components.a.values())for(let t in e.scope.events)Se(e,e.scope.events[t]);W.components.t.clear(),W.components.a.clear(),W.components.p.clear(),j(2,"Component instances were disconnected")}function it(e){let{a:t}=W.components,n=ot(),o=[];for(let[r,i,s]of e){let e=t.get(r),a="mount";4===e.scope.mounted&&(a="unmount");let l=async()=>{try{return!e.scope.connect&&s&&1===e.scope.mounted?(await e[i](n),await e[s](n),e.scope.connect=!0):await e[i](n),void(e.scope.mounted=4===e.scope.mounted?5:3)}catch(e){}return j(3,`Component to failed to ${a}: ${e.scope.instanceOf} (${r})`),Promise.reject(r)};o.push(ee().then(l))}return Promise.race(o)}function st(e){let{p:t,a:n}=W.components,o=[];tn("components",A(t));for(let r of t){let t=n.get(r);e=4===t.scope.mounted?"unmount":"onmount",t&&e in t&&("onmount"===e&&!t.scope.connect&&"connect"in t?o.push([r,"connect",e]):3!==t.scope.mounted&&o.push([r,e]))}o.length>0&&it(o).catch((e=>{n.get(e).scope.mounted=5,t.delete(e)}))}function at(){W.config.components&&(W.observe.components||(0===W.page.type?Je():Re?He(Re).then(st).then(Qe):st(),W.observe.components=!0))}function lt(){W.observe.components&&(st("unmount"),W.observe.components=!1)}function ct(e,{method:t="GET",body:n=null,headers:o=null,type:r="text"}={}){return new Promise((function(i,s){let a=new R;if(a.key=e,a.responseType=r,a.open(t,e),a.setRequestHeader("spx-request","true"),null!==o)for(let e in o)a.setRequestHeader(e,o[e]);a.onloadstart=function(){R.r.set(this.key,a)},a.onload=function(){i(this.response)},a.onerror=function(){s(this.statusText)},a.onabort=function(){delete R.s[this.key],R.f.delete(this.key),R.r.delete(this.key)},a.onloadend=function(e){R.r.delete(this.key),W.memory.bytes=W.memory.bytes+e.loaded,W.memory.visits=W.memory.visits+1},a.send(n)}))}function ut(e){return!(e in R.s)||(clearTimeout(R.s[e]),delete R.s[e])}function ft(e,t,n){e in R.s||ln(e)||(R.s[e]=setTimeout(t,n))}function dt(e){for(let[t,n]of R.r)e!==t&&(n.abort(),j(3,`Pending request aborted: ${t}`))}async function pt(e){if(e.rev===e.key)return;let t=en(bn(e.rev,4));await new Promise((e=>setTimeout((()=>e()),1))),mt(t).then((t=>{t?j(2,`Reverse fetch completed: ${t.rev}`):j(3,`Reverse fetch failed: ${e.rev}`)}))}async function ht(e){if(!R.f.has(e.key))return e;let t=await R.f.get(e.key);return R.f.delete(e.key),delete R.s[e.key],nn(e,t)}async function mt(e){return R.r.has(e.key)&&7!==e.type?(4===e.type&&R.r.has(e.rev)?(R.r.get(e.rev).abort(),j(3,`Request aborted: ${e.rev}`)):j(3,`Request in transit: ${e.key}`),!1):xe("fetch",e)?(R.f.set(e.key,ct(e.key)),ht(e)):(j(3,`Request cancelled via dispatched event: ${e.key}`),!1)}function gt(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,x):e.removeAttribute(n))}function yt(e,t){let{value:n}=t;e.value!==n&&(e.value=n);let{firstChild:o}=e;if(o){let{nodeValue:t}=o;if(t===n||!n&&t===e.placeholder)return;o.nodeValue=n}}function vt(e,t){if(e===t)return!0;let n=e.charCodeAt(0),o=t.charCodeAt(0);return n<=90&&o>=97?e===t.toUpperCase():o<=90&&n>=97&&t===e.toUpperCase()}function bt(e){return e&&"getAttribute"in e?e.getAttribute("id"):void 0}function $t(e,t,n,o=!0){nt(e),t&&t.removeChild(e),kt(e,o,n)}function wt(e,t,n){let o=bt(t);if(o&&n.i.delete(o),e.isEqualNode(t))return;let r=e.getAttribute(W.qs.m);"false"!==r&&("children"!==r&&function(e,t){if(11===t.nodeType||11===e.nodeType)return;let n,o,r,i,s,a=t.attributes,l=e.getAttribute(W.qs.e),c=t.getAttribute(W.qs.e),u=!1;for(let t=a.length-1;t>=0;t--)n=a[t],o=n.name,i=n.value,r=n.namespaceURI,r?(o=n.localName||o,s=e.getAttributeNS(r,o),s!==i&&("xmlns"===n.prefix&&(o=n.name),e.setAttributeNS(r,o,i))):(s=e.getAttribute(o),s!==i&&(e.setAttribute(o,i),!l&&!c&&!u&&(u=Xe(o))));let f=e.attributes;for(let s=f.length-1;s>=0;s--)n=f[s],o=n.name,i=n.value,r=n.namespaceURI,r?(o=n.localName||o,t.hasAttributeNS(r,o)||e.removeAttributeNS(r,o)):t.hasAttribute(o)||e.removeAttribute(o);(l||c||u)&&function(e,t,n,o){n&&(n=n.split(",")),o&&(o=o.split(",")),n&&o?(tt(e,n),et(e,o)):!n&&o?et(e,o):(Re?Re.m=e:Re=Fe(e),n&&!o&&tt(e,n,t),Xe(t.attributes)&&Ye(e,Re))}(e,t,l,c)}(e,t),"TEXTAREA"!==e.nodeName?function(e,t,n){let o,r,i,s,a,l,c=t.firstChild,u=e.firstChild;e:for(;c;){for(o=bt(c),r=c.nextSibling;u;){if(a=u.nextSibling,c.isEqualNode(u)){c=r,u=a;continue e}let t;if(i=bt(u),s=u.nodeType,s===c.nodeType&&(1===s?(o?o!==i&&((l=n.i.get(o))?a.isEqualNode(l)?t=!1:(e.insertBefore(l,u),i?n.c.add(i):$t(u,e,n),u=l,i=bt(u)):t=!1):i&&(t=!1),t=!1!==t&&vt(u.nodeName,c.nodeName),t&&wt(u,c,n)):(3===s||8===s)&&(t=!0,u.nodeValue!==c.nodeValue&&(u.nodeValue=c.nodeValue))),t){c=r,u=a;continue e}i?n.c.add(i):$t(u,e,n),u=a}o&&(l=n.i.get(o))&&vt(l.nodeName,c.nodeName)?(e.appendChild(l),wt(l,c,n)):(c.actualize&&(c=c.actualize(e.ownerDocument||document)),e.appendChild(c),At(c,n)),c=r,u=a}(function(e,t,n,o){for(;t;){let r=t.nextSibling;(n=bt(t))?o.c.add(n):$t(t,e,o),t=r}})(e,u,i,n),function(e,t){switch(e.nodeName){case"INPUT":!function(e,t){gt(e,t,"checked"),gt(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")}(e,t);break;case"OPTION":!function(e,t){let n=e.parentNode;if(n){let o=n.nodeName.toUpperCase();"OPTGROUP"===o&&(n=n.parentNode,o=n&&n.nodeName.toUpperCase()),"SELECT"===o&&!n.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}gt(e,t,"selected")}(e,t);break;case"SELECT":!function(e,t){if(!t.hasAttribute("multiple")){let t,n,o=0,r=-1,i=e.firstElementChild;for(;i;)if(n=i.nodeName&&i.nodeName.toUpperCase(),"OPTGROUP"===n)t=i,i=t.firstElementChild;else{if("OPTION"===n){if(i.hasAttribute("selected")){r=o;break}o++}i=i.nextElementSibling,!i&&t&&(i=t.nextElementSibling,t=null)}e.selectedIndex=r}}(e,t);break;case"TEXTAREA":yt(e,t)}}(e,t)}(e,t,n):yt(e,t))}function kt(e,t,n){if(1!==e.nodeType)return;let o=e.firstChild;for(;o;){let e;t&&(e=bt(o))?n.c.add(e):(nt(o),o.firstChild&&kt(o,t,n)),o=o.nextSibling}}function At(e,t){(1===e.nodeType||11===e.nodeType)&&function(e){e.hasAttribute(W.qs.e)?et(e,e.getAttribute(W.qs.e).split(",")):Xe(e.attributes)&&(Re?Re.m=e:Re=Fe(e),Ye(e,Re))}(e);let n=e.firstChild;for(;n;){let e=n.nextSibling,o=bt(n);if(o){let e=t.i.get(o);e&&vt(n.nodeName,e.nodeName)?(n.parentNode.replaceChild(e,n),wt(e,n,t)):At(n,t)}else At(n,t);n=e}}function xt(e,t){if(1===e.nodeType||11===e.nodeType){let n=e.firstChild;for(;n;){let e=bt(n);e&&t.i.set(e,n),xt(n,t),n=n.nextSibling}}}function Et(e,t){let n=t.cloneNode(!0),o=S({c:L(),i:P()});11===n.nodeType&&(n=n.firstElementChild),xt(e,o);let r=e,i=r.nodeType,s=n.nodeType;if(1===i)1===s?vt(e.nodeName,n.nodeName)||(nt(e),r=function(e,t){let n,o=e.firstChild;for(;o;)n=o.nextSibling,t.appendChild(o),o=n;return t}(e,function(e,t){return t&&"http://www.w3.org/1999/xhtml"!==t?document.createElementNS(t,e):document.createElement(e)}(n.nodeName,n.namespaceURI))):r=n;else if(3===i||8===i){if(s===i)return r.nodeValue!==n.nodeValue&&(r.nodeValue=n.nodeValue),r;r=n}if(r.isEqualNode(n))nt(e);else{if(n.isEqualNode(r))return r;if(wt(r,n,o),o.c.size>0)for(let e of o.c)if(o.i.has(e)){let t=o.i.get(e);$t(t,t.parentNode,o,!1)}}return r!==e&&e.parentNode&&(r.actualize&&(r=r.actualize(e.ownerDocument||document)),e.parentNode.replaceChild(r,e)),o.i.clear(),o.c.clear(),r}function Ct(e,t){if(!(e instanceof Element))return!1;let n=e.closest(t);return!(!n||"A"!==n.tagName)&&n}function Nt(e){if("A"!==e.nodeName)return!1;let t=e.getAttribute("href");return!(!t||!mn(t))&&!1===ln(gn(t))}var Tt,qt=e=>{let t=[];return he(e,(e=>{Nt(e)&&t.push(e)})),t};function Ot(e){let t=Ct(e.target,W.qs.g);if(!t)return;let n=bn(t,10);if(ln(n.key)||n.key in R.s)return;t.addEventListener(`${h}leave`,St,{once:!0});let o=en(n),r=o.threshold||W.config.hover.threshold;ft(n.key,(function(){xe("prefetch",t,n)&&mt(o).then((function(){delete R.s[n.key],Pt(t)}))}),r)}function St(e){let t=Ct(e.target,W.qs.g);t&&ut(gn(t.href))}function Lt(e){e.addEventListener(`${h}enter`,Ot)}function Pt(e){e.removeEventListener(`${h}enter`,Ot),e.removeEventListener(`${h}leave`,St)}function Rt(){!W.config.hover||W.observe.hover||(me(Lt,qt(W.qs.g)),W.observe.hover=!0)}function It(){W.observe.hover&&(me(Pt,qt(W.qs.g)),W.observe.hover=!1)}async function Wt(e){if(e.isIntersecting){let t=bn(e.target,11);if(!xe("prefetch",e.target,t))return Tt.unobserve(e.target);await mt(en(t))?Tt.unobserve(e.target):(j(3,`Prefetch will retry at next intersect for: ${t.key}`),Tt.observe(e.target))}}function jt(){if(!W.config.intersect||W.observe.intersect)return;Tt||(Tt=new IntersectionObserver(me(Wt),W.config.intersect));let e=me((e=>Tt.observe(e))),t=function(e,t){let n=[];return he(e,(e=>{if("A"!==e.nodeName)he(e.querySelectorAll(t),(e=>{Nt(e)&&n.push(e)}));else if(e.hasAttribute("href")){let{href:t}=e;mn(t)&&ln(gn(t))&&n.push(e)}})),n}(W.qs.L,W.qs.H);e(t),W.observe.intersect=!0}function Mt(){W.observe.intersect&&(Tt.disconnect(),W.observe.intersect=!1)}var Ht,Dt=new MutationObserver((function([e]){if("childList"!==e.type)return;let t=e.addedNodes.length;if(t||e.removedNodes.length>0){let n=t?e.addedNodes[0]:e.removedNodes[0];if(1!==n.nodeType)return;W.eval&&F.test(n.nodeName)?"HEAD"===n.parentNode.nodeName?function(e,t){let{page:n,dom:o}=function(e){if(!e){if(null===Kt.state)return void j(3,"Missing history state reference, page cannot be returned");e=Kt.state.key}if(e in W.pages)return $(S(),{page:{get:()=>W.pages[e]},dom:{get:()=>we(W.snaps[W.pages[e].snap])}});j(5,`No record exists: ${e}`)}(W.page.key),r=114===e.charCodeAt(0)?"removed":"appended";o.head.contains(t)?(o.head[e](t),W.snaps[n.snap]=o.documentElement.outerHTML,j(1,`Snapshot record was updated. Node ${r} from <head>`,t)):j(3,"Node does not exists in snapshot record, no mutation applied",t)}(t?"appendChild":"removeChild",n):function(e){let t=q().querySelectorAll(`${W.page.target.join(",")},[${W.qs.y}]`);for(let n=0,o=t.length;n<o;n++)if(t[n].contains(e))return!1;return!0}(n)&&!W.resources.has(n)?W.resources.add(n):W.resources.delete(n):n instanceof HTMLElement&&t&&!n.hasAttribute(W.qs.e)&&Je(n)}}));function Ut(){W.observe.mutations&&(Dt.observe(document.head,{childList:!0}),Dt.observe(q(),{childList:!0,subtree:!0}),W.observe.mutations=!0)}function Xt(){if(W.observe.mutations){Dt.takeRecords(),Dt.disconnect();for(let e of W.resources)q().removeChild(e),W.resources.delete(e);W.observe.mutations=!1}}function Yt(e){let t=e.getBoundingClientRect(),n=e.getAttribute(W.qs.A),o=U.test(n)?Number(n):W.config.proximity.distance;return{target:e,top:t.top-o,bottom:t.bottom+o,left:t.left-o,right:t.right+o}}function Ft(){if(!W.config.proximity||W.observe.proximity)return;let e=qt(W.qs.A).map(Yt);e.length>0&&(Ht=function(e){let t=!1;return n=>{if(t)return;t=!0;let o=e.findIndex((e=>function({clientX:e,clientY:t},n){return e<=n.right&&e>=n.left&&t<=n.bottom&&t>=n.top}(n,e)));if(-1===o)setTimeout((()=>{t=!1}),W.config.proximity.throttle);else{let{target:n}=e[o],r=en(bn(n,12)),i=r.threshold||W.config.proximity.threshold;ft(r.key,(async()=>{if(!xe("prefetch",n,r))return zt();await mt(r)&&(e.splice(o,1),t=!1,0===e.length&&(zt(),j(2,"Proximity observer disconnected")))}),i)}}}(e),addEventListener(`${h}move`,Ht,{passive:!0}),W.observe.proximity=!0)}function zt(){W.observe.proximity&&(removeEventListener(`${h}move`,Ht),W.observe.proximity=!1)}function Bt(e,t){let n=q();if("body"===e.selector||0===e.fragments.length){let e=t.body;Et(n,e),Re&&Re.o.length>0&&Q((()=>{je(e,Re.o),tn("type",6)}))}else if(null!==e.selector){let o=n.querySelectorAll(e.selector),r=t.body.querySelectorAll(e.selector),i=L();for(let e=0,t=o.length;e<t;e++){let t=o[e],n=r[e];!n||!t||xe("render",t,n)&&(t.isEqualNode(n)||i.add(Et(t,n)))}6!==e.type&&Re&&Re.o.length>0&&Q((()=>{We(t.body,n,Re.o,i),tn("type",6),i.clear()}))}else for(let n of e.fragments){let e=W.fragments.get(n),o=t.getElementById(n);!o||!e||xe("render",e,o)&&(e.isEqualNode(o)||(Et(e,o),Re&&Re.o.length>0&&Q((()=>{je(o,Re.o),tn("type",6)}))))}}function Vt(e){It(),Mt(),zt(),Xt(),lt(),De(),W.eval||(document.title=e.title);let t=sn(e.snap);return 7===e.type?function(e,t){let n=e.hydrate;if(1===n.length&&"body"===n[0])return void Et(q(),t.body);let o=n.join(","),r=q().querySelectorAll(o),i=e.preserve&&e.preserve.length>0?e.preserve.join(","):null,s=[];if(i){let e=q().querySelectorAll(i);for(let t=0,n=e.length;t<n;t++){let n=e[t];n.setAttribute(W.qs.m,"false"),s.push(n)}}if(r.length>0){let e=t.body.querySelectorAll(o);for(let t=0,n=r.length;t<n;t++){let n=r[t],o=e[t];if(e[t]instanceof HTMLElement){if(!xe("hydrate",n,o))continue;Et(o,o)}}}if(i)for(let e of s)e.removeAttribute("spx-morph");e.hydrate=void 0,e.preserve=void 0,e.type=6,Vt(e)}(e,t):(async function(e,t){if(!W.eval||!e||!t)return;let n=[],o=L(),{children:r}=e;for(let e=0,n=t.length;e<n;e++)o.add(t[e].outerHTML);for(let t=0,i=r.length;t<i;t++){let i=r[t],{nodeName:s,outerHTML:a}=i,l=!0;l="SCRIPT"===s?i.matches(W.qs.M):"STYLE"===s?i.matches(W.qs.S):"META"===s?i.matches(W.qs.q):"LINK"===s?i.matches(W.qs.w):"false"!==e.getAttribute(W.qs.P),o.has(a)?l?n.push(i):o.delete(a):n.push(i)}let i=[],s=document.createRange();for(let t of o){let n=s.createContextualFragment(t).firstChild;if(oe(n,"href")||oe(n,"src")){let e=new Promise((function(e){n.addEventListener("error",(t=>{j(3,`Resource <${n.nodeName.toLowerCase()}> failed:`,n),e()})),n.addEventListener("load",(()=>e()))}));i.push(e)}e.appendChild(n),o.delete(t)}for(let t=0,o=n.length;t<o;t++)e.removeChild(n[t]);await Promise.all(i)}(O(),t.head.children),Bt(e,t),scrollTo(e.scrollX,e.scrollY)),ye.done(),Q((()=>{Rt(),jt(),Ft(),at(),Ut()})),xe("load",e),e}var Kt=window.history;function Zt(e){if(null==Kt.state||"object"!=typeof Kt.state)return!1;let t=ne(Kt.state)(["key","rev","scrollX","scrollY","title"]);return"string"==typeof e?t&&Kt.state.key===e:t}async function _t(){await ee(),W.loaded=!0}function Gt({key:e,rev:t,title:n,scrollX:o,scrollY:r}){let i={key:e,rev:t,scrollX:o,scrollY:r,title:n||document.title};return Kt.replaceState(i,i.title,i.key),j(1,`History replaceState: ${Kt.state.key}`),Kt.state}function Jt({key:e,rev:t,title:n,location:o}){let r=o.pathname+o.search,i={key:e,rev:t,title:n,scrollY:0,scrollX:0};return Kt.pushState(i,i.title,r),j(1,`History pushState: ${Kt.state.key}`),Kt.state}async function Qt(e){if(null!==e.state)if(ln(e.state.key)){!ln(e.state.rev)&&e.state.rev!==e.state.key&&pt(e.state.rev);let t=W.pages[e.state.key];4===t.type?j(1,`History popState reverse (snapshot): ${t.key}`):j(1,`History popState session (snapshot): ${t.key}`),tn("type",5),Vt(t)}else{j(1,`History popState fetch: ${e.state.key}`),rt(),e.state.type=5;let t=await mt(e.state);if(!t)return location.assign(e.state.key);let n=gn(location);if(t.key===n)Vt(t);else if(ln(n))Vt(W.pages[n]);else{rt();let e=en(bn(n,5));await mt(e),Jt(e)}}}function en(e){let t=ne(e);return e.ts=te(),e.target=ie(e),t("selector")||("body"===e.target[0]?e.selector="body":e.selector=se(e.target)),W.config.cache&&(t("cache")||(e.cache=W.config.cache),t("snap")||(e.snap=le())),t("scrollY")||(e.scrollY=0),t("scrollX")||(e.scrollX=0),!1!==W.config.hover&&10===e.type&&(t("threshold")||(e.threshold=W.config.hover.threshold)),!1!==W.config.proximity&&12===e.type&&(t("proximity")||(e.proximity=W.config.proximity.distance),t("threshold")||(e.threshold=W.config.proximity.threshold)),W.config.progress&&!t("progress")&&(e.progress=W.config.progress.threshold),t("fragments")||(e.fragments=W.config.fragments),t("history")||(e.history=!0),t("visits")||(e.visits=0),t("components")||(e.components=[]),W.pages[e.key]=e,W.pages[e.key]}function tn(e,t,n=Kt.state.key){return"location"===e?W.pages[n][e]=g(W.pages[n][e],t):"target"===e?(W.pages[n].target=ie(t),W.pages[n].selector=se(W.pages[n].target)):"components"===e?W.pages[n].components=t:W.pages[n][e]=t,W.pages[n]}function nn(e,t){let n=xe("before:cache",e,t),o="string"==typeof n?n:t;return e.type>5&&e.type>9&&(e.type=1),e.title=Ae(t),W.config.cache&&!1!==n?"snap"in e?(W.pages[e.key]=e,W.snaps[e.snap]=o,function(e){6!==e.type&&Q((()=>{let t=sn(e.snap),n="body"!==e.selector&&null!==e.selector?`${e.target.join()},${W.qs.T}`:W.qs.T,o=t.body.querySelectorAll(n),r=0===e.type?q().querySelectorAll(n):null;he(o,((t,n)=>{if(t.hasAttribute("id")){if(t.id.startsWith("t."))return}else t.setAttribute("id",`t.${le()}`),null!==r&&r[n].setAttribute("id",`t.${le()}`);e.fragments.push(t.id)})),rn(t.documentElement.outerHTML,e.snap)}))}(e),xe("after:cache",e),e):on(e,o):e}function on(e,t){let n=e.key in W.pages?W.pages[e.key]:en(e);return"string"==typeof t&&(W.snaps[n.snap]=t,e.title=Ae(t)),g(n,e)}function rn(e,t){let n=t=t?47===t.charCodeAt(0)?t in W.pages?W.pages[t].snap:null:t:W.page.snap;n?W.snaps[n]=e:j(3,"Snapshot record does not exist, update failed")}function sn(e){let t=e=e?47===e.charCodeAt(0)?W.pages[e].snap:e:W.page.snap;return we(W.snaps[t])}function an({mounted:e=null}={}){let t=S(),{a:n,p:o}=W.components;for(let r of n.values()){let{scope:n}=r;o.has(n.key)&&(null!==e&&n.mounted===e||(null===n.alias||n.alias in t?n.instanceOf in t?t[n.instanceOf].push(r):t[n.instanceOf]=[r]:t[n.alias]=[r]))}return t}function ln(e){return oe(W.pages,e)&&oe(W.pages[e],"snap")&&oe(W.snaps,W.pages[e].snap)&&"string"==typeof W.snaps[W.pages[e].snap]}function cn(e){e?"string"==typeof e?(delete W.snaps[W.pages[e].snap],delete W.pages[e]):k(e)&&me((e=>{delete W.snaps[W.pages[e].snap],delete W.pages[e]}),e):(ge(W.pages),ge(W.snaps))}var un=m.replace(/(?:https?:)?(?:\/\/(?:www\.)?|(?:www\.))/,x);function fn(e,t){let n=t?function(e){let t=g(S(e),{target:[],selector:null,cache:W.config.cache,history:!0,scrollX:0,scrollY:0,fragments:W.config.fragments});return W.config.hover&&(t.threshold=W.config.hover.threshold),W.config.proximity&&(t.proximity=W.config.proximity.distance,t.threshold=W.config.proximity.threshold),W.config.progress&&(t.progress=W.config.progress.threshold),t}(t):S(),o=e.getAttributeNames();for(let r=0,i=o.length;r<i;r++){let i=o[r];if(i.startsWith(W.qs.x)){oe(n,"data")||(n.data=S());let t=pe(i.slice(W.qs.x.length)),o=e.getAttribute(i).trim();X.test(o)?n.data[t]="NaN"===o?NaN:+o:D.test(o)?n.data[t]="true"===o:123===o.charCodeAt(0)||91===o.charCodeAt(0)?n.data[t]=K(i,o):n.data[t]=o}else{if(!W.qs.R.test(i))continue;let o=e.getAttribute(i).trim();if("href"===i)n.rev=location.pathname+location.search,t||(n.location=vn(o),n.key=n.location.pathname+n.location.search);else{let t=i.slice(i.lastIndexOf("-")+1),r=o.replace(H,x).trim();if("target"===t)n[t]="true"===r?[]:r!==x?V(r):[],n.selector=se(n[t]);else if(z.test(r)){let e=r.match(/\[?[^,'"[\]()\s]+\]?/g);n[t]=M.test(t)?e.reduce(ce(2),[]):e}else if("position"===t)if(B.test(r)){let e=r.match(B);n[`scroll${e[0].toUpperCase()}`]=+e[1],4===e.length&&(n[`scroll${e[2].toUpperCase()}`]=+e[3])}else j(3,`Invalid attribute value on <${i}>, expected: y:number or x:number`,e);else"scroll"===t?U.test(r)?n.scrollY=+r:j(3,`Invalid attribute value on <${i}>, expected: number`,e):D.test(r)&&!Y.test(i)?n[t]="true"===r:X.test(r)?n[t]=+r:("history"===t&&"push"!==r&&"replace"!==r&&j(5,`Invalid attribute value on <${i}>, expected: false, push or replace`,e),n[t]=r)}}}return n}function dn(e){let t=S();if(1===e.length&&47===e.charCodeAt(0))return t.pathname=e,t.hash=x,t.search=x,t;let n=e.indexOf("#");n>=0?(t.hash=e.slice(n),e=e.slice(0,n)):t.hash=x;let o=e.indexOf("?");return o>=0?(t.search=e.slice(o),e=e.slice(0,o)):t.search=x,t.pathname=e,t}function pn(e,t){let n=e.indexOf("/",t);if(n>t){let t=e.indexOf("#",n);return t<0?e.slice(n):e.slice(n,t)}let o=e.indexOf("?",t);if(o>t){let t=e.indexOf("#",o);return t<0?e.slice(o):e.slice(o,t)}return e.length-t===un.length?"/":null}function hn(e){let t=e.startsWith("www.")?e.slice(4):e,n=t.indexOf("/");if(n>=0){let e=t.slice(n);if(t.slice(0,n)===un)return e.length>0?dn(e):dn("/")}else{let e=t.search(/[?#]/);if(e>=0){if(t.slice(0,e)===un)return dn("/"+t.slice(e))}else if(t===un)return dn("/")}return null}function mn(e){if("string"!=typeof e||0===e.length)return!1;if(47===e.charCodeAt(0))return 47!==e.charCodeAt(1)||(e.startsWith("www.",2)?e.startsWith(un,6):e.startsWith(un,2));if(63===e.charCodeAt(0))return!0;if(e.startsWith("www."))return e.startsWith(un,4);if(e.startsWith("http")){let t=e.indexOf("/",4)+2;return e.startsWith("www.",t)?e.startsWith(un,t+4):e.startsWith(un,t)}}function gn(e){if("object"==typeof e)return e.pathname+e.search;if(e===x||"/"===e)return"/";let t=function(e){return e.startsWith("http")?1:e.startsWith("//")?2:e.startsWith("www.")?3:1}(e);if(1===t){let t=115===e.charCodeAt(4)?8:7,n=e.startsWith("www.",t)?t+4:t;return e.startsWith(un,n)?pn(e,n):null}if(2===t){let t=e.startsWith("www.",2)?6:2;return e.startsWith(un,t)?pn(e,t):null}return 3===t?e.startsWith(un,4)?pn(e,4):null:e.startsWith(un,0)?pn(e,0):null}function yn(){let{pathname:e,search:t,hash:n}=location;return S({hostname:un,origin:m,pathname:e,search:t,hash:n})}function vn(e){if(e===x)return yn();let t=function(e){return 47===e.charCodeAt(0)?47!==e.charCodeAt(1)?dn(e):hn(e.slice(2)):63===e.charCodeAt(0)?dn(location.pathname+e):e.startsWith("https:")||e.startsWith("http:")?hn(e.slice(e.indexOf("/",4)+2)):e.startsWith("www.")?hn(e):null}(e);return null===t&&j(5,`Invalid pathname: ${e}`),t.origin=m,t.hostname=un,t}function bn(e,t=6){if(e instanceof Element){let n=fn(e);return n.type=t||6,n}let n=S();return 0===e?(n.location=yn(),n.key=n.rev=gn(n.location),n.type=e,n.visits=1,W.index=n.key):7===t?(n.location=vn(e),n.key=n.rev=gn(n.location),n.type=t):(n.rev=location.pathname+location.search,n.location=vn("string"==typeof e?e:n.rev),n.key=gn(n.location),n.type=t),n}var $n=function(e){if(!function(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.button>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}(e))return;let t=Ct(e.target,W.qs.C);if(!t)return;let n=gn(t.href);if(null===n)return;let o=n===W.page.key,r=()=>{j(3,`Drag occurance deteced, cancelled visit: ${n}`),$n.drag=!0,t.removeEventListener(`${h}move`,r)};if(t.addEventListener(`${h}move`,r,{once:!0}),!0===$n.drag)return $n.drag=!1,$n(e);if(t.removeEventListener(`${h}move`,r),!xe("visit",e))return;let i=(e,t=!0)=>{W.pages[e.key].ts=te(),W.pages[e.key].visits=e.visits+1,W.pages[e.rev].scrollX=window.scrollX,W.pages[e.rev].scrollY=window.scrollY,st("onvisit"),o?(j(1,`URL Pathname matches current route: ${n}`),Vt(e)):(Gt(W.pages[e.rev]),t?(Jt(e),Vt(e)):wn(e))};if(It(),zt(),Mt(),ln(n)){let e=on(fn(t,W.pages[n]));t.onclick=t=>{t.preventDefault(),i(e)}}else if(R.f.has(n)){dt(n),j(2,`Request in transit: ${n}`);let e=W.pages[n];t.onclick=t=>{t.preventDefault(),i(e,!1)}}else{dt(),ut(n);let e=en(bn(t,6));mt(e),t.onclick=t=>{t.preventDefault(),i(e,!1)}}};async function wn(e){e.progress&&ye.start(e.progress);let t=await ht(e);t?(Jt(t),Vt(t)):location.assign(e.key)}async function kn(e,t){if(!t)return wn(W.pages[e]);{"string"==typeof t.cache&&("clear"===t.cache?cn():cn(t.key)),t.progress&&ye.start(t.progress);let e=await mt(t);e?(Jt(e),Vt(e)):location.assign(t.key)}}var An=S({$:W,Component:Ie,on:Ee,off:Ce,observe:function(){It(),Rt(),Mt(),jt(),zt(),Ft(),lt(),at(),Xt(),Ut()},connect:function(e={}){if(!1===p)return j(5,"Invalid runtime environment: window is undefined.");if(!An.supported)return j(5,"Browser does not support SPX");if(!window.location.protocol.startsWith("http"))return j(5,"Invalid protocol, SPX expects HTTPS or HTTP protocol");(function(e=S()){(function(){if(W.patched)return;W.patched=!0;let e=Element.prototype.setAttribute,t=document.createElement("i");Element.prototype.setAttribute=function(n,o){if(n.indexOf("@")<0)return e.call(this,n,o);t.innerHTML=`<i ${n}="${o}"></i>`;let r=t.firstElementChild.getAttributeNode(n);t.firstElementChild.removeAttributeNode(r),this.setAttributeNode(r)}})(),$(W,{ready:{get:()=>"complete"===document.readyState},types:{get:()=>S({INITIAL:0,PREFETCH:1,FETCH:2,PRELOAD:3,REVERSE:4,POPSTATE:5,VISIT:6,HYDRATE:7,CAPTURE:8,RELOAD:9,HOVER:10,INTERSECT:11,PROXIMITY:12})}}),"components"in e&&(be(e.components),delete e.components),g(W.config,function(e){for(let t of["hover","intersect","proximity","progress"])oe(e,t)&&(!1===e[t]?W.config[t]=!1:"object"==typeof e[t]&&g(W.config[t],e[t]),delete e[t]);return e}(e));let t=W.config.schema,n="spx"===t?"spx":t.endsWith("-")?t:null===t?x:`${t}-`,o=`:not([${n}disable]):not([href^=\\#])`,r=`not([${n}eval=false])`,i=function(e,t,n){if("eval"in e)if(e.eval){if("object"==typeof e.eval){let t=g(W.config.eval,e.eval);W.eval=!!(t.link||t.meta||t.script||t.style)}}else W.eval=!1;return e=>{if(!1===W.eval||!1===W.config.eval[e])return`${e}[${t}eval]:${n}`;if(!0===W.config.eval[e])return`${e}:${n}`;let o="link"===e?`${e}[rel=stylesheet]:${n}`:"script"===e?`${e}:${n}:not([${t}eval=hydrate])`:`${e}:${n}`;return null===W.config.eval[e]?o:k(W.config.eval[e])?W.config.eval[e].length>0?W.config.eval[e].map((e=>`${e}:${n}`)).join(","):(j(3,`Missing eval ${e} value, SPX will use defaults`),o):void j(4,`Invalid eval ${e} value, expected boolean or array`)}}(e,n,r);W.config.fragments=function(e){let t=[];if(!("fragments"in e&&k(e.fragments)&&e.fragments.length>0))return["body"];for(let n of e.fragments){let e=n.charCodeAt(0);46!==e&&91!==e?35===e?t.push(n.slice(1).trim()):t.push(n.trim()):j(3,[`Invalid fragment selector "${n}" provided. Fragments must be id annotated values.`,"Use spx-target attributes for additional fragment selections."])}return t}(e),W.config.schema=n,W.config.index=null,W.memory.bytes=0,W.memory.visits=0,W.memory.limit=W.config.maxCache,g(W.qs,{R:new RegExp(`^href|${n}(hydrate|append|prepend|target|progress|threshold|scroll|position|proximity|hover|cache|history)$`,"i"),k:new RegExp(`${n}(?:node|bind|component)|@[a-z]|[a-z]:[a-z]`,"i"),O:new RegExp(`^${n}[a-zA-Z0-9-]+:`,"i"),y:`${n}target`,T:`[${n}target]:not([${n}target=false])`,m:`${n}morph`,P:`${n}eval`,L:`[${n}intersect]${$e(n,"intersect")}`,I:`[${n}track]:not([${n}track=false])`,E:`${n}component`,b:`${n}node`,N:`${n}bind`,e:"data-spx",C:W.config.annotate?`a[${n}link]${o}`:`a${o}`,M:i("script"),S:i("style"),w:i("link"),q:i("meta"),D:`script[${n}eval=hydrate]:${r}`,W:`link[rel=stylesheet][href*=\\.css]:${r},script[src*=\\.js]:${r}`,x:`${n}data:`,A:`a[${n}proximity]${o}${$e(n,"proximity")}`,H:`a${o}${$e(n,"intersect")}`,g:!1!==W.config.hover&&"href"===W.config.hover.trigger?`a${o}${$e(n,"hover")}`:`a[${n}hover]${o}${$e(n,"hover")}`}),ye.style(W.config.progress)})(e),W.config.globalThis&&!1===oe(window,"spx")&&re(window,"spx",An);let t=function(){let e=function(e){if(!W.observe.history)return Kt.scrollRestoration&&(Kt.scrollRestoration="manual"),addEventListener("popstate",Qt,!1),W.observe.history=!0,"object"==typeof e&&0===e.type?function(e){return Zt(e.key)?(scrollTo(Kt.state.scrollX,Kt.state.scrollY),g(e,Kt.state)):Gt(e),e}(e):e}(en(bn(0)));$(W,{prev:{get:()=>W.pages[Kt.state.rev]},page:{get:()=>W.pages[Kt.state.key]},snapDom:{get:()=>we(W.snaps[W.page.snap])}});let t=()=>{let t=nn(e,ke());return W.observe.hrefs||($n.drag=!1,"mouseOnly"===d?addEventListener(`${h}down`,$n,!1):("touchOnly"===d||addEventListener(`${h}down`,$n,!1),addEventListener("touchstart",$n,!1)),W.observe.hrefs=!0),De(),!1===W.config.manual&&(Rt(),jt(),Ft(),at(),Ut()),Q((()=>{tn("type",6),pt(t),function(e){if(null!==W.config.preload){if(k(W.config.preload)){let e=W.config.preload.filter((e=>{let t=bn(e,3);return t.key!==e&&mt(en(t))}));return Promise.allSettled(e)}if("object"==typeof W.config.preload&&oe(W.config.preload,e.key)){let t=W.config.preload[e.key].map((e=>mt(en(bn(e,3)))));Promise.allSettled(t)}}}(t)})),xe("x"),t};return new Promise((e=>{let{readyState:n}=document;if("interactive"===n||"complete"===n)return e(t());addEventListener("DOMContentLoaded",(()=>e(t())))}))}();return async function(e){let n=await t;if("AsyncFunction"===e.constructor.name)try{await e(n)}catch(e){j(3,"Connection Error",e)}else e(n);j(2,"Connection Established")}},component:function(e){return an()[e][0]},capture:function(e){let t=function(e){if(!e){if(null===Kt.state)return void j(3,"Missing history state reference, page cannot be returned");e=Kt.state.key}if(e in W.pages)return W.pages[e];j(5,`No page record exists for: ${e}`)}();if(!t)return;let n=sn();if(1===(e=k(e)?e:t.target).length&&"body"===e[0])return Et(n.body,q()),void on(t,ke(n));let o=e.join(","),r=q().querySelectorAll(o);he(n.body.querySelectorAll(o),((e,t)=>{Et(e,r[t])})),on(t,ke(n))},form:async function(e,t){let n=new FormData;for(let e in t.data)n.append(e,t.data[e]);return await ct(e,{method:t.method,body:n})},render:async function(e,t,n){let o=W.page,r=bn(e);r.location.origin!==m&&j(5,"Cross origin fetches are not allowed");let i=await ct(r.key,{type:"document"});if(i||j(5,`Fetch failed for: ${r.key}`,i),await n.call(o,i),"replace"===t){o.title=i.title;let e=on(g(o,r),ke(i));return Gt(e),e}return Vt(nn(r,ke(i)))},session:function(){return $(S(),{config:{get:()=>W.config},snaps:{get:()=>W.snaps},pages:{get:()=>W.pages},observers:{get:()=>W.observe},components:{get:()=>W.components},fragments:{get:()=>W.fragments},memory:{get(){let e=W.memory;return e.size=function(e){return e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":e<1073741824?(e/1048576).toFixed(1)+" MB":(e/1073741824).toFixed(1)+" GB"}(e.bytes),e}}})},reload:async function(){let e=W.pages[Kt.state.key];e.type=9;let t=await mt(e);return t?(j(2,"Triggered reload, page was re-cached"),Vt(t)):(j(3,"Reload failed, triggering refresh (cache will purge)"),location.assign(e.key))},fetch:async function(e){let t=bn(e,2);t.location.origin!==m&&j(5,"Cross origin fetches are not allowed");let n=await ct(t.key);if(n)return n},clear:cn,hydrate:async function(e,t){let n=bn(e,7);if(mt(n),k(t)){n.hydrate=[],n.preserve=[];for(let e of t)33===e.charCodeAt(0)?n.preserve.push(e.slice(1)):n.hydrate.push(e)}else n.hydrate=W.config.fragments;let o=await ht(n);if(o){let{key:e}=Kt.state;if(Gt(o),Vt(o),n.key!==e){W.index===e&&(W.index=n.key);for(let t in W.pages)W.pages[t].rev===e&&(W.pages[t].rev=n.key);cn(e)}}return sn(o.key)},prefetch:async function(e){let t=bn(e,1);if(ln(t.key))return void j(3,`Cache already exists for ${t.key}, prefetch skipped`);let n=await mt(en(t));if(n)return n;j(5,`Prefetch failed for ${t.key}`)},visit:async function(e,t){let n=bn(e),o="object"==typeof t?g(n,t):n;return ln(n.key)?kn(n.key,on(o)):kn(n.key,en(o))},disconnect:function(){W.observe.history&&(Kt.scrollRestoration&&(Kt.scrollRestoration="auto"),removeEventListener("popstate",Qt,!1),removeEventListener("load",_t,!1),W.observe.history=!1),W.observe.hrefs&&("mouseOnly"===d?removeEventListener(`${h}down`,$n,!1):("touchOnly"===d||removeEventListener(`${h}down`,$n,!1),removeEventListener("touchstart",$n,!1)),W.observe.hrefs=!1),Xt(),It(),Mt(),zt(),W.config.components&&(lt(),rt(),W.components.u.clear()),cn(),W.config.globalThis&&delete window.spx,j(2,"Disconnected")},register:function(...e){if("string"==typeof e[0])e.length>2&&j(5,[`Named component registration expects 2 parameters, recieved ${e.length}.`,'Registry should follow this structure: spx.register("identifer", YourComponent)'],e),be({[Ne[0]]:e[1]});else for(let t of e)if(k(t))for(let e of t)"string"==typeof e[0]?be({[e[0]]:e[1]}):"function"==typeof e&&be({[ve(e)]:e},!0);else{let e=typeof t;"function"===e?be({[ve(t)]:t},!0):"object"===e&&be(t)}W.ready?at():Ee("x",(function e(){at(),Ce("x",e)}))},get config(){return W.config},supported:!!(p&&window.history.pushState&&window.requestAnimationFrame&&window.DOMParser&&window.Proxy),history:S({get state(){return Kt.state},api:Kt,push:Jt,replace:Gt,has:Zt,reverse:function(){return null!==Kt.state&&"rev"in Kt.state&&Kt.state.key!==Kt.state.rev}})}),xn=An;export{xn as default};