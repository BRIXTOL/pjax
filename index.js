var wr=Object.defineProperty;var Mr=(e,t)=>{for(var r in t)wr(e,r,{get:t[r],enumerable:!0});};var E=(e,t,r)=>new Promise((o,s)=>{var i=f=>{try{a(r.next(f));}catch(l){s(l);}},c=f=>{try{a(r.throw(f));}catch(l){s(l);}},a=f=>f.done?o(f.value):Promise.resolve(f.value).then(i,c);a((r=r.apply(e,t)).next());});var q=typeof window!="undefined"?window:{screen:{},navigator:{}},fe=(q.matchMedia||function(){return {matches:!1}}).bind(q),Or={get passive(){return !0}},Rt=function(){};q.addEventListener&&q.addEventListener("p",Rt,Or);q.removeEventListener&&q.removeEventListener("p",Rt,!1);var Je="ontouchstart"in q,Sr="TouchEvent"in q,Ze=Je||Sr&&fe("(any-pointer: coarse)").matches,Lt=(q.navigator.maxTouchPoints||0)>0||Ze,$t=q.navigator.userAgent||"",qr=fe("(pointer: coarse)").matches&&/iPad|Macintosh/.test($t)&&Math.min(q.screen.width||0,q.screen.height||0)>=768,Hr=(fe("(pointer: coarse)").matches||!fe("(pointer: fine)").matches&&Je)&&!/Windows.*Firefox/.test($t),kr=fe("(any-pointer: fine)").matches||fe("(any-hover: hover)").matches||qr||!Je,Ee=Lt&&(kr||!Hr)?"hybrid":Lt?"touchOnly":"mouseOnly";var Qe=typeof window!="undefined";"content"in document.createElement("template");document.createRange&&"createContextualFragment"in document.createRange();var M=Ze?"pointer":"mouse",re=window.location.origin,A=Object.assign,et=Object.defineProperty,qe=Object.defineProperties,Dr=Object.create,H=Array.isArray,He=Array.from,I="",R=()=>document.body,p=(e,t=Dr(null))=>e?A(t,e):t,le=()=>new Set,Y=()=>new Map;var x=class extends XMLHttpRequest{constructor(){super(...arguments);this.key=null;}};x.request=Y(),x.transit=Y(),x.timeout=Y();var n=p({loaded:!1,index:"",qs:p({component:p(),script:p(),tags:p(),href:p()}),config:p({fragments:["body"],timeout:3e4,globalThis:!0,schema:"spx-",manual:!1,logLevel:2,cache:!0,maxCache:100,preload:null,annotate:!1,eval:p({script:null,style:null,link:null,meta:!1}),hover:p({trigger:"href",threshold:250}),intersect:p({rootMargin:"0px 0px 0px 0px",threshold:0}),proximity:p({distance:75,threshold:250,throttle:500}),progress:p({bgColor:"#111",barHeight:"3px",minimum:.08,easing:"linear",speed:200,threshold:500,trickle:!0,trickleSpeed:200})}),events:p(),observe:p(),memory:p(),pages:p(),snaps:p(),components:p({registry:p(),connected:le(),instances:p(),refs:p()}),tracked:le(),resources:Y(),styles:le()});var wt=/(?:https?:)?(?:\/\/(?:www\.)?|(?:www\.))/;var Mt=/^(?:application|text)\/(?:x-)?(?:ecma|java)script|text\/javascript$/;var Ct=/\b(?:append|prepend)/,Ot=/\s+/g,Te=/^\b(?:true|false)$/i,ke=/^\d*\.?\d+$/,be=/^(?:[.-]?\d*\.?\d+|NaN)$/;var St=/\b(?:intersect|hover|proximity)\b/;var tt=/\[?[^,'"[\]()\s]+\]?/g;var qt=/\[(['"]?.*['"]?,?)\]/,rt=/[xy]\s*|\d*\.?\d+/gi;function kt(e,t){return `${e.toLowerCase()}[data-spx="${t}"]`}function me(e,t){try{let r=(t||e).replace(/\\'|'/g,o=>o[0]==="\\"?o:'"').replace(/([{,])\s*(.+?)\s*:/g,'$1 "$2":');return JSON.parse(r)}catch(r){return m(5,`Invalid JSON expression in attribute value:

`+JSON.stringify(e||t,null,2)+`

`,r),t}}function Pe(e){return e[e.length-1]}function Dt(e){return e.trim().replace(/\s+/," ").split(/[|, ]/).map(st)}function Wt(e){return e.replace(/[\s .]+/g,".").replace(/\s+/g," ").trim().split(/[ ,]/)}function Vt(e){return be.test(e)?e==="NaN"?NaN:+e:Te.test(e)?e==="true":e.charCodeAt(0)===123||e.charCodeAt(0)===91?me(e):e}function Xt(){return new Promise(e=>setTimeout(()=>e(),0))}function De(e){setTimeout(()=>e(),1);}function jt(e){let t=document.createElement("textarea");return t.innerHTML=e,t.value}function pe(){return new Date().getTime()}function m(e,t,r){let{logLevel:o}=n.config;if(e===1&&o===1||e===2&&(o===1||o===2))console.info("SPX: "+t);else if(e===3&&o<4)console.warn("SPX: "+t);else if(e===5||e===4){r?console.error("SPX: "+t,r):console.error("SPX: "+t);try{throw e===4?new TypeError(t):new Error(t)}catch(s){}}}function We(e){return t=>t?typeof t=="string"?u(e,t):t.every(r=>r in e):!1}function u(e,t){return e?t in e:!1}function ee(e,t,r){if(arguments.length>1)et(e,t,{get:()=>r});else return (o,s,i)=>{if(u(e,o))return;let c=()=>s;return et(e,o,i?A(i,{get:c}):{get:c})}}function ot(e){return u(e,"target")?e.target.length===1&&e.target[0]==="body"?e.target:[].concat(n.config.fragments,e.target).filter((t,r,o)=>t!=="body"&&t!==I&&t.indexOf(",")===-1?o.indexOf(t)===r:!1):n.config.fragments.length===1&&n.config.fragments[0]==="body"?["body"]:[...n.config.fragments]}function Ft(...e){return e.join(I)}var te=function e(t=5){let r=Math.random().toString(36).slice(-t);return e.o.has(r)?e(t):(e.o.add(r),r)};te.o=le();function Kt(e=2){return (t,r)=>{let o=t.length;return (o<1||t[o-1].length===e?t.push([r]):t[o-1].push(r))&&t}}function nt(e){return e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":e<1073741824?(e/1048576).toFixed(1)+" MB":(e/1073741824).toFixed(1)+" GB"}function Yt(e){return e[0].toUpperCase()+e.slice(1)}function st(e){return /[_-]/.test(e)?e.replace(/([_-]+).{1}/g,(t,r)=>t[r.length].toUpperCase()):e}function ue(e,t){let r=typeof e=="string"?R().querySelectorAll(e):e,o=r.length;if(o!==0)for(let s=0;s<o&&t(r[s],s)!==!1;s++);}function k(e,t){if(arguments.length===1)return o=>k(e,o);let r=t.length;if(r!==0)for(let o=0;o<r;o++)e(t[o],o,t);}function it(e){for(let t in e)delete e[t];}function Vr(){let e=[],t=document.createElement("div"),r=null,o,s=null,i=({bgColor:d,barHeight:y,speed:K,easing:F})=>{t.style.cssText=Ft("pointer-events:none;",`background-color:${d};`,`height:${y};`,"position:fixed;","z-index:9999999;","top:0;","left:0;","width:100%;","will-change:opacity,transform;",`transition:transform ${K}ms ${F};`);},c=d=>(-1+d)*100,a=(d,y,K)=>d<y?y:d>K?K:d,f=()=>s||(t.style.setProperty("transform",`translateX(${c(r||0)}%)`),s=R().appendChild(t),t),l=()=>{let d=R();if(d.contains(s)){let y=s.animate({opacity:["1","0"]},{easing:"ease-out",duration:100});y.onfinish=()=>{d.removeChild(s),s=null;};}else s=null;},g=()=>{let d=e.shift();d&&d(g);},h=d=>{e.push(d),e.length===1&&g();},T=d=>{d=a(d,n.config.progress.minimum,1),r=d===1?null:d;let y=f();h(K=>{y.style.setProperty("transform",`translateX(${c(d)}%)`),d===1?setTimeout(()=>{l(),K();},n.config.progress.speed*2):setTimeout(K,n.config.progress.speed);});},W=d=>{let y=r;if(!y)return b();if(y<1)return typeof d!="number"&&(y>=0&&y<.2?d=.1:y>=.2&&y<.5?d=.04:y>=.5&&y<.8?d=.02:y>=.8&&y<.99?d=.005:d=0),y=a(y+d,0,.994),T(y)},xe=()=>{setTimeout(()=>{r&&(W(),xe());},n.config.progress.trickleSpeed);};function b(d){n.config.progress&&(o=setTimeout(()=>{r||T(0),n.config.progress.trickle&&xe();},d||0));}function j(d){clearTimeout(o),!(!d&&!r)&&(W(.3+.5*Math.random()),T(1));}return {start:b,done:j,style:i}}var oe=Vr();function Ve(e){for(let t in e){let r=e[t],o=t.toLowerCase();u(r,"connect")||(r.connect={state:{},nodes:[]}),u(r.connect,"state")||(r.connect.state={}),u(r.connect,"nodes")||(r.connect.nodes=[]),u(n.components.registry,o)||(ee(n.components.registry,o,r),m(1,`${t} component registered under: ${o}`));}}function Xr(e){for(let t of ["hover","intersect","proximity","progress"])u(e,t)&&(e[t]===!1?n.config[t]=!1:typeof e[t]=="object"&&A(n.config[t],e[t]),delete e[t]);return e}function at(e={}){u(e,"components")&&(Ve(e.components),delete e.components),A(n.config,Xr(e)),u(e,"eval")&&A(n.config.eval,e.eval),n.config.index=null;let t=n.config.schema,r=n.config.schema=t==="spx"?"spx":t.endsWith("-")?t:t===null?I:`${t}-`,o=`:not([${r}disable]):not([href^="#"])`,s=`not([${r}eval=false])`;n.qs.n=`${r}target`,n.qs.s=`${r}morph`,n.qs.x=`${r}render`,n.qs.E=`[${r}eval]:not([${r}eval=false]):not(script)`,n.qs.a=new RegExp(`^href|${r}(hydrate|append|prepend|target|progress|threshold|scroll|position|proximity|hover|cache)$`,"i"),n.qs.c=`[${r}intersect]${c("intersect")}`,n.qs.f=`[${r}track]:not([${r}track=false])`,n.qs.component.l=`${r}component`,n.qs.component.m=`${r}node`,n.qs.component.p=`${r}bind`,n.qs.component.t=new RegExp(`${r}(?:node|bind|component)|@[a-z]|[a-z]:[a-z]`,"i"),n.qs.component.u=new RegExp(`^${r}[a-zA-Z0-9-]+:`,"i"),n.qs.component.T="data-spx",n.qs.tags.d=n.config.annotate?`a[${r}link]${o}`:`a${o}`,n.qs.tags.h=i("script"),n.qs.tags.b=i("style"),n.qs.tags.P=i("link"),n.qs.tags.I=i("meta"),n.qs.script.g=`script[${r}eval=hydrate]:not([${r}eval=false])`,n.qs.href.r=`${r}data:`,n.qs.href.i=`a[${r}proximity]${o}${c("proximity")}`,n.qs.href.y=`a${o}${c("intersect")}`,n.qs.href.e=n.config.hover!==!1&&n.config.hover.trigger==="href"?`a${o}${c("hover")}`:`a[${r}hover]${o}${c("hover")}`,n.memory.bytes=0,n.memory.visits=0,n.memory.limit=n.config.maxCache,oe.style(n.config.progress);function i(a){let f=a==="link"?`${a}[rel=stylesheet]:${s},${a}[rel~=preload]:${s}`:a==="script"?`${a}:${s}:not([${r}eval=hydrate])`:`${a}:${s}`;if(n.config.eval[a]===!1||n.config.eval[a]===null)return f;if(n.config.eval[a]===!0)return `${a}[${r}eval]:${s}`;if(H(n.config.eval[a]))return n.config.eval[a].length>0?n.config.eval[a].map(l=>`${l}:${s}`).join(","):(m(3,`Missing eval ${a} option, SPX will use defaults`),f);m(4,`Invalid eval ${a} option, expected boolean or array`);}function c(a){let f=`:not([${r}${a}=false]):not([${r}link])`;switch(a.charCodeAt(0)){case 104:return `${f}:not([${r}proximity]):not([${r}intersect])`;case 105:return `${f}:not([${r}hover]):not([${r}proximity])`;case 112:return `${f}:not([${r}intersect]):not([${r}hover])`}}}var C=re.replace(wt,I);function lt(e,t){let r=t||p();for(let{nodeName:o,nodeValue:s}of e.attributes)if(o.startsWith(n.qs.href.r)){u(r,"data")||(r.data=p());let i=st(o.slice(n.qs.href.r.length)),c=s.trim();be.test(c)?r.data[i]=c==="NaN"?NaN:+c:Te.test(c)?r.data[i]=c==="true":c.charCodeAt(0)===123||c.charCodeAt(0)===91?r.data[i]=me(o,c):r.data[i]=c;}else {if(!n.qs.a.test(o))continue;if(o==="href")r.rev=location.pathname+location.search,t||(r.location=ft(s),r.key=r.location.pathname+r.location.search);else {let i=o.slice(o.lastIndexOf("-")+1),c=s.replace(Ot,I).trim();if(qt.test(c))r[i]=Ct.test(i)?c.match(tt).reduce(Kt(2),[]):c.match(tt);else if(i==="position")if(rt.test(c)){let a=c.match(rt);r[`scroll${a[0].toUpperCase()}`]=+a[1],a.length===4&&(r[`scroll${a[2].toUpperCase()}`]=+a[3]);}else m(3,`Invalid attribute value on ${o}, expects: y:number or x:number`);else i==="scroll"?ke.test(c)?r.scrollY=+c:m(3,`Invalid attribute value on ${o}, expects: number`):i==="target"?c==="true"?r[i]=[]:r[i]=c!==I?c.split(","):[]:Te.test(c)?St.test(o)||(r[i]=c==="true"):be.test(c)?r[i]=+c:r[i]=c;}}return r}function de(e){let t=p();if(e.length===1&&e.charCodeAt(0)===47)return t.pathname=e,t.hash=I,t.search=I,t;let o=e.indexOf("#");o>=0?(t.hash=e.slice(o),e=e.slice(0,o)):t.hash=I;let s=e.indexOf("?");return s>=0?(t.search=e.slice(s),e=e.slice(0,s)):t.search=I,t.pathname=e,t}function Xe(e,t){let r=e.indexOf("/",t);if(r>t){let s=e.indexOf("#",r);return s<0?e.slice(r):e.slice(r,s)}let o=e.indexOf("?",t);if(o>t){let s=e.indexOf("#",o);return s<0?e.slice(o):e.slice(o,s)}return e.length-t===C.length?"/":null}function ct(e){let t=e.startsWith("www.")?e.slice(4):e,r=t.indexOf("/");if(r>=0){let o=t.slice(r);if(t.slice(0,r)===C)return o.length>0?de(o):de("/")}else {let o=t.search(/[?#]/);if(o>=0){if(t.slice(0,o)===C)return de("/"+t.slice(o))}else if(t===C)return de("/")}return null}function jr(e){return e.startsWith("http")?1:e.startsWith("//")?2:e.startsWith("www.")?3:0}function mt(e){if(typeof e!="string"||e.length===0)return !1;if(e.charCodeAt(0)===47)return e.charCodeAt(1)!==47?!0:e.startsWith("www.",2)?e.startsWith(C,6):e.startsWith(C,2);if(e.charCodeAt(0)===63)return !0;if(e.startsWith("www."))return e.startsWith(C,4);if(e.startsWith("http")){let t=e.indexOf("/",4)+2;return e.startsWith("www.",t)?e.startsWith(C,t+4):e.startsWith(C,t)}}function Fr(e){return e.charCodeAt(0)===47?e.charCodeAt(1)!==47?de(e):ct(e.slice(2)):e.charCodeAt(0)===63?de(location.pathname+e):e.startsWith("https:")||e.startsWith("http:")?ct(e.slice(e.indexOf("/",4)+2)):e.startsWith("www.")?ct(e):null}function S(e){if(typeof e=="object")return e.pathname+e.search;if(e===I)return "/";let t=jr(e);if(t===1){let r=e.charCodeAt(4)===115?8:7,o=e.startsWith("www.",r)?r+4:r;return e.startsWith(C,o)?Xe(e,o):null}if(t===2){let r=e.startsWith("www.",2)?6:2;return e.startsWith(C,r)?Xe(e,r):null}return t===3?e.startsWith(C,4)?Xe(e,4):null:e.startsWith(C,0)?Xe(e,0):null}function Bt(){return p({hostname:C,origin:re,pathname:location.pathname,search:location.search,hash:location.hash})}function ft(e){if(e===I)return Bt();let t=Fr(e);return t===null&&m(5,`Invalid pathname: ${e}`),t.origin=re,t.hostname=C,t}function P(e,t=6){if(e instanceof Element){let o=lt(e);return o.type=t||6,o}let r=p();return e===0?(r.location=Bt(),r.key=S(r.location),r.rev=r.key,r.type=e,r.visits=1):t===7?(r.location=ft(e),r.key=S(r.location),r.rev=r.key,r.type=t):(r.rev=location.pathname+location.search,r.location=ft(typeof e=="string"?e:r.rev),r.key=S(r.location),r.type=t),r}function he(e){return new DOMParser().parseFromString(e,"text/html")}function pt(e){let t=e.indexOf("<title");if(t===-1)return I;let r=e.indexOf(">",t)+1,o=e.indexOf("</title",r);return jt(e.slice(r,o).trim())}function $(e,...t){let r=e==="before:cache";r&&(t[1]=he(t[1]));let o=!0;return k(s=>{let i=s.apply(null,t);r?i instanceof Document?o=i.documentElement.outerHTML:typeof o!="string"&&(o=i!==!1):o=i!==!1;},n.events[e]||[]),o}function Ut(e,t,r){return u(n.events,e)||(n.events[e]=[]),n.events[e].push(r?t.bind(r):t)-1}function _t(e,t){if(u(n.events,e)){let r=n.events[e];if(r&&typeof t=="number")r.splice(t,1),m(2,`Removed ${e} event listener (id: ${t})`),r.length===0&&delete n.events[e];else {let o=[];if(r&&t)for(let s=0,i=r.length;s<i;s++)r[s]!==t?o.push(r[s]):m(2,`Removed ${e} event listener (id: ${s})`);o.length?n.events[e]=o:delete n.events[e];}}else m(3,`There are no ${e} event listeners`);return this}function Ie(e,{method:t="GET",body:r=null,headers:o=null,type:s="text"}={}){return new Promise(function(i,c){let a=new x;if(a.key=e,a.responseType=s,a.open(t,e),a.setRequestHeader("spx-request","true"),o!==null)for(let f in o)a.setRequestHeader(f,o[f]);a.onloadstart=function(){x.request.set(this.key,a);},a.onload=function(){i(this.response);},a.onerror=function(){c(this.statusText);},a.onabort=function(){x.timeout.delete(this.key),x.transit.delete(this.key),x.request.delete(this.key);},a.onloadend=function(f){x.request.delete(this.key),n.memory.bytes=n.memory.bytes+f.loaded,n.memory.visits=n.memory.visits+1;},a.send(r);})}function je(e){return x.timeout.has(e)?(clearTimeout(x.timeout.get(e)),x.timeout.delete(e)):!0}function Fe(e,t,r){x.timeout.has(e)||w(e)||x.timeout.set(e,setTimeout(t,r));}function ut(e){for(let[t,r]of x.request)e!==t&&(r.abort(),m(3,`Pending request aborted: ${t}`));}function zt(e){if(n.config.preload!==null){if(H(n.config.preload)){let t=n.config.preload.filter(r=>{let o=P(r,3);return o.key!==r?L(N(o)):!1});return Promise.allSettled(t)}else if(typeof n.config.preload=="object"&&u(n.config.preload,e.key)){let t=n.config.preload[e.key].map(r=>L(N(P(r,3))));return Promise.allSettled(t)}}}function Ke(e){return E(this,null,function*(){let t=N(P(e,4));yield Xt(),L(t).then(r=>{r?m(2,`Reverse fetch completed: ${r.key}`):m(3,`Reverse fetch failed: ${e}`);});})}function Ne(e){return E(this,null,function*(){if(!x.transit.has(e.key))return e;let t=yield x.transit.get(e.key);return x.transit.delete(e.key),x.timeout.delete(e.key),ge(e,t)})}function L(e){return E(this,null,function*(){return x.request.has(e.key)&&e.type!==7?(e.type===4&&x.request.has(e.rev)?(x.request.get(e.rev).abort(),m(3,`Request aborted: ${e.rev}`)):m(3,`Request in transit: ${e.key}`),!1):$("fetch",e)?(x.transit.set(e.key,Ie(e.key)),Ne(e)):(m(3,`Request cancelled via dispatched event: ${e.key}`),!1)})}function Kr(e){return new Promise((t,r)=>{let o=document.createElement("script");o.addEventListener("error",r,{once:!0}),o.async=!1,o.text=e.target.text;for(let{nodeName:s,nodeValue:i}of e.target.attributes)o.setAttribute(s,i);document.contains(e.target)?e.target.replaceWith(o):(document.head.append(o),e.external?o.addEventListener("load",()=>o.remove(),{once:!0}):o.remove()),e.external&&o.addEventListener("load",()=>t(),{once:!0}),t();})}function Yr(e){if(!e.hasAttribute("src")&&!e.text)return;let t=e.type?e.type.trim().toLowerCase():"text/javascript",r=Mt.test(t)?1:t==="module"?2:NaN,o=p();return o.blocking=!0,o.evaluate=!1,o.external=!1,isNaN(r)||e.noModule&&r===1||(e.src&&(o.external=!0),(r!==1||o.external&&(e.hasAttribute("async")||e.defer))&&(o.blocking=!1),o.evaluate=!0,o.target=e),o}function Gt(e){return E(this,null,function*(){try{let t=Kr(e);e.blocking&&(yield t);}catch(t){console.error(t);}})}function Jt(e){return E(this,null,function*(){let r=He(e,Yr).filter(o=>o.evaluate).reduce((o,s)=>E(this,null,function*(){return s.external?Promise.all([o,Gt(s)]):(yield o,yield Gt(s))}),Promise.resolve());yield Promise.race([r]);})}function Zt(e){let t=Le(e.target,n.qs.href.e);if(!t)return;let r=P(t,10);if(w(r.key)||x.timeout.has(r.key))return;t.addEventListener(`${M}leave`,Qt,{once:!0});let o=N(r),s=o.threshold||n.config.hover.threshold;Fe(r.key,function(){$("prefetch",t,r)&&L(o).then(function(){x.timeout.delete(r.key),er(t);});},s);}function Qt(e){let t=Le(e.target,n.qs.href.e);t&&je(S(t.href));}function Br(e){e.addEventListener(`${M}enter`,Zt);}function er(e){e.removeEventListener(`${M}enter`,Zt),e.removeEventListener(`${M}leave`,Qt);}function Ae(){!n.config.hover||n.observe.hover||(k(Br,Re(n.qs.href.e)),n.observe.hover=!0);}function se(){n.observe.hover&&(k(er,Re(n.qs.href.e)),n.observe.hover=!1);}var ie;function Ur(e){return E(this,null,function*(){if(e.isIntersecting){let t=P(e.target,11);if(!$("prefetch",e.target,t))return ie.unobserve(e.target);(yield L(N(t)))?ie.unobserve(e.target):(m(3,`Prefetch will retry at next intersect for: ${t.key}`),ie.observe(e.target));}})}function $e(){if(!n.config.intersect||n.observe.intersect)return;ie||(ie=new IntersectionObserver(k(Ur),n.config.intersect));let e=k(r=>ie.observe(r)),t=tr(n.qs.c,n.qs.href.y);e(t),n.observe.intersect=!0;}function ae(){n.observe.intersect&&(ie.disconnect(),n.observe.intersect=!1);}var Ye={};Mr(Ye,{connect:()=>Me,disconnect:()=>vt});function ye(e,{method:t,params:r}){let o=e[t];return s=>(r&&ee(s,"attrs",r),o.call(e,s))}var z=Y();function rr(e,t){t(e);let r,o;for(e.firstElementChild&&(o=0,r=e.children[o]);r;)rr(r,t),e.nodeName==="svg"?(o=e.childElementCount,r=e.children[o]):r=e.children[++o];}function we(e,t,r){return n.components.refs[t]=r,e.dataset.spx=e.dataset.spx?`${e.dataset.spx},${t}`:t,z.set(t,e),t}function yt(e,t){let r=p();return r.instanceOf=e,r.key=`c.${te()}`,r.state=p(),r.events=p(),r.nodes=p(),r.binds=p(),r.dom=t?we(t,r.key,r.key):null,r}function gt(e,t,r){let o=Wt(t);for(let s=0,i=o.length;s<i;s++){let c=o[s],[a,f]=c.split(".");e.has(a)?r(Pe(e.get(a)),f.trim(),c):(e.set(a,[yt(a)]),r(e.get(a)[0],f.trim(),c));}}function _r(e,t){if(n.components.connected.has(e))return;let{attributes:r}=e,o=r.length;if(o===0||o===1&&n.qs.component.t.test(r[0].name)===!1||o===2&&n.qs.component.t.test(r[0].name)===!1&&n.qs.component.t.test(r[1].name)===!1)return;let s=e.getAttribute(n.qs.component.l);if(!s)return i(e);console.log(e),k(c=>{if(!u(n.components.registry,c))m(3,`Component does not exist in registry: ${c}`);else {if(t.has(c)){let a=Pe(t.get(c));a.dom!==null?t.get(c).push(yt(c,e)):a.dom=we(e,a.key,a.key);}else t.set(c,[yt(c,e)]);i(e,c);}},Dt(s));function i(c,a){let f=null,l=null,g=!1;for(let h=r.length-1;h>=0;h--){let{name:T,value:W}=r[h];if(a){if(f=`${n.config.schema}${a}:`,T.startsWith(f)){let b=T.slice(f.length);Pe(t.get(a)).state[b]=W;}}else if(n.qs.component.u.test(T)&&!T.startsWith(n.qs.href.r)&&W){let[b,j]=T.slice(n.config.schema.length).split(":");l||(l=p()),u(l,b)||(l[b]=p()),u(l[b],j)?m(3,`Duplicated event parameter binding: ${T}="${W}"`):(l[b][j]=Vt(W),g=!0);continue}let xe=T.indexOf("@");if(xe>-1){let b=T.slice(xe+1),j=b.startsWith("window:");gt(t,W,({events:d,key:y},K)=>{let F=`e.${te()}`;d[F]=p(),d[F].element=we(c,F,y),d[F].isWindow=j,d[F].eventName=j?b.slice(7):b,d[F].attached=!1,d[F].params=null,d[F].method=K,d[F].schema=`${K}EventNodes`;}),g=!0;}else T===n.qs.component.m?(gt(t,W,({nodes:b,key:j},d)=>{let y=`n.${te()}`;b[y]=p(),b[y].element=we(c,y,j),b[y].schema=`${d}Nodes`;}),g=!0):T===n.qs.component.p&&(gt(t,W,({binds:b,key:j},d)=>{let y=`b.${te()}`;b[y]=p(),b[y].element=we(c,y,j),b[y].schema=`${d}StateNodes`,b[y].persist=!1,b[y].stateKey=d;}),g=!0);}if(g&&(n.components.connected.add(c),g=!1),l){for(let h in l)Pe(t.get(h)).events[c.dataset.spx].params=l[h];l=null,g=!1;}}}function zr(e,t){let{instanceOf:r,events:o}=t;for(let s in o){let i=o[s];if(!u(e,i.method)){m(3,`Event callback is undefined: ${r}.${i.method}()`);continue}if(i.attached){m(3,`Event listener already exists: ${r}.${i.method}()`);continue}let c=z.get(i.element);u(e,i.schema)?i.index=e[i.schema].push(c)-1:(e[i.schema]=[c],e[i.schema.slice(0,-1)]=e[i.schema][0],i.index=0),i.isWindow?addEventListener(i.eventName,ye(e,i)):c.addEventListener(i.eventName,ye(e,i)),i.attached=!0,z.delete(i.element);}}function Gr(e,t){for(let r in t.nodes){let o=t.nodes[r],s=z.get(o.element);u(e,o.schema)?o.index=e[o.schema].push(s)-1:(e[o.schema]=[s],e[o.schema.slice(0,-1)]=e[o.schema][0],o.index=0),z.delete(o.element);}}function Jr(e,t,r){for(let o in t.binds){let s=t.binds[o];if(!u(r,s.stateKey)){m(3,`Unknown state binding on key: ${t.instanceOf}.${s.stateKey}`);continue}let i=z.get(s.element);u(e,s.schema)?s.index=e[s.schema].push(i)-1:(e[s.schema]=[i],e[s.schema.slice(0,-1)]=e[s.schema][0],s.index=0),u(r[s.stateKey],"persist")&&r[s.stateKey]!==!1&&(s.persist=!0),z.delete(s.element);}}function or(){let e=Y(),t=[];rr(R(),o=>_r(o,e)),n.page.visits===1&&(n.snaps[n.page.uuid]=document.documentElement.outerHTML);for(let[o,s]of e){let i=n.components.registry[o],{connect:c}=i;for(let a of s)if(a.dom!==null){let f=z.get(a.dom),l=new i(a,f,c);zr(l,a),Gr(l,a),Jr(l,a,c.state),n.components.instances[a.key]=qe(p(),{scope:{get(){return a}},instance:{get(){return l}}}),u(l,"onInit")&&l.onInit(),n.components.connected.has(f)||n.components.connected.add(f),t.push(a.key),z.delete(a.dom);}}nr("components",t);}function Me(){if(!n.observe.components){if(n.page.components.length===0)return or();n.observe.components=!0;}}function vt(){n.observe.components&&(n.observe.components=!1);}function Zr({clientX:e,clientY:t},r){return e<=r.right&&e>=r.left&&t<=r.bottom&&t>=r.top}function Qr(e){let t=e.getBoundingClientRect(),r=e.getAttribute(n.qs.href.i),o=ke.test(r)?Number(r):n.config.proximity.distance;return {target:e,top:t.top-o,bottom:t.bottom+o,left:t.left-o,right:t.right+o}}function eo(e){let t=!1;return r=>{if(t)return;t=!0;let o=e.findIndex(s=>Zr(r,s));if(o===-1)setTimeout(()=>{t=!1;},n.config.proximity.throttle);else {let{target:s}=e[o],i=N(P(s,12)),c=i.threshold||n.config.proximity.threshold;Fe(i.key,()=>E(this,null,function*(){if(!$("prefetch",s,i))return G();(yield L(i))&&(e.splice(o,1),t=!1,e.length===0&&(G(),m(2,"Proximity observer disconnected")));}),c);}}}var xt;function Ce(){if(!n.config.proximity||n.observe.proximity)return;let e=Re(n.qs.href.i).map(Qr);e.length>0&&(xt=eo(e),addEventListener(`${M}move`,xt,{passive:!0}),n.observe.proximity=!0);}function G(){n.observe.proximity&&(removeEventListener(`${M}move`,xt),n.observe.proximity=!1);}function sr(e,t){return !t||t==="http://www.w3.org/1999/xhtml"?document.createElement(e):document.createElementNS(t,e)}function U(e){return e?e.getAttribute&&e.getAttribute("id")||e.id:void 0}function Oe(e,t){let r=e.nodeName,o=t.nodeName;if(r===o)return !0;let s=r.charCodeAt(0),i=o.charCodeAt(0);return s<=90&&i>=97||s<=90&&i>=97?r===o.toUpperCase():!1}function ir(e,t){let r=e.firstChild;for(;r;){let o=r.nextSibling;t.appendChild(r),r=o;}return t}function Be(e,t,r){e[r]!==t[r]&&(e[r]=t[r],e[r]?e.setAttribute(r,I):e.removeAttribute(r));}function cr(e,t){if(t.nodeType===11||e.nodeType===11)return;let r=t.attributes,o,s,i,c,a;for(let l=r.length-1;l>=0;l--)o=r[l],s=o.name,c=o.value,i=o.namespaceURI,i?(s=o.localName||s,a=e.getAttributeNS(i,s),a!==c&&(o.prefix==="xmlns"&&(s=o.name),e.setAttributeNS(i,s,c))):(a=e.getAttribute(s),a!==c&&e.setAttribute(s,c));let f=e.attributes;for(let l=f.length-1;l>=0;l--)o=f[l],s=o.name,c=o.value,i=o.namespaceURI,i?(s=o.localName||s,t.hasAttributeNS(i,s)||e.removeAttributeNS(i,s)):t.hasAttribute(s)||e.removeAttribute(s);}function fr(e,t){let r=e.parentNode;if(r){let o=r.nodeName.toUpperCase();o==="OPTGROUP"&&(r=r.parentNode,o=r&&r.nodeName.toUpperCase()),o==="SELECT"&&!r.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),r.selectedIndex=-1);}Be(e,t,"selected");}function lr(e,t){Be(e,t,"checked"),Be(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value");}function Tt(e,t){let{value:r}=t;e.value!==r&&(e.value=r);let{firstChild:o}=e;if(o){let{nodeValue:s}=o;if(s===r||!r&&s===e.placeholder)return;o.nodeValue=r;}}function mr(e,t){if(!t.hasAttribute("multiple")){let r=0,o=-1,s=e.firstElementChild,i,c;for(;s;)if(c=s.nodeName&&s.nodeName.toUpperCase(),c==="OPTGROUP")i=s,s=i.firstElementChild;else {if(c==="OPTION"){if(s.hasAttribute("selected")){o=r;break}r++;}s=s.nextElementSibling,!s&&i&&(s=i.nextElementSibling,i=null);}e.selectedIndex=o;}}new MutationObserver(function(e){console.log(e);});function Se(e){if(e.nodeType!==1||!e.dataset.spx)return;n.components.connected.has(e)&&n.components.connected.delete(e);let t=e.dataset.spx.split(",");for(let r=0,o=t.length;r<o;r++){let s=t[r];if(!u(n.components.refs,s)||!u(n.components.instances,n.components.refs[s]))continue;let i=s.charCodeAt(0),{instance:c,scope:a}=n.components.instances[n.components.refs[s]];if(i===99)u(c,"onExit")&&c.onExit();else if(i===98&&a.binds[s].persist)ur(n.page.rev,kt(e.nodeName,e.dataset.spx),e);else if(i===101){let f=a.events[s];f.isWindow?removeEventListener(f.eventName,c[f.method]):c[f.schema][f.index].removeEventListener(f.eventName,c[f.method]),f.attached=!1;}}}function pr(e){if(!e.dataset.spx)return;let t=e.dataset.spx.split(",");for(let r=0,o=t.length;r<o;r++){let s=t[r];if(!u(n.components.refs,s)||!u(n.components.instances,n.components.refs[s]))continue;let{instance:i,scope:c}=n.components.instances[n.components.refs[s]],a=s.charCodeAt(0);if(a===99)i.dom=e,A(i.state,c.state);else if(a===110)i[c.nodes[s].schema][c.nodes[s].index]=e,c.nodes[s].index===0&&(i[c.nodes[s].schema.slice(0,-1)]=e);else if(a===101){let f=c.events[s];i[f.schema][f.index]=e,f.index===0&&(i[f.schema.slice(0,-1)]=e),f.isWindow?addEventListener(f.eventName,ye(i,f)):i[f.schema][f.index].addEventListener(f.eventName,ye(i,f)),f.attached=!0;}else a===98&&(i[c.binds[s].schema][c.binds[s].index]=e,c.binds[s].index===0&&(i[c.binds[s].schema.slice(0,-1)]=e));}}function to(e,t,r){let o=t.firstChild,s,i,c=e.firstChild,a,f,l,g;e:for(;o;){for(i=o.nextSibling,s=U(o);c;){if(l=c.nextSibling,o.isSameNode&&o.isSameNode(c)){o=i,c=l;continue e}a=U(c),f=c.nodeType;let h;if(f===o.nodeType&&(f===1?(s?s!==a&&((g=r.lookup.get(s))?l===g?h=!1:(e.insertBefore(g,c),a?r.remove.push(a):_e(c,e,!0,r),c=g,a=U(c)):h=!1):a&&(h=!1),h!==!1&&(h=Oe(c,o)),h===!1&&r.lookup.has(a)&&r.lookup.get(a).getAttribute(n.qs.s)==="children"&&(h=!0),h&&Ue(c,o,r)):(f===3||f===8)&&(h=!0,c.nodeValue!==o.nodeValue&&(c.nodeValue=o.nodeValue))),h){o=i,c=l;continue e}a?r.remove.push(a):_e(c,e,!0,r),c=l;}s&&(g=r.lookup.get(s))&&Oe(g,o)?(e.appendChild(g),Ue(g,o,r)):(o.actualize&&(o=o.actualize(e.ownerDocument||document)),e.appendChild(o),bt(o,r)),o=i,c=l;}switch(ro(e,c,a,r),e.nodeName){case"INPUT":lr(e,t);break;case"OPTION":fr(e,t);break;case"SELECT":mr(e,t);break;case"TEXTAREA":Tt(e,t);break}}function Ue(e,t,r){let o=U(t);if(o&&r.lookup.delete(o),e.isEqualNode(t))return;let s=e.getAttribute(n.qs.s);s!=="false"&&(s!=="children"&&cr(e,t),e.nodeName!=="TEXTAREA"?to(e,t,r):Tt(e,t));}function dr(e,t,r){if(e.nodeType!==1)return;let o=e.firstChild;for(;o;){let s;t&&(s=U(o))?r.remove.push(s):(Se(o),o.firstChild&&dr(o,t,r)),o=o.nextSibling;}}function bt(e,t){e.nodeType===1&&pr(e);let r=e.firstChild;for(;r;){let o=r.nextSibling,s=U(r);if(s){let i=t.lookup.get(s);i&&Oe(r,i)?(r.parentNode.replaceChild(i,r),Ue(i,r,t)):bt(r,t);}else bt(r,t);r=o;}}function _e(e,t,r,o){t&&t.removeChild(e),Se(e),dr(e,r,o);}function ro(e,t,r,o){for(;t;){let s=t.nextSibling;(r=U(t))?o.remove.push(r):_e(t,e,!0,o),t=s,r=U(t);}}function hr(e,t){if(e.nodeType===1||e.nodeType===11){let r=e.firstChild;for(;r;){let o=U(r);o&&t.lookup.set(o,r),hr(r,t),r=r.nextSibling;}}}function J(e,t){t.nodeType===11&&(t=t.firstElementChild);let r=p({remove:[],lookup:Y()});hr(e,r);let o=e,s=o.nodeType,i=t.nodeType;if(s===1)i===1?Oe(e,t)||(Se(e),o=ir(e,sr(t.nodeName,t.namespaceURI))):o=t;else if(s===3||s===8){if(i===s)return o.nodeValue!==t.nodeValue&&(o.nodeValue=t.nodeValue),o;o=t;}if(o===t)Se(e);else {if(t.isSameNode&&t.isSameNode(o))return;if(Ue(o,t,r),r.remove)for(let c of r.remove){let a=r.lookup.get(c);a&&_e(a,a.parentNode,!1,r);}}return o!==e&&e.parentNode&&(o.actualize&&(o=o.actualize(e.ownerDocument||document)),e.parentNode.replaceChild(o,e)),o}function oo(e,t){return e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_PRECEDING||-1}function gr(e,t){return E(this,null,function*(){let r=t===7?n.qs.script.g:n.qs.tags.h,o=He(e.querySelectorAll(r));yield Jt(o.sort(oo));})}function no(e){document.head.querySelectorAll(n.qs.v).forEach(t=>{e.head.contains(t)||t.remove();}),document.head.append(...e.querySelectorAll(n.qs.v));}function so(e){if(!e)return;let t=e.querySelectorAll(n.qs.f);if(t.length>0)for(let r of t)r.hasAttribute("id")?n.tracked.has(r.id)||(R().appendChild(r),n.tracked.add(r.id)):m(3,`Tracked node <${r.tagName.toLowerCase()}> must contain an id attribute`);}function io(e,t){let r=e.target;if(r.length===1&&r[0]==="body")J(R(),t.body);else {let o=`${r.join(",")},[${n.qs.n}]`,s=t.body.querySelectorAll(o);if(s.length===0)m(3,`Unmatched targets, applied <body> replacement on: ${e.key}`),R().replaceWith(t.body);else {let i=R().querySelectorAll(o),c=[];if(i.length!==s.length)return m(3,`Target mismatch, fallback visit applies: ${e.key}`),location.assign(e.key);for(let a=0,f=i.length;a<f;a++){let l=i[a],g=s[a];if(!g||l.isEqualNode(g)||!$("render",l,g))continue;let h=g.getAttribute(n.qs.n);if(h===""||h==="true"){if(c.some(T=>T.contains(l)))continue}else c.push(l);if(J(l,g),e.append||e.prepend){let T=document.createElement("div");for(let W of t.childNodes)T.appendChild(W);e.append?l.appendChild(T):l.insertBefore(T,l.firstChild);}}}console.log(Ye),so(t.body);}}function ao(e,t){let r=e.hydrate;if(r.length===1&&r[0]==="body"){J(R(),t.body);return}let o=r.join(","),s=R().querySelectorAll(o),i=e.preserve&&e.preserve.length>0?e.preserve.join(","):null,c=[];if(i){let a=R().querySelectorAll(i);for(let f=0,l=a.length;f<l;f++){let g=a[f];g.setAttribute("spx-morph","false"),c.push(g);}}if(s.length>0){let a=t.body.querySelectorAll(o);for(let f=0,l=s.length;f<l;f++){let g=s[f],h=a[f];if(a[f]instanceof HTMLElement){if(!$("hydrate",g,h))continue;J(h,h);}}}if(i)for(let a of c)a.removeAttribute("spx-morph");gr(t,7),e.hydrate=void 0,e.preserve=void 0,e.type=6,X(e);}function V(e){se(),ae(),G(),vt(),document.title=e.title;let t=he(n.snaps[e.uuid]);return e.type===7?ao(e,t):(no(t),io(e,t),gr(t,e.type),scrollTo(e.scrollX,e.scrollY)),oe.done(),De(()=>{Ae(),$e(),Ce(),Me();}),$("load",e),e}var v=window.history;function yr(){return v.state!==null&&u(v.state,"rev")&&v.state.key!==v.state.rev}function It(e){if(v.state==null||typeof v.state!="object")return !1;let t=We(v.state)(["key","rev","scrollX","scrollY","title"]);return typeof e=="string"?t&&v.state.key===e:t}function co(e){return It(e.key)?(scrollTo(v.state.scrollX,v.state.scrollY),A(e,v.state)):(Z(e),e)}function Z({key:e,rev:t,title:r,scrollX:o,scrollY:s}){let i=p({key:e,rev:t,title:r||document.title,scrollX:o,scrollY:s});return v.replaceState(i,i.title,i.key),m(1,`History replaceState: ${v.state.key}`),v.state}function ce({key:e,rev:t,title:r}){let o=p({key:e,rev:t,title:r,scrollY:0,scrollX:0});return v.pushState(o,o.title,o.key),m(1,`History pushState: ${v.state.key}`),v.state}function vr(e){return E(this,null,function*(){if(e.state!==null)if(w(e.state.key))w(e.state.rev)===!1&&e.state.rev!==e.state.key&&Ke(e.state.rev),m(1,`History popState: ${e.state.key}`),n.pages[e.state.key].type=5,V(n.pages[e.state.key]);else {e.state.type=5;let t=yield L(e.state);if(!t)return location.assign(e.state.key);let r=S(location);if(t.key===r)V(t);else if(w(r))V(n.pages[r]);else {let o=N(P(r,5));yield L(o),ce(o);}}})}function xr(e){if(!n.observe.history)return v.scrollRestoration&&(v.scrollRestoration="manual"),addEventListener("popstate",vr,!1),n.observe.history=!0,typeof e=="object"&&e.type===0?co(e):e}function Er(){n.observe.history&&(v.scrollRestoration&&(v.scrollRestoration="auto"),removeEventListener("popstate",vr,!1),n.observe.history=!1);}function N(e){let t=We(e);return e.components=[],e.target=ot(e),e.ts=pe(),n.config.cache&&(t("cache")||(e.cache=n.config.cache),t("uuid")||(e.uuid=te())),t("scrollY")||(e.scrollY=0),t("scrollX")||(e.scrollX=0),n.config.hover!==!1&&e.type===10&&(t("threshold")||(e.threshold=n.config.hover.threshold)),n.config.proximity!==!1&&e.type===12&&(t("proximity")||(e.proximity=n.config.proximity.distance),t("threshold")||(e.threshold=n.config.proximity.threshold)),n.config.progress&&!t("progress")&&(e.progress=n.config.progress.threshold),t("visits")||(e.visits=0),n.pages[e.key]=e,n.pages[e.key]}function nr(e,t,r=v.state.key){return e==="location"?n.pages[r][e]=A(n.pages[r][e],t):n.pages[r][e]=t,n.pages[r]}function ge(e,t){let r=$("before:cache",e,t),o=typeof r=="string"?r:t;return e.type>5&&e.type>9&&(e.type=1),e.title=pt(t),!n.config.cache||r===!1?e:u(e,"uuid")?(n.pages[e.key]=e,n.snaps[e.uuid]=o,$("after:cache",e),e):X(e,o)}function ur(e,t,r){let{page:o,dom:s}=ve(e),i=s.body.querySelector(t);i&&(J(i,r),n.snaps[o.uuid]=s.documentElement.outerHTML);}function X(e,t){let r=u(n.pages,e.key)?n.pages[e.key]:N(e);return e.target=ot(e),e.visits=e.visits+1,typeof t=="string"&&(n.snaps[r.uuid]=t,e.title=pt(t)),A(r,e)}function ve(e){if(!e){if(v.state===null){m(3,"Missing history state reference, page cannot be returned");return}e=v.state.key;}if(u(n.pages,e)){let t=p();return t.page=n.pages[e],t.dom=he(n.snaps[t.page.uuid]),t}m(5,`No record exists: ${e}`);}function w(e){return u(n.pages,e)&&u(n.pages[e],"uuid")&&u(n.snaps,n.pages[e].uuid)&&typeof n.snaps[n.pages[e].uuid]=="string"}function Q(e){e?typeof e=="string"?(delete n.snaps[n.pages[e].uuid],delete n.pages[e]):H(e)&&k(t=>{delete n.snaps[n.pages[t].uuid],delete n.pages[t];},e):(it(n.pages),it(n.snaps));}function Le(e,t){if(!(e instanceof Element))return !1;let r=e.closest(t);return r&&r.tagName==="A"?r:!1}function Tr(e){if(e.nodeName!=="A")return !1;let t=e.getAttribute("href");return !t||!mt(t)?!1:w(S(t))===!1}function tr(e,t){let r=[];return ue(e,o=>{if(o.nodeName!=="A"){let s=o.querySelectorAll(t);ue(s,i=>{Tr(i)&&r.push(i);});}else if(o.hasAttribute("href")){let{href:s}=o;mt(s)&&w(S(s))&&r.push(o);}}),r}var Re=e=>{let t=[];return ue(e,r=>{Tr(r)&&t.push(r);}),t};function fo(e){return !(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}var D=function(e){if(!fo(e))return;let t=Le(e.target,n.qs.tags.d);if(!t)return;let r=S(t.href);if(r===null)return;let o=()=>{D.drag=!0,m(3,`Drag occurance, visit was cancelled to link: ${r}`),t.removeEventListener(`${M}move`,o);};if(t.addEventListener(`${M}move`,o,{once:!0}),D.drag===!0)return D.drag=!1,D(e);if(t.removeEventListener(`${M}move`,o),!!$("visit",e))if(se(),G(),ae(),w(r)){let s=lt(t,n.pages[r]),i=X(s);t.onclick=c=>{c.preventDefault(),n.pages[i.key].ts=pe(),n.pages[i.rev].scrollX=window.scrollX,n.pages[i.rev].scrollY=window.scrollY,Z(n.pages[i.rev]),ce(i),V(i);};}else if(x.transit.has(r)){ut(r),m(2,`Request in transit: ${r}`);let s=n.pages[r];t.onclick=i=>{i.preventDefault(),n.pages[s.key].ts=pe(),n.pages[s.rev].scrollX=window.scrollX,n.pages[s.rev].scrollY=window.scrollY,Z(n.pages[s.rev]),Nt(s);};}else {ut(),je(r);let s=N(P(t,6));L(s),t.onclick=i=>{i.preventDefault(),n.pages[s.key].ts=pe(),n.pages[s.rev].scrollX=window.scrollX,n.pages[s.rev].scrollY=window.scrollY,Z(n.pages[s.rev]),Nt(s);};}};function Nt(e){return E(this,null,function*(){e.progress&&oe.start(e.progress);let t=yield Ne(e);t?(ce(t),V(t)):location.assign(e.key);})}function At(e,t){return E(this,null,function*(){if(t){typeof t.cache=="string"&&(t.cache==="clear"?Q():Q(t.key)),t.progress&&oe.start(t.progress);let r=yield L(t);r?(ce(r),V(r)):location.assign(t.key);}else return Nt(n.pages[e])})}function br(){n.observe.hrefs||(D.drag=!1,Ee==="mouseOnly"?addEventListener(`${M}down`,D,!1):(Ee==="touchOnly"||addEventListener(`${M}down`,D,!1),addEventListener("touchstart",D,!1)),n.observe.hrefs=!0);}function Pr(){n.observe.hrefs&&(Ee==="mouseOnly"?removeEventListener(`${M}down`,D,!1):(Ee==="touchOnly"||removeEventListener(`${M}down`,D,!1),removeEventListener("touchstart",D,!1)),n.observe.hrefs=!1);}function Nr(){let e=P(0),t=xr(N(e));qe(n,{page:{get(){return n.pages[v.state.key]}},snap:{get(){return n.snaps[n.page.uuid]}}}),n.index=t.key;let r=()=>{let o=ge(t,document.documentElement.outerHTML);return br(),n.config.manual===!1&&(Ae(),$e(),Ce(),Me()),De(()=>{o.rev!==o.key&&Ke(o.rev),zt(o);}),o};return new Promise(o=>{if(document.readyState==="complete"||document.readyState==="interactive")return o(r());addEventListener("DOMContentLoaded",()=>o(r()),{once:!0});})}function Ar(){se(),Ae(),ae(),$e(),G(),Ce();}function Lr(){Er(),Pr(),se(),ae(),G(),n.components.registry.size>0&&n.components.registry.clear(),Q(),n.config.globalThis&&delete window.spx,m(2,"Disconnected");}var Ge=class{get html(){return this.dom.closest("html")}constructor({state:t,instanceOf:r},o,s){if(this.dom=o,s.state!==null){let i=n.config.schema+r;this.state=new Proxy(p(),{set:(a,f,l)=>{let g=s.state[f];typeof g=="object"&&u(g,"persist")&&g.persist?a[f]=t[f]=l:a[f]=l;let h=typeof l=="object"||H(l)?JSON.stringify(l):l;if(this.dom.setAttribute(`${i}:${f}`,h),u(this,`${f}StateNodes`))for(let T of this[`${f}StateNodes`])T.innerText=h;return !0}});let c=ee(this.state);for(let a in s.state){let f=s.state[a],l=this.dom.hasAttribute(`${i}:${a}`);c(`has${Yt(a)}`,l);let g,h,T=!1;typeof f=="object"?(h=l?t[a]:f.default,g=f.typeof,T=typeof h=="object"||H(h)):(h=l?t[a]:void 0,g=f),typeof h=="string"&&h.startsWith("window.")?this.state[a]=t[a]=window[h.slice(7)]:g===String?this.state[a]=t[a]=h||I:g===Boolean?this.state[a]=t[a]=h==="true":g===Number?this.state[a]=t[a]=Number(h)||0:g===Array?this.state[a]=t[a]=h===void 0?[]:T?h:me(a,h):g===Object&&(this.state[a]=t[a]=h===void 0?{}:T?h:me(a,h));}}}};function Mi(){}var Rr=!!(Qe&&window.history.pushState&&window.requestAnimationFrame&&window.addEventListener&&window.DOMParser&&window.Proxy),$r=p({Component:Ge,supported:Rr,on:Ut,off:_t,observe:Ar,connect:lo,capture:yo,form:xo,render:go,session:mo,state:po,reload:uo,fetch:ho,clear:Q,hydrate:Eo,prefetch:vo,visit:To,disconnect:Lr,register:Ve,history:p({get state(){return v.state},api:v,push:ce,replace:Z,has:It,reverse:yr}),get config(){return n.config}});function lo(e={},...t){if(Qe===!1)return m(5,"Invalid runtime environment: window is undefined.");if(!Rr)return m(5,"Browser does not support SPX");if(!window.location.protocol.startsWith("http"))return m(5,"Invalid protocol, SPX expects HTTPS or HTTP protocol");at(e),n.config.globalThis&&u(window,"spx")===!1&&ee(window,"spx",$r);let r=Nr();return function(o){return E(this,null,function*(){let s=yield r;if(o.constructor.name==="AsyncFunction")try{yield o(s);}catch(i){m(3,"Connection Error",i);}else o(s);m(2,"Connection Established \u26A1");})}}function mo(e,t){if(e)if(t)e==="config"&&at(t),e==="observe"&&A(n.observe,t);else {if(e==="config")return n.config;if(e==="observe")return n.observe;if(e==="components")return n.components;if(e==="pages")return n.pages;if(e==="snaps")return n.snaps;if(e==="memory")return nt(n.memory.bytes)}return {config:n.config,snaps:n.snaps,pages:n.pages,observers:n.observe,components:n.components,get memory(){let r=n.memory;return r.size=nt(r.bytes),r}}}function po(e,t){if(e===void 0)return ve();if(typeof e=="string"){let r=S(e);w(r)||m(5,`No store exists at: ${r}`);let o=ve(r);return t!==void 0?X(A(o.page,t)):o}if(typeof e=="object")return X(e)}function uo(){return E(this,null,function*(){let e=n.pages[v.state.key];e.type=9;let t=yield L(e);return t?(m(2,"Triggered reload, page was re-cached"),V(t)):(m(3,"Reload failed, triggering refresh (cache will purge)"),location.assign(e.key))})}function ho(e){return E(this,null,function*(){let t=P(e,2);t.location.origin!==re&&m(5,"Cross origin fetches are not allowed");let r=yield Ie(t.key);if(r)return r})}function go(e,t,r){return E(this,null,function*(){let o=n.page,s=P(e);s.location.origin!==re&&m(5,"Cross origin fetches are not allowed");let i=yield Ie(s.key,{type:"document"});if(i||m(5,`Fetch failed for: ${s.key}`,i),yield r.call(o,i),t==="replace"){o.title=i.title;let c=X(A(o,s),i.documentElement.outerHTML);return Z(c),c}else return V(ge(s,i.documentElement.outerHTML))})}function yo(e){let t=ve();if(!t)return;let{page:r,dom:o}=t;if(e=H(e)?e:r.target,e.length===1&&e[0]==="body"){o.body.replaceChildren(document.body),X(r,o.documentElement.innerHTML);return}let s=e.join(","),i=R().querySelectorAll(s),c=o.body.querySelectorAll(s);ue(c,(a,f)=>{J(a,i[f]);}),X(r,o.documentElement.innerHTML);}function vo(e){return E(this,null,function*(){let t=P(e,1);if(w(t.key)){m(3,`Cache already exists for ${t.key}, prefetch skipped`);return}let r=yield L(N(t));if(r)return r;m(5,`Prefetch failed for ${t.key}`);})}function xo(e,t){return E(this,null,function*(){let r=new FormData;for(let s in t.data)r.append(s,t.data[s]);return yield Ie(e,{method:t.method,body:r})})}function Eo(e,t){return E(this,null,function*(){let r=P(e,7);if(L(r),H(t)){r.hydrate=[],r.preserve=[];for(let s of t)s.charCodeAt(0)===33?r.preserve.push(s.slice(1)):r.hydrate.push(s);}else r.hydrate=n.config.fragments;let o=yield Ne(r);if(o){let{key:s}=v.state;if(Z(o),V(o),r.key!==s){n.index===s&&(n.index=r.key);for(let i in n.pages)n.pages[i].rev===s&&(n.pages[i].rev=r.key);Q(s);}}return ve(o.key).dom})}function To(e,t){return E(this,null,function*(){let r=P(e),o=typeof t=="object"?A(r,t):r;return w(r.key)?At(r.key,X(o)):At(r.key,N(o))})}var Ci=$r;

export { Mi as Decorator, Ci as default };
