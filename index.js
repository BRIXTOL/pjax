var hn=Object.defineProperty;var yn=(e,t)=>{for(var o in t)hn(e,o,{get:t[o],enumerable:!0});};var D=typeof window!="undefined"?window:{screen:{},navigator:{}},be=(D.matchMedia||function(){return {matches:!1}}).bind(D),xn={get passive(){return !0}},eo=function(){};D.addEventListener&&D.addEventListener("p",eo,xn);D.removeEventListener&&D.removeEventListener("p",eo,!1);var Et="ontouchstart"in D,vn="TouchEvent"in D,xt=Et||vn&&be("(any-pointer: coarse)").matches,Qt=(D.navigator.maxTouchPoints||0)>0||xt,to=D.navigator.userAgent||"",Tn=be("(pointer: coarse)").matches&&/iPad|Macintosh/.test(to)&&Math.min(D.screen.width||0,D.screen.height||0)>=768,bn=(be("(pointer: coarse)").matches||!be("(pointer: fine)").matches&&Et)&&!/Windows.*Firefox/.test(to),An=be("(any-pointer: fine)").matches||be("(any-hover: hover)").matches||Tn||!Et,Me=Qt&&(An||!bn)?"hybrid":Qt?"touchOnly":"mouseOnly";var vt=typeof window!="undefined";"content"in document.createElement("template");document.createRange&&"createContextualFragment"in document.createRange();var S=xt?"pointer":"mouse",ce=window.location.origin,{assign:R,keys:yr,entries:Er}=Object,J=Object.defineProperty,Y=Object.defineProperties,oo=Object.create;var{isArray:L}=Array,no=Array.from,v="",{warn:Tt,info:ro,error:bt}=console,O=()=>document.body,so=()=>document.head,m=e=>e?R(oo(null),e):oo(null),K=e=>new Set(e),io=e=>new Proxy(m(),e),ee=()=>new Map;var x=class extends XMLHttpRequest{constructor(){super(...arguments);this.key=null;}};x.o=ee(),x.i=ee(),x.n=m();var r=m({index:"",eval:!0,patched:!1,loaded:!1,qs:m(),config:m({fragments:["body"],timeout:3e4,globalThis:!0,schema:"spx-",manual:!1,logLevel:2,cache:!0,maxCache:100,reverse:!0,preload:null,annotate:!1,eval:m({script:null,style:null,link:null,meta:!1}),hover:m({trigger:"href",threshold:250}),intersect:m({rootMargin:"0px 0px 0px 0px",threshold:0}),proximity:m({distance:75,threshold:250,throttle:500}),progress:m({bgColor:"#111",barHeight:"3px",minimum:.08,easing:"linear",speed:200,threshold:500,trickle:!0,trickleSpeed:200})}),fragments:K(),components:m({registry:ee(),instances:ee(),connected:K(),elements:ee(),reference:io({get:(e,t)=>r.components.instances.get(e[t])})}),events:m(),observe:m(),memory:m(),pages:m(),snaps:m(),resources:K()});var qe="\x1B[96mSPX\x1B[0m ";function l(e,t,o){let{logLevel:n}=r.config;if(L(t)&&(t=t.join(" ")),e===1&&n===1||e===2&&(n===1||n===2))ro(`${qe}%c${t}`,`color: ${o||"#999"};`);else if(e===3&&n<4)o?Tt(qe+t,o):Tt(qe+t);else if(e===5||e===4){o?bt(qe+t,o):bt(qe+t);try{throw e===4?new TypeError(t):new Error(t)}catch(s){}}}var ao=/\b(?:append|prepend)/,co=/\s+/g,Se=/^\b(?:true|false)$/i,Ze=/^\d*\.?\d+$/,we=/^(?:[.-]?\d*\.?\d+|NaN)$/;var fo=/\b(?:intersect|hover|proximity)\b/;var lo=/\b(?:SCRIPT|STYLE|LINK)\b/,po=/\[(['"]?.*['"]?,?)\]/,At=/[xy]\s*|\d*\.?\d+/gi;function uo(e){let t=e.replace(/\s+,/g,",").replace(/,\s+/g,",").replace(/['"]/g,v);return t.charCodeAt(0)===91&&(/^\[\s*\[/.test(t)||/,/.test(t)&&/\]$/.test(t))&&(t=t.replace(/^\[/,v).replace(/\]$/,v)),t.split(/,|\|/)}function Ae(e,t){try{let o=(t||e).replace(/\\'|'/g,n=>n[0]==="\\"?n:'"').replace(/([{,])\s*(.+?)\s*:/g,'$1 "$2":');return JSON.parse(o)}catch(o){return l(5,"Invalid JSON expression in attribute value: "+JSON.stringify(e||t,null,2),o),t}}function Ie(e){return e[e.length-1]}function In(e){return e.replace(/\s+/g," ").trim()}function Ne(e){return e.replace(/\./g,"\\.").replace(/@/g,"\\@").replace(/:/g,"\\:")}function Qe(e){return In(e.replace(/[\s .]+/g,".")).replace(/\s+/g," ").trim().split(/[ ,]/)}function go(e){if(we.test(e))return e==="NaN"?NaN:+e;if(Se.test(e))return e==="true";let t=e.charCodeAt(0);return t===123||t===91?Ae(e):e}function ho(){return new Promise(e=>setTimeout(()=>e(),1))}function k(e){setTimeout(()=>e(),1);}function yo(){return Promise.resolve()}function Eo(e){let t=document.createElement("textarea");return t.innerHTML=e,t.value}function He(){return new Date().getTime()}function Ce(e){return t=>t?typeof t=="string"?t in e:t.every(o=>o in e):!1}function T(e,t){return e?t in e:!1}function et(e,t,o){if(arguments.length>1)J(e,t,{get(){return o}});else return (n,s,i)=>{if(T(e,n))return;function a(){return s}return J(e,n,i?R(i,{get:a}):{get:a})}}function It(e){return T(e,"target")?e.target.length===1&&e.target[0]==="body"?e.target:e.target.filter((t,o,n)=>t!=="body"&&t!==v&&t.indexOf(",")===-1?n.indexOf(t)===o:!1):r.config.fragments.length===1&&r.config.fragments[0]==="body"?["body"]:[...r.config.fragments]}function ke(e){return e.length===1&&e[0]==="body"?"body":`${(e.length===0?r.config.fragments:e).join(",")}`}function xo(e){let t=typeof e;if(t==="object"){for(let o in e)return !1;return !0}else {if(t==="string")return e[0]===void 0;if(L(e))return e.length>0}return !1}function vo(...e){return e.join(v)}var U=function e(t=5){let o=Math.random().toString(36).slice(-t);return e.y.has(o)?e(t):(e.y.add(o),o)};U.y=K();function To(e=2){return (t,o)=>{let n=t.length;return (n<1||t[n-1].length===e?t.push([o]):t[n-1].push(o))&&t}}function bo(e){return e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":e<1073741824?(e/1048576).toFixed(1)+" MB":(e/1073741824).toFixed(1)+" GB"}function Nt(e){return e[0].toLowerCase()+e.slice(1)}function De(e){return e[0].toUpperCase()+e.slice(1)}function fe(e){return /[_-]/.test(Nt(e))?e.replace(/([_-]+).{1}/g,(t,o)=>t[o.length].toUpperCase()):e}function te(e,t){let o=typeof e=="string"?O().querySelectorAll(e):e,n=o.length;if(n!==0)for(let s=0;s<n&&t(o[s],s)!==!1;s++);}function B(e,t){if(arguments.length===1)return n=>B(e,n);let o=t.length;if(o!==0)for(let n=0;n<o;n++)e(t[n],n,t);}function Ct(e){for(let t in e)delete e[t];}function Ao(){if(r.patched)return;r.patched=!0;let e=Element.prototype.setAttribute,t=document.createElement("i");Element.prototype.setAttribute=function(n,s){if(n.indexOf("@")<0)return e.call(this,n,s);t.innerHTML=`<i ${n}="${s}"></i>`;let i=t.firstElementChild.getAttributeNode(n);t.firstElementChild.removeAttributeNode(i),this.setAttributeNode(i);};}function Cn(){let e=[],t=document.createElement("div"),o=null,n,s=null,i=({bgColor:y,barHeight:b,speed:ae,easing:gn})=>{t.style.cssText=vo("pointer-events:none;",`background-color:${y};`,`height:${b};`,"position:fixed;","display:block;","z-index:2147483647;","top:0;","left:0;","width:100%;","will-change:opacity,transform;",`transition:transform ${ae}ms ${gn};`);},a=y=>(-1+y)*100,c=(y,b,ae)=>y<b?b:y>ae?ae:y,f=()=>s||(t.style.setProperty("transform",`translateX(${a(o||0)}%)`),s=O().appendChild(t),t),p=()=>{let y=O();if(y.contains(s)){let b=s.animate({opacity:["1","0"]},{easing:"ease-out",duration:100});b.onfinish=()=>{y.removeChild(s),s=null;};}else s=null;},d=()=>{let y=e.shift();y&&y(d);},E=y=>{e.push(y),e.length===1&&d();},u=y=>{y=c(y,r.config.progress.minimum,1),o=y===1?null:y;let b=f();E(ae=>{b.style.setProperty("transform",`translateX(${a(y)}%)`),y===1?setTimeout(()=>{p(),ae();},r.config.progress.speed*2):setTimeout(ae,r.config.progress.speed);});},$=y=>{let b=o;if(!b)return I();if(b<1)return typeof y!="number"&&(b>=0&&b<.2?y=.1:b>=.2&&b<.5?y=.04:b>=.5&&b<.8?y=.02:b>=.8&&b<.99?y=.005:y=0),b=c(b+y,0,.994),u(b)},h=()=>{setTimeout(()=>{o&&($(),h());},r.config.progress.trickleSpeed);};function I(y){r.config.progress&&(n=setTimeout(()=>{o||u(0),r.config.progress.trickle&&h();},y||0));}function X(y){clearTimeout(n),!(!y&&!o)&&($(.3+.5*Math.random()),u(1));}return {start:I,done:X,style:i}}var le=Cn();function tt(e,t){let{name:o}=e,n=t;t||(t=Nt(e.name)),T(e,"connect")||(e.connect={id:t,state:{},nodes:[]});let s=Ce(e.connect);return s("state")||(e.connect.state={}),s("nodes")||(e.connect.nodes=[]),s("id")||(e.connect.id=t),t!==e.connect.id&&(t=fe(e.connect.id)),o!==n&&/^[A-Z]|[_-]/.test(e.connect.id)&&l(3,[`Component identifer name "${e.connect.id}" must use camelCase format.`,`The identifer has been converted to "${t}"`]),t}function oe(e){let{registry:t}=r.components;for(let o in e){let n=e[o],s=tt(n,o);t.has(s)||(t.set(s,n),l(1,`${o} component registered under: ${s}`));}}function Pn(e){for(let t of ["hover","intersect","proximity","progress"])T(e,t)&&(e[t]===!1?r.config[t]=!1:typeof e[t]=="object"&&R(r.config[t],e[t]),delete e[t]);return e}function We(e,t){let o=`:not([${e}${t}=false]):not([${e}link])`;switch(t.charCodeAt(0)){case 104:return `${o}:not([${e}proximity]):not([${e}intersect])`;case 105:return `${o}:not([${e}hover]):not([${e}proximity])`;case 112:return `${o}:not([${e}intersect]):not([${e}hover])`}}function $n(e,t,o){if("eval"in e)if(e.eval){if(typeof e.eval=="object"){let n=R(r.config.eval,e.eval);r.eval=!(!n.link&&!n.meta&&!n.script&&!n.style);}}else r.eval=!1;return n=>{if(r.eval===!1||r.config.eval[n]===!1)return `${n}[${t}eval]:${o}`;if(r.config.eval[n]===!0)return `${n}:${o}`;let s=n==="link"?`${n}[rel=stylesheet]:${o}`:n==="script"?`${n}:${o}:not([${t}eval=hydrate])`:`${n}:${o}`;if(r.config.eval[n]===null)return s;if(L(r.config.eval[n]))return r.config.eval[n].length>0?r.config.eval[n].map(i=>`${i}:${o}`).join(","):(l(3,`Missing eval ${n} value, SPX will use defaults`),s);l(4,`Invalid eval ${n} value, expected boolean or array`);}}function Io(e=m()){Ao(),Y(r,{ready:{get(){return document.readyState==="complete"}},types:{get(){return m({INITIAL:0,PREFETCH:1,FETCH:2,PRELOAD:3,REVERSE:4,POPSTATE:5,VISIT:6,HYDRATE:7,CAPTURE:8,RELOAD:9,HOVER:10,INTERSECT:11,PROXIMITY:12})}}}),"components"in e?(oe(e.components),delete e.components,r.config.components=!0):r.config.components=!1,R(r.config,Pn(e));let t=r.config.schema,o=t==="spx"?"spx":t.endsWith("-")?t:t===null?v:`${t}-`,n=`:not([${o}disable]):not([href^=\\#])`,s=`not([${o}eval=false])`,i=$n(e,o,s);r.config.schema=o,r.config.index=null,r.memory.bytes=0,r.memory.visits=0,r.memory.limit=r.config.maxCache,R(r.qs,{x:new RegExp(`^href|${o}(hydrate|append|prepend|target|progress|threshold|scroll|position|proximity|hover|cache|history)$`,"i"),L:new RegExp(`${o}(?:node|bind|component)|@[a-z]|[a-z]:[a-z]`,"i"),v:new RegExp(`^${o}[a-zA-Z0-9-]+:`,"i"),u:`${o}target`,O:`[${o}target]:not([${o}target=false])`,a:`${o}morph`,T:`${o}eval`,b:`[${o}intersect]${We(o,"intersect")}`,M:`[${o}track]:not([${o}track=false])`,l:`${o}component`,d:`${o}node`,g:`${o}bind`,e:"data-spx",A:r.config.annotate?`a[${o}link]${n}`:`a${n}`,I:i("script"),N:i("style"),C:i("link"),P:i("meta"),q:`script[${o}eval=hydrate]:${s}`,S:`link[rel=stylesheet][href*=\\.css]:${s},script[src*=\\.js]:${s}`,h:`${o}data:`,E:`a[${o}proximity]${n}${We(o,"proximity")}`,R:`a${n}${We(o,"intersect")}`,p:r.config.hover!==!1&&r.config.hover.trigger==="href"?`a${n}${We(o,"hover")}`:`a[${o}hover]${n}${We(o,"hover")}`}),le.style(r.config.progress);}function pe(e){return new DOMParser().parseFromString(e,"text/html")}function me(e){return (e||document).documentElement.outerHTML}function Pt(e){let t=e.indexOf("<title");if(t===-1)return v;let o=e.indexOf(">",t)+1,n=e.indexOf("</title",o);return Eo(e.slice(o,n).trim())}function C(e,...t){let o=e==="before:cache";o&&(t[1]=pe(t[1]));let n=!0;return B(s=>{let i=s.apply(null,t);o?i instanceof Document?n=i.documentElement.outerHTML:typeof n!="string"&&(n=i!==!1):n=i!==!1;},r.events[e]||[]),n}function No(e,t,o){return e in r.events||(r.events[e]=[]),r.events[e].push(o?t.bind(o):t)-1}function Co(e,t){if(e in r.events){let o=r.events[e];if(o&&typeof t=="number")o.splice(t,1),l(2,`Removed ${e} event listener (id: ${t})`),o.length===0&&delete r.events[e];else {let n=[];if(o&&t)for(let s=0,i=o.length;s<i;s++)o[s]!==t?n.push(o[s]):l(2,`Removed ${e} event listener (id: ${s})`);n.length?r.events[e]=n:delete r.events[e];}}else l(3,`There are no ${e} event listeners`);return this}function Xe(e,{method:t="GET",body:o=null,headers:n=null,type:s="text"}={}){return new Promise(function(i,a){let c=new x;if(c.key=e,c.responseType=s,c.open(t,e),c.setRequestHeader("spx-request","true"),n!==null)for(let f in n)c.setRequestHeader(f,n[f]);c.onloadstart=function(){x.o.set(this.key,c);},c.onload=function(){i(this.response);},c.onerror=function(){a(this.statusText);},c.onabort=function(){delete x.n[this.key],x.i.delete(this.key),x.o.delete(this.key);},c.onloadend=function(f){x.o.delete(this.key),r.memory.bytes=r.memory.bytes+f.loaded,r.memory.visits=r.memory.visits+1;},c.send(o);})}function ot(e){return e in x.n?(clearTimeout(x.n[e]),delete x.n[e]):!0}function nt(e,t,o){e in x.n||w(e)||(x.n[e]=setTimeout(t,o));}function $t(e){for(let[t,o]of x.o)e!==t&&(o.abort(),l(3,`Pending request aborted: ${t}`));}function Po(e){if(r.config.preload!==null){if(L(r.config.preload)){let t=r.config.preload.filter(o=>{let n=A(o,3);return n.key!==o?M(P(n)):!1});return Promise.allSettled(t)}else if(typeof r.config.preload=="object"&&T(r.config.preload,e.key)){let t=r.config.preload[e.key].map(o=>M(P(A(o,3))));return Promise.allSettled(t)}}}async function rt(e){if(e.rev===e.key)return;let t=P(A(e.rev,4));await ho(),M(t).then(o=>{o?l(2,`Reverse fetch completed: ${o.rev}`):l(3,`Reverse fetch failed: ${e.rev}`);});}async function Ve(e){if(!x.i.has(e.key))return e;let t=await x.i.get(e.key);return x.i.delete(e.key),delete x.n[e.key],Pe(e,t)}async function M(e){return x.o.has(e.key)&&e.type!==7?(e.type===4&&x.o.has(e.rev)?(x.o.get(e.rev).abort(),l(3,`Request aborted: ${e.rev}`)):l(3,`Request in transit: ${e.key}`),!1):C("fetch",e)?(x.i.set(e.key,Xe(e.key)),Ve(e)):(l(3,`Request cancelled via dispatched event: ${e.key}`),!1)}function $o(e,t){return `on${e}`in t?!0:(l(5,[`Invalid event name "${e}" provided. No such event exists in the DOM API.`,"Only known event listeners can be attached."],t),!1)}function Ro(e,t,o){let n=e[t.method];return function(i){t.params&&(T(i,"attrs")||et(i,"attrs",m()),R(i.attrs,t.params)),n.call(e,i);}}function Fe(e,t){t.attached&&(t.listener.abort(),t.listener=new AbortController,t.options.signal=t.listener.signal,t.attached=!1,r.components.elements.delete(t.el),l(1,[`Detached ${t.key} ${t.eventName} event from the ${t.method} method on`,`${e.static.id} component (${e.scope.key})`]));}function st(e,t,o){if(!o.attached){if(!(o.method in e)){l(3,`Undefined callback method: ${e.static.id}.${o.method}()`);return}Lo(t.attributes,o),o.isWindow?$o(o.eventName,window)&&addEventListener(o.eventName,Ro(e,o)):$o(o.eventName,t)&&(t.addEventListener(o.eventName,Ro(e,o),o.options),r.components.elements.set(o.el,t)),l(1,[`Attached ${o.key} ${o.eventName} event to the ${o.method} method on`,`${e.static.id} component (${e.scope.key})`]),o.attached=!0;}}function Oo(e){k(()=>it(de(r.page.key).body,e));}function Mo(e){let{instances:t}=r.components,{page:o,dom:n}=Ot(),s=n.body;for(let[i,a]of e){let c=t.get(a),f=c.dom.getAttribute(r.qs.e),p=s.querySelector(i),{instanceOf:d,binds:E,nodes:u}=c.scope;for(let $ in E){let h=E[$],I=`[${r.qs.g}=${Ne(`${d}.${h.stateKey}`)}]`,X=(h.isChild?p:s).querySelector(I);X.getAttribute(r.qs.e)!==h.key&&(X.setAttribute(r.qs.e,h.key),l(1,`Binding reference in snapshot ${h.key} was applied`,"#fff"));}for(let $ in u){let h=u[$],I=`[${r.qs.d}*=${Ne(`${d}.${h.keyProp}`)}]`,X=(h.isChild?p:s).querySelector(I);X.getAttribute(r.qs.e)!==h.key&&(X.setAttribute(r.qs.e,h.key),l(1,`Node reference in snapshot ${h.key} was applied`,"#fff"));}p.getAttribute(r.qs.e)!==f&&(p.setAttribute(r.qs.e,f),l(1,`Component reference in snapshot ${o.snap} was applied`,"#fff"));}Lt(n.documentElement.outerHTML);}function it(e,t){let o,n;for(e.firstElementChild&&(o=0,n=e.children[o]);n;){if((n.nodeName==="svg"||n.nodeName==="CODE")&&n.childElementCount>0&&(o=0,n=n.nextElementSibling),n){if(ne(n.attributes)){let s=t.shift(),i=r.components.elements.get(s),a=n.getAttribute(r.qs.e),c=i.getAttribute(r.qs.e);if(a!==c&&n.setAttribute(r.qs.e,i.getAttribute(r.qs.e)),t.length===0){Lt(n.ownerDocument.documentElement.outerHTML),l(1,"Snapshot updated");break}}it(n,t);}n=e.children[++o];}}function Rt(e,t){let{page:o,dom:n}=Ot(r.page.key),s=e.charCodeAt(0)===114?"removed":"appended";n.head.contains(t)?(n.head[e](t),r.snaps[o.snap]=n.documentElement.outerHTML,l(1,`Snapshot record was updated. Node ${s} from <head>`,t)):l(3,"Node does not exists in snapshot record, no mutation applied",t);}function at(){r.fragments.clear(),te(r.page.selector,e=>r.fragments.add(e));}function Mt(e){for(let t of r.fragments)if(t.contains(e)||t.isEqualNode(e))return !0;return !1}function Rn(e){return e.trim().replace(/\s+/," ").split(/[|, ]/).map(fe)}function Lo(e,t){for(let o=0,n=e.length;o<n;o++){let{name:s,value:i}=e[o];if(r.qs.v.test(s)&&!s.startsWith(r.qs.h)&&i){let a=s.slice(r.config.schema.length).split(":").pop();t.params===null&&(t.params=m()),a in t.params||(t.params[a]=go(i));}}}function ne(e){if(typeof e=="string")return e.indexOf("@")>-1||e===r.qs.l||e===r.qs.d||e===r.qs.g;for(let t=e.length-1;t>=0;t--)if(ne(e[t].name))return !0;return !1}function qo(e,t){t(e);let o,n;for(e.firstElementChild&&(n=0,o=e.children[n]);o;)(o.nodeName==="svg"||o.nodeName==="CODE")&&o.childElementCount>0&&(n=0,o=o.nextElementSibling),o&&qo(o,t),o=e.children[++n];}function $e(e,t){ne(e.attributes)&&(e.hasAttribute(r.qs.l)?qn(e,e.getAttribute(r.qs.l),t):So(e,t,null,null));}function ct(e=null){return m({f:m(),m:m(),c:[],t:null,a:e})}function ft(e,{m:t,f:o}){return e in t?e in o?Ie(t[o[e]]):Ie(t[e]):e in o?Ie(t[o[e]]):(t[e]=[St(e)],t[e][0])}function ge(e,t,o){r.components.reference[o]=t;let n=e.getAttribute(r.qs.e),s=n?`${n},${o}`:o;return e.setAttribute(r.qs.e,s),o}function St(e,t,o){let{registry:n}=r.components,s=U(),i=m({key:s,mounted:!1,ref:`c.${s}`,state:m(),nodes:m(),events:m(),binds:m(),context:m({nodes:m(),binds:m()})});return t&&(ge(t,s,i.ref),i.el=o.t,i.mounted=!0,i.inFragment=Mt(t),t.hasAttribute("id")&&(i.alias=fe(t.id.trim()))),n.has(e)?(i.instanceOf=e,i.alias?n.has(i.alias)?l(5,[`Component alias "${i.alias}" matches a component identifer in the registry.`,"An alias reference must be unique and cannot match component names."]):o.f[i.alias]=e:i.alias=null):(i.alias=e||null,i.instanceOf=null,i.mounted&&(o.f[i.alias]=null)),i}function Ln(e,t,o,n){let s=m(),i=o.indexOf("{"),a=t.slice(r.config.schema.length),c=new AbortController;s.key=`e.${U()}`,s.el=`${n.t}`,s.isWindow=a.startsWith("window:"),s.eventName=s.isWindow?a.slice(7):a,s.attached=!1,s.params=null,s.options={signal:c.signal};let f=o;if(i>-1){let $=o.slice(i,o.lastIndexOf("}",i)).match(/(passive|once)/g);$!==null&&($.indexOf("once")>-1&&(s.options.once=!0),$.indexOf("passive")>-1&&(s.options.passive=!0)),f=o.slice(0,i);}let p=Qe(f);p.length>1&&l(3,`No more than 1 DOM Event listener method allowed in value: ${o}`);let[d,E]=p[0].split("."),u=ft(d,n);s.listener=c,s.method=E.trim(),u.events[s.key]=s,ge(e,u.key,s.key);}function On(e,t,o){for(let n of Qe(t)){let[s,i]=n.split("."),a=ft(s,o),c=ge(e,a.key,`n.${U()}`);i in a.context.nodes||(a.context.nodes[i]=[]),a.nodes[c]=m({key:c,keyProp:i,el:o.t,schema:`${i}Node`,index:a.context.nodes[i].push(c)-1,isChild:a.mounted});}}function Mn(e,t,o){for(let n of Qe(t)){let[s,i]=n.split("."),a=ft(s,o),c=ge(e,a.key,`b.${U()}`);i in a.context.binds||(a.context.binds[i]=[]),a.binds[c]=m({key:c,stateKey:i,index:a.context.binds[i].push(c)-1,el:o.t,stateAttr:`${r.config.schema}${s}:${i}`,selector:`[${r.qs.e}*=${Ne(c)}]`,schema:`${i}Bind`,isChild:a.mounted});}}function So(e,t,o,n){o===null&&n===null&&(t.t=U(),t.c.push(t.t),r.components.elements.set(t.t,e));for(let s=e.attributes.length-1;s>=0;s--){let{name:i,value:a}=e.attributes[s];if(o){let c=`${r.config.schema}${o}:`;n&&!i.startsWith(c)&&(c=`${r.config.schema}${n}:`),i.startsWith(c)&&(ft(o,t).state[i.slice(c.length)]=a);}i.indexOf("@")>-1?Ln(e,i,a,t):i===r.qs.g?Mn(e,a,t):i===r.qs.d&&On(e,a,t);}}function qn(e,t,o){let{registry:n,elements:s}=r.components,{m:i,f:a}=o,c=e.hasAttribute("id")?e.id.trim():null;o.t=U(),o.c.push(o.t),s.set(o.t,e);for(let f of Rn(t))if(!n.has(f))l(5,`Component does not exist in registry: ${f}`);else {let p;f in i?(p=Ie(i[f]),p.mounted===!1?(ge(e,p.key,p.ref),p.el=o.t,p.mounted=!0,p.inFragment=Mt(e)):i[f].push(St(f,e,o))):i[f]=[St(f,e,o)],p=Ie(i[f]),c&&!(c in a)&&(a[c]=f),So(e,o,f,p.alias);}}function Sn(e,t){for(let o in t.context.nodes){let n=t.context.nodes[o];if(n.length===1){let s=t.nodes[n[0]];s.schema in e||J(e,s.schema,{get(){return r.components.elements.get(s.el)}});}else for(let s of n){let i=`${s}s`;i in e||J(e,i,{get(){let{elements:a}=r.components,{context:c,nodes:f}=this.scope;return c.nodes[o].map(p=>a.get(f[p].el))}});}}}function wt({m:e,f:t,c:o,a:n}){r.page.type===0&&o.length>0&&Oo(o);let s=r.page.type===4,i=[],{elements:a,connected:c,instances:f,registry:p,reference:d}=r.components;for(let E in e)for(let u of e[E]){if(u.instanceOf===null)if(E in t)u.instanceOf=t[E];else continue;let $,h;if(u.mounted===!1&&(n!==null||s)){let I=wo();u.alias!==null&&u.alias in I?(h=I[u.alias][0],$=h.static):u.instanceOf in I&&I[u.instanceOf].length===1&&(h=I[u.instanceOf][0],$=h.static),u.key=h.scope.key,u.ref=h.scope.ref,i.push([`[${r.qs.l}*=${Ne(h.scope.instanceOf)}]`,h.scope.key]);}else $=p.get(u.instanceOf),h=new $(u,$.connect);if(Sn(h,u),n===null&&"nodes"in $&&$.nodes.length>0)for(let I of $.nodes)J(h,`has${De(I)}Node`,{get(){return `${I}Node`in h}});for(let I in u.events){let X;n!==null&&u.mounted===!1?(X=h.scope.events[I]=u.events[I],d[I]=h.scope.key):X=u.events[I],st(h,a.get(X.el),X);}(n===null||(n!==null||s)&&u.mounted===!0)&&(c.add(u.key),f.set(u.key,h),l(1,`Mounted (init) component ${h.static.id} (${u.key})`,"#6dd093"),"oninit"in h&&h.oninit(r.page));}k(()=>Mo(i));}function lt(e){let t=ct();if(e)if(e instanceof Set){for(let o of e)$e(o,t);return e.clear(),t}else return $e(e,t),t;else {if(qo(O(),o=>$e(o,t)),xo(t.m))return;wt(t);}}var q;function Ho(){k(()=>{q=void 0;});}function Ht(e,t,o){let{reference:n,connected:s,elements:i}=r.components;for(let a of t){let c=n[a];if(!c)continue;let f=a.charCodeAt(0);if(f===99){c.scope.mounted=!1,s.delete(c.scope.key),i.delete(c.scope.el);for(let p in c.scope.nodes)i.delete(c.scope.nodes[p].el);for(let p in c.scope.binds)i.delete(c.scope.binds[p].el);for(let p in c.scope.events)Fe(c,c.scope.events[p]);l(1,`Unmounted component ${c.static.id} (${c.scope.key})`,"#8f5150");}else if(f===101)Fe(c,c.scope.events[a]);else if(f===110||f===98){let p=c.scope[f===98?"binds":"nodes"][a];o&&e.isEqualNode(o)?(ge(e,c.scope.key,a),i.set(p.el,e),q.c.push(p.el)):i.delete(p.el);}}}function kt(e,t){let{reference:o,connected:n,elements:s}=r.components;for(let i of t){let a=o[i];if(!a)continue;let c=i.charCodeAt(0);c===99?(n.add(a.scope.key),s.set(a.scope.el,e),a.scope.mounted=!0,l(1,`Mounted component ${a.static.id} (${a.scope.key})`,"#6dd093")):c===101?st(a,e,a.scope.events[i]):c===110?s.set(a.scope.nodes[i].el,e):c===98&&s.set(a.scope.binds[i].el,e);}}function je(e){e.nodeType!==1&&e.nodeType!==11||e.hasAttribute(r.qs.e)&&Ht(e,e.getAttribute(r.qs.e).split(","));}function ko(e){e.hasAttribute(r.qs.e)?kt(e,e.getAttribute(r.qs.e).split(",")):ne(e.attributes)&&(q?q.a=e:q=ct(e),$e(e,q));}function Do(e,t,o,n){if(o&&(o=o.split(",")),n&&(n=n.split(",")),o&&n)Ht(e,o),kt(e,n);else if(!o&&n)kt(e,n);else {if(q?q.a=t:q=ct(t),o&&!n&&(Ht(e,o,t),e.hasAttribute(r.qs.e)))return;$e(e,q);}}function pt(e,t,o){e[o]!==t[o]&&(e[o]=t[o],e[o]?e.setAttribute(o,v):e.removeAttribute(o));}function Xo(e,t){if(t.nodeType===11||e.nodeType===11)return;let o=t.attributes,n=e.getAttribute(r.qs.e),s=t.getAttribute(r.qs.e),i=!1,a,c,f,p,d;for(let u=o.length-1;u>=0;u--)a=o[u],c=a.name,p=a.value,f=a.namespaceURI,f?(c=a.localName||c,d=e.getAttributeNS(f,c),d!==p&&(a.prefix==="xmlns"&&(c=a.name),e.setAttributeNS(f,c,p))):(d=e.getAttribute(c),d!==p&&(e.setAttribute(c,p),!n&&!s&&!i&&(i=ne(c))));let E=e.attributes;for(let u=E.length-1;u>=0;u--)a=E[u],c=a.name,p=a.value,f=a.namespaceURI,f?(c=a.localName||c,t.hasAttributeNS(f,c)||e.removeAttributeNS(f,c)):t.hasAttribute(c)||e.removeAttribute(c);(n||s||i)&&Do(e,t,n,s);}function Vo(e,t){let o=e.parentNode;if(o){let n=o.nodeName.toUpperCase();n==="OPTGROUP"&&(o=o.parentNode,n=o&&o.nodeName.toUpperCase()),n==="SELECT"&&!o.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),o.selectedIndex=-1);}pt(e,t,"selected");}function Fo(e,t){pt(e,t,"checked"),pt(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value");}function Wt(e,t){let{value:o}=t;e.value!==o&&(e.value=o);let{firstChild:n}=e;if(n){let{nodeValue:s}=n;if(s===o||!o&&s===e.placeholder)return;n.nodeValue=o;}}function jo(e,t){if(!t.hasAttribute("multiple")){let o=0,n=-1,s=e.firstElementChild,i,a;for(;s;)if(a=s.nodeName&&s.nodeName.toUpperCase(),a==="OPTGROUP")i=s,s=i.firstElementChild;else {if(a==="OPTION"){if(s.hasAttribute("selected")){n=o;break}o++;}s=s.nextElementSibling,!s&&i&&(s=i.nextElementSibling,i=null);}e.selectedIndex=n;}}function Hn(e,t){return !t||t==="http://www.w3.org/1999/xhtml"?document.createElement(e):document.createElementNS(t,e)}function mt(e,t){if(e===t)return !0;let o=e.charCodeAt(0),n=t.charCodeAt(0);return o<=90&&n>=97?e===t.toUpperCase():n<=90&&o>=97?t===e.toUpperCase():!1}function kn(e,t){switch(e.nodeName){case"INPUT":Fo(e,t);break;case"OPTION":Vo(e,t);break;case"SELECT":jo(e,t);break;case"TEXTAREA":Wt(e,t);break}}function re(e){return e&&"getAttribute"in e?e.getAttribute("id"):void 0}function Dn(e,t){let o=e.firstChild,n;for(;o;)n=o.nextSibling,t.appendChild(o),o=n;return t}function ut(e,t,o,n=!0){je(e),t&&t.removeChild(e),Bo(e,n,o);}function Wn(e,t,o){let n=t.firstChild,s,i,a=e.firstChild,c,f,p,d;e:for(;n;){for(s=re(n),i=n.nextSibling;a;){if(p=a.nextSibling,n.isEqualNode(a)){n=i,a=p;continue e}c=re(a),f=a.nodeType;let E;if(f===n.nodeType&&(f===1?(s?s!==c&&((d=o.r.get(s))?p.isEqualNode(d)?E=!1:(e.insertBefore(d,a),c?o.s.add(c):ut(a,e,o),a=d,c=re(a)):E=!1):c&&(E=!1),E=E!==!1&&mt(a.nodeName,n.nodeName),E&&dt(a,n,o)):(f===3||f===8)&&(E=!0,a.nodeValue!==n.nodeValue&&(a.nodeValue=n.nodeValue))),E){n=i,a=p;continue e}c?o.s.add(c):ut(a,e,o),a=p;}s&&(d=o.r.get(s))&&mt(d.nodeName,n.nodeName)?(e.appendChild(d),dt(d,n,o)):(n.actualize&&(n=n.actualize(e.ownerDocument||document)),e.appendChild(n),Xt(n,o)),n=i,a=p;}Xn(e,a,c,o),kn(e,t);}function dt(e,t,o){let n=re(t);if(n&&o.r.delete(n),e.isEqualNode(t))return;let s=e.getAttribute(r.qs.a);s!=="false"&&(s!=="children"&&Xo(e,t),e.nodeName!=="TEXTAREA"?Wn(e,t,o):Wt(e,t));}function Bo(e,t,o){if(e.nodeType!==1)return;let n=e.firstChild;for(;n;){let s;t&&(s=re(n))?o.s.add(s):(je(n),n.firstChild&&Bo(n,t,o)),n=n.nextSibling;}}function Xt(e,t){(e.nodeType===1||e.nodeType===11)&&ko(e);let o=e.firstChild;for(;o;){let n=o.nextSibling,s=re(o);if(s){let i=t.r.get(s);i&&mt(o.nodeName,i.nodeName)?(o.parentNode.replaceChild(i,o),dt(i,o,t)):Xt(o,t);}else Xt(o,t);o=n;}}function Xn(e,t,o,n){for(;t;){let s=t.nextSibling;(o=re(t))?n.s.add(o):ut(t,e,n),t=s;}}function Yo(e,t){if(e.nodeType===1||e.nodeType===11){let o=e.firstChild;for(;o;){let n=re(o);n&&t.r.set(n,o),Yo(o,t),o=o.nextSibling;}}}function z(e,t){let o=t.cloneNode(!0),n=m({s:K(),r:ee()});o.nodeType===11&&(o=o.firstElementChild),Yo(e,n);let s=e,i=s.nodeType,a=o.nodeType;if(i===1)a===1?mt(e.nodeName,o.nodeName)||(je(e),s=Dn(e,Hn(o.nodeName,o.namespaceURI))):s=o;else if(i===3||i===8){if(a===i)return s.nodeValue!==o.nodeValue&&(s.nodeValue=o.nodeValue),s;s=o;}if(s.isEqualNode(o))je(e);else {if(o.isEqualNode(s))return s;if(dt(s,o,n),n.s.size>0){for(let c of n.s)if(n.r.has(c)){let f=n.r.get(c);ut(f,f.parentNode,n,!1);}}}return s!==e&&e.parentNode&&(s.actualize&&(s=s.actualize(e.ownerDocument||document)),e.parentNode.replaceChild(s,e)),n.r.clear(),n.s.clear(),q&&q.c.length>0&&k(()=>it(t,q.c)),s}function Be(e,t){if(!(e instanceof Element))return !1;let o=e.closest(t);return o&&o.tagName==="A"?o:!1}function Ko(e){if(e.nodeName!=="A")return !1;let t=e.getAttribute("href");return !t||!Vt(t)?!1:w(F(t))===!1}function Uo(e,t){let o=[];return te(e,n=>{if(n.nodeName!=="A"){let s=n.querySelectorAll(t);te(s,i=>{Ko(i)&&o.push(i);});}else if(n.hasAttribute("href")){let{href:s}=n;Vt(s)&&w(F(s))&&o.push(n);}}),o}var Ye=e=>{let t=[];return te(e,o=>{Ko(o)&&t.push(o);}),t};function _o(e){let t=Be(e.target,r.qs.p);if(!t)return;let o=A(t,10);if(w(o.key)||o.key in x.n)return;t.addEventListener(`${S}leave`,zo,{once:!0});let n=P(o),s=n.threshold||r.config.hover.threshold;nt(o.key,function(){C("prefetch",t,o)&&M(n).then(function(){delete x.n[o.key],Go(t);});},s);}function zo(e){let t=Be(e.target,r.qs.p);t&&ot(F(t.href));}function Vn(e){e.addEventListener(`${S}enter`,_o);}function Go(e){e.removeEventListener(`${S}enter`,_o),e.removeEventListener(`${S}leave`,zo);}function Ke(){!r.config.hover||r.observe.hover||(B(Vn,Ye(r.qs.p)),r.observe.hover=!0);}function he(){r.observe.hover&&(B(Go,Ye(r.qs.p)),r.observe.hover=!1);}var ye;async function Fn(e){if(e.isIntersecting){let t=A(e.target,11);if(!C("prefetch",e.target,t))return ye.unobserve(e.target);await M(P(t))?ye.unobserve(e.target):(l(3,`Prefetch will retry at next intersect for: ${t.key}`),ye.observe(e.target));}}function Ue(){if(!r.config.intersect||r.observe.intersect)return;ye||(ye=new IntersectionObserver(B(Fn),r.config.intersect));let e=B(o=>ye.observe(o)),t=Uo(r.qs.b,r.qs.R);e(t),r.observe.intersect=!0;}function Ee(){r.observe.intersect&&(ye.disconnect(),r.observe.intersect=!1);}var _e={};yn(_e,{connect:()=>ie,disconnect:()=>Le,hook:()=>se,teardown:()=>Re});function Re(){for(let e in r.components.reference)delete r.components.reference[e];for(let e of r.components.instances.values())for(let t in e.scope.events)Fe(e,e.scope.events[t]);r.components.elements.clear(),r.components.instances.clear(),r.components.connected.clear(),l(2,"Component instances were disconnected");}function se(e,t){if(e==="onvisit")return k(()=>se(null,t));e===null&&(e="onvisit");let{connected:o,instances:n}=r.components;e==="onload"&&xe("components",no(o));for(let s of o){let i=n.get(s);i&&e in i&&i[e].apply(i,t);}}function ie(){r.observe.components||(r.page.type===0?lt():(q&&(wt(q),Ho()),se("onload",[r.page])),r.observe.components=!0);}function Le(){r.observe.components&&(se("onexit",[r.page]),r.observe.components=!1);}var gt=new MutationObserver(function([e]){if(e.type!=="childList")return;let t=e.addedNodes.length;if(t||e.removedNodes.length>0){let[o]=t?e.addedNodes:e.removedNodes;if(o.nodeType!==1)return;r.eval&&lo.test(o.nodeName)?o.parentNode.nodeName==="HEAD"?t?Rt("appendChild",o):Rt("removeChild",o):jn(o)&&!r.resources.has(o)?r.resources.add(o):r.resources.delete(o):o instanceof HTMLElement&&t&&!o.hasAttribute(r.qs.e)&&lt(o);}});function jn(e){let t=O().querySelectorAll(`${r.page.target.join(",")},[${r.qs.u}]`);for(let o=0,n=t.length;o<n;o++)if(t[o].contains(e))return !1;return !0}function ze(){r.observe.mutations||(gt.observe(document.head,{childList:!0}),gt.observe(O(),{childList:!0,subtree:!0}),r.observe.mutations=!0);}function Ge(){if(r.observe.mutations){gt.takeRecords(),gt.disconnect();for(let e of r.resources)O().removeChild(e),r.resources.delete(e);r.observe.mutations=!1;}}function Bn({clientX:e,clientY:t},o){return e<=o.right&&e>=o.left&&t<=o.bottom&&t>=o.top}function Yn(e){let t=e.getBoundingClientRect(),o=e.getAttribute(r.qs.E),n=Ze.test(o)?Number(o):r.config.proximity.distance;return {target:e,top:t.top-n,bottom:t.bottom+n,left:t.left-n,right:t.right+n}}function Kn(e){let t=!1;return o=>{if(t)return;t=!0;let n=e.findIndex(s=>Bn(o,s));if(n===-1)setTimeout(()=>{t=!1;},r.config.proximity.throttle);else {let{target:s}=e[n],i=P(A(s,12)),a=i.threshold||r.config.proximity.threshold;nt(i.key,async()=>{if(!C("prefetch",s,i))return Z();await M(i)&&(e.splice(n,1),t=!1,e.length===0&&(Z(),l(2,"Proximity observer disconnected")));},a);}}}var Bt;function Je(){if(!r.config.proximity||r.observe.proximity)return;let e=Ye(r.qs.E).map(Yn);e.length>0&&(Bt=Kn(e),addEventListener(`${S}move`,Bt,{passive:!0}),r.observe.proximity=!0);}function Z(){r.observe.proximity&&(removeEventListener(`${S}move`,Bt),r.observe.proximity=!1);}async function Un(e,t){if(!r.eval||!e||!t)return;let o=[],n=K(),{children:s}=e;for(let c=0,f=t.length;c<f;c++)n.add(t[c].outerHTML);for(let c=0,f=s.length;c<f;c++){let p=s[c],{nodeName:d,outerHTML:E}=p,u=!0;d==="SCRIPT"?u=p.matches(r.qs.I):d==="STYLE"?u=p.matches(r.qs.N):d==="META"?u=p.matches(r.qs.P):d==="LINK"?u=p.matches(r.qs.C):u=e.getAttribute(r.qs.T)!=="false",n.has(E)?u?o.push(p):n.delete(E):o.push(p);}let i=[],a=document.createRange();for(let c of n){let f=a.createContextualFragment(c).firstChild;if(T(f,"href")||T(f,"src")){let d=new Promise(function(E){f.addEventListener("error",u=>{l(3,`Resource <${f.nodeName.toLowerCase()}> failed:`,f),E();}),f.addEventListener("load",()=>E());});i.push(d);}e.appendChild(f),n.delete(c);}for(let c=0,f=o.length;c<f;c++)e.removeChild(o[c]);await Promise.all(i);}function _n(e,t){let o=O(),n=t.body;if(e.selector==="body")z(o,n);else {let s=n.querySelectorAll(e.selector);if(s.length===0)l(3,`Unmatched targets on ${e.key}, applied <body> morph fallback.`,e.target),z(o,n);else {let i=o.querySelectorAll(e.selector);if(i.length!==s.length)l(3,"Targets mismatch, applied <body> morph ~ ensure fragments match between visits!"),z(o,n);else for(let a=0,c=i.length;a<c;a++){let f=i[a],p=s[a];p&&C("render",f,p)&&(f.isEqualNode(p)||z(f,p));}}}}function zn(e,t){let o=e.hydrate;if(o.length===1&&o[0]==="body"){z(O(),t.body);return}let n=o.join(","),s=O().querySelectorAll(n),i=e.preserve&&e.preserve.length>0?e.preserve.join(","):null,a=[];if(i){let c=O().querySelectorAll(i);for(let f=0,p=c.length;f<p;f++){let d=c[f];d.setAttribute(r.qs.a,"false"),a.push(d);}}if(s.length>0){let c=t.body.querySelectorAll(n);for(let f=0,p=s.length;f<p;f++){let d=s[f],E=c[f];if(c[f]instanceof HTMLElement){if(!C("hydrate",d,E))continue;z(E,E);}}}if(i)for(let c of a)c.removeAttribute("spx-morph");e.hydrate=void 0,e.preserve=void 0,e.type=6,G(e);}function j(e){he(),Ee(),Z(),Ge(),Le(),r.eval||(document.title=e.title);let t=de(e.snap);return e.type===7?zn(e,t):(Un(so(),t.head.children),_n(e,t),scrollTo(e.scrollX,e.scrollY)),le.done(),k(()=>{at(),Ke(),Ue(),Je(),ie(),ze();}),C("load",e),e}var g=window.history;function Zo(){return g.state!==null&&"rev"in g.state&&g.state.key!==g.state.rev}function Ut(e){if(g.state==null||typeof g.state!="object")return !1;let t=Ce(g.state)(["key","rev","scrollX","scrollY","title"]);return typeof e=="string"?t&&g.state.key===e:t}async function Qo(){await yo(),r.loaded=!0;}function Gn(e){return Ut(e.key)?(scrollTo(g.state.scrollX,g.state.scrollY),R(e,g.state)):ve(e),e}function ve({key:e,rev:t,title:o,scrollX:n,scrollY:s}){let i={key:e,rev:t,scrollX:n,scrollY:s,title:o||document.title};return g.replaceState(i,i.title,i.key),l(1,`History replaceState: ${g.state.key}`),g.state}function Te({key:e,rev:t,title:o}){let n={key:e,rev:t,title:o,scrollY:0,scrollX:0};return g.pushState(n,n.title,n.key),l(1,`History pushState: ${g.state.key}`),g.state}async function en(e){if((r.loaded||r.ready)&&e.state!==null)if(w(e.state.key)){!w(e.state.rev)&&e.state.rev!==e.state.key&&rt(e.state.rev),l(1,`History popState: ${e.state.key}`),r.pages[e.state.key].type=5;let t=C("popstate",{state:r.pages[e.state.key]});L(t)&&xe("target",t,e.state.key),j(r.pages[e.state.key]);}else {Re(),e.state.type=5;let t=await M(e.state),o=C("popstate",{state:r.pages[e.state.key]});if(L(o)&&xe("target",o,e.state.key),!t)return location.assign(e.state.key);let n=F(location);if(t.key===n)j(t);else if(w(n))j(r.pages[n]);else {Re();let s=P(A(n,5));await M(s),Te(s);}}}function tn(e){if(!r.observe.history)return g.scrollRestoration&&(g.scrollRestoration="manual"),addEventListener("popstate",en,!1),addEventListener("load",Qo,!1),r.observe.history=!0,typeof e=="object"&&e.type===0?Gn(e):e}function on(){r.observe.history&&(g.scrollRestoration&&(g.scrollRestoration="auto"),removeEventListener("popstate",en,!1),removeEventListener("load",Qo,!1),r.observe.history=!1);}function P(e){let t=Ce(e);return e.ts=He(),e.target=It(e),t("selector")||(e.target[0]==="body"?e.selector="body":e.selector=ke(e.target)),r.config.cache&&(t("cache")||(e.cache=r.config.cache),t("snap")||(e.snap=U())),t("scrollY")||(e.scrollY=0),t("scrollX")||(e.scrollX=0),r.config.hover!==!1&&e.type===10&&(t("threshold")||(e.threshold=r.config.hover.threshold)),r.config.proximity!==!1&&e.type===12&&(t("proximity")||(e.proximity=r.config.proximity.distance),t("threshold")||(e.threshold=r.config.proximity.threshold)),r.config.progress&&!t("progress")&&(e.progress=r.config.progress.threshold),t("history")||(e.history=!0),t("visits")||(e.visits=0),t("components")||(e.components=[]),r.pages[e.key]=e,r.pages[e.key]}function nn(e){let t=R(m(e),{target:r.config.fragments,selector:r.config.fragments.join(),cache:r.config.cache,history:!0,scrollX:0,scrollY:0});return r.config.hover&&(t.threshold=r.config.hover.threshold),r.config.proximity&&(t.proximity=r.config.proximity.distance,t.threshold=r.config.proximity.threshold),r.config.progress&&(t.progress=r.config.progress.threshold),t}function xe(e,t,o=g.state.key){return e==="location"?r.pages[o][e]=R(r.pages[o][e],t):e==="target"?(r.pages[o].target=It(t),r.pages[o].selector=ke(r.pages[o].target)):e==="components"?r.pages[o].components=t:r.pages[o][e]=t,r.pages[o]}function Pe(e,t){let o=C("before:cache",e,t),n=typeof o=="string"?o:t;return e.type>5&&e.type>9&&(e.type=1),e.title=Pt(t),!r.config.cache||o===!1?e:"snap"in e?(r.pages[e.key]=e,r.snaps[e.snap]=n,C("after:cache",e),se("oncache",e),e):G(e,n)}function G(e,t){let o=e.key in r.pages?r.pages[e.key]:P(e);if(typeof t=="string"&&(r.snaps[o.snap]=t,e.title=Pt(t)),e.ts=He(),e.visits=e.visits+1,e.components.length>0){let{connected:n}=r.components;for(let s of e.components)n.has(s)||n.add(s);}return R(o,e)}function Lt(e,t){let o=t=t?t.charCodeAt(0)===47?t in r.pages?r.pages[t].snap:null:t:r.page.snap;o?r.snaps[o]=e:l(3,"Snapshot record does not exist, update failed");}function Ot(e){if(!e){if(g.state===null){l(3,"Missing history state reference, page cannot be returned");return}e=g.state.key;}if(e in r.pages)return Y(m(),{page:{get:()=>r.pages[e]},dom:{get:()=>pe(r.snaps[r.pages[e].snap])}});l(5,`No record exists: ${e}`);}function de(e){let t=e=e?e.charCodeAt(0)===47?r.pages[e].snap:e:r.page.snap;return pe(r.snaps[t])}function wo(){let e=m();for(let t of r.components.instances.values()){let{scope:o}=t;r.components.connected.has(o.key)&&(o.alias!==null&&!(o.alias in e)?e[o.alias]=[t]:o.instanceOf in e?e[o.instanceOf].push(t):e[o.instanceOf]=[t]);}return e}function rn(e){if(!e){if(g.state===null){l(3,"Missing history state reference, page cannot be returned");return}e=g.state.key;}if(e in r.pages)return r.pages[e];l(5,`No page record exists for: ${e}`);}function w(e){return T(r.pages,e)&&T(r.pages[e],"snap")&&T(r.snaps,r.pages[e].snap)&&typeof r.snaps[r.pages[e].snap]=="string"}function Q(e){e?typeof e=="string"?(delete r.snaps[r.pages[e].snap],delete r.pages[e]):L(e)&&B(t=>{delete r.snaps[r.pages[t].snap],delete r.pages[t];},e):(Ct(r.pages),Ct(r.snaps));}var H=ce.replace(/(?:https?:)?(?:\/\/(?:www\.)?|(?:www\.))/,v);function Gt(e,t){let o=t?nn(t):m(),n=e.getAttributeNames();for(let s=0,i=n.length;s<i;s++){let a=n[s];if(a.startsWith(r.qs.h)){T(o,"data")||(o.data=m());let c=fe(a.slice(r.qs.h.length)),f=e.getAttribute(a).trim();we.test(f)?o.data[c]=f==="NaN"?NaN:+f:Se.test(f)?o.data[c]=f==="true":f.charCodeAt(0)===123||f.charCodeAt(0)===91?o.data[c]=Ae(a,f):o.data[c]=f;}else {if(!r.qs.x.test(a))continue;let c=e.getAttribute(a).trim();if(a==="href")o.rev=location.pathname+location.search,t||(o.location=zt(c),o.key=o.location.pathname+o.location.search);else {let f=a.slice(a.lastIndexOf("-")+1),p=c.replace(co,v).trim();if(f==="target")o[f]=p==="true"?[]:p!==v?uo(p):[],o.selector=ke(o[f]);else if(po.test(p)){let d=p.match(/\[?[^,'"[\]()\s]+\]?/g);o[f]=ao.test(f)?d.reduce(To(2),[]):d;}else if(f==="position")if(At.test(p)){let d=p.match(At);o[`scroll${d[0].toUpperCase()}`]=+d[1],d.length===4&&(o[`scroll${d[2].toUpperCase()}`]=+d[3]);}else l(3,`Invalid attribute value on <${a}>, expected: y:number or x:number`,e);else f==="scroll"?Ze.test(p)?o.scrollY=+p:l(3,`Invalid attribute value on <${a}>, expected: number`,e):Se.test(p)&&!fo.test(a)?o[f]=p==="true":we.test(p)?o[f]=+p:(f==="history"&&p!=="push"&&p!=="replace"&&l(5,`Invalid attribute value on <${a}>, expected: false, push or replace`,e),o[f]=p);}}}return o}function Oe(e){let t=m();if(e.length===1&&e.charCodeAt(0)===47)return t.pathname=e,t.hash=v,t.search=v,t;let n=e.indexOf("#");n>=0?(t.hash=e.slice(n),e=e.slice(0,n)):t.hash=v;let s=e.indexOf("?");return s>=0?(t.search=e.slice(s),e=e.slice(0,s)):t.search=v,t.pathname=e,t}function yt(e,t){let o=e.indexOf("/",t);if(o>t){let s=e.indexOf("#",o);return s<0?e.slice(o):e.slice(o,s)}let n=e.indexOf("?",t);if(n>t){let s=e.indexOf("#",n);return s<0?e.slice(n):e.slice(n,s)}return e.length-t===H.length?"/":null}function _t(e){let t=e.startsWith("www.")?e.slice(4):e,o=t.indexOf("/");if(o>=0){let n=t.slice(o);if(t.slice(0,o)===H)return n.length>0?Oe(n):Oe("/")}else {let n=t.search(/[?#]/);if(n>=0){if(t.slice(0,n)===H)return Oe("/"+t.slice(n))}else if(t===H)return Oe("/")}return null}function Jn(e){return e.startsWith("http")?1:e.startsWith("//")?2:e.startsWith("www.")?3:0}function Vt(e){if(typeof e!="string"||e.length===0)return !1;if(e.charCodeAt(0)===47)return e.charCodeAt(1)!==47?!0:e.startsWith("www.",2)?e.startsWith(H,6):e.startsWith(H,2);if(e.charCodeAt(0)===63)return !0;if(e.startsWith("www."))return e.startsWith(H,4);if(e.startsWith("http")){let t=e.indexOf("/",4)+2;return e.startsWith("www.",t)?e.startsWith(H,t+4):e.startsWith(H,t)}}function Zn(e){return e.charCodeAt(0)===47?e.charCodeAt(1)!==47?Oe(e):_t(e.slice(2)):e.charCodeAt(0)===63?Oe(location.pathname+e):e.startsWith("https:")||e.startsWith("http:")?_t(e.slice(e.indexOf("/",4)+2)):e.startsWith("www.")?_t(e):null}function F(e){if(typeof e=="object")return e.pathname+e.search;if(e===v)return "/";let t=Jn(e);if(t===1){let o=e.charCodeAt(4)===115?8:7,n=e.startsWith("www.",o)?o+4:o;return e.startsWith(H,n)?yt(e,n):null}if(t===2){let o=e.startsWith("www.",2)?6:2;return e.startsWith(H,o)?yt(e,o):null}return t===3?e.startsWith(H,4)?yt(e,4):null:e.startsWith(H,0)?yt(e,0):null}function sn(){return m({hostname:H,origin:ce,pathname:location.pathname,search:location.search,hash:location.hash})}function zt(e){if(e===v)return sn();let t=Zn(e);return t===null&&l(5,`Invalid pathname: ${e}`),t.origin=ce,t.hostname=H,t}function A(e,t=6){if(e instanceof Element){let n=Gt(e);return n.type=t||6,n}let o=m();return e===0?(o.location=sn(),o.key=o.rev=F(o.location),o.type=e,o.visits=1,r.index=o.key):t===7?(o.location=zt(e),o.key=o.rev=F(o.location),o.type=t):(o.rev=location.pathname+location.search,o.location=zt(typeof e=="string"?e:o.rev),o.key=F(o.location),o.type=t),o}function Qn(e){return !(e.target&&e.target.isContentEditable||e.defaultPrevented||e.button>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}var W=function(e){if(!Qn(e))return;let t=Be(e.target,r.qs.A);if(!t)return;let o=F(t.href);if(o===null)return;let n=()=>{l(3,`Drag occurance deteced, cancelled visit: ${o}`),W.drag=!0,t.removeEventListener(`${S}move`,n);};if(t.addEventListener(`${S}move`,n,{once:!0}),W.drag===!0)return W.drag=!1,W(e);if(t.removeEventListener(`${S}move`,n),!C("visit",e))return;let s=(i,a=!0)=>{r.pages[i.key].ts=He(),r.pages[i.rev].scrollX=window.scrollX,r.pages[i.rev].scrollY=window.scrollY,se("onvisit",i),ve(r.pages[i.rev]),a?(Te(i),j(i)):an(i);};if(he(),Z(),Ee(),w(o)){let i=Gt(t,r.pages[o]),a=G(i);t.onclick=c=>{c.preventDefault(),s(a);};}else if(x.i.has(o)){$t(o),l(2,`Request in transit: ${o}`);let i=r.pages[o];t.onclick=a=>{a.preventDefault(),s(i,!1);};}else {$t(),ot(o);let i=P(A(t,6));M(i),t.onclick=a=>{a.preventDefault(),s(i,!1);};}};async function an(e){e.progress&&le.start(e.progress);let t=await Ve(e);t?(Te(t),j(t)):location.assign(e.key);}async function Jt(e,t){if(t){typeof t.cache=="string"&&(t.cache==="clear"?Q():Q(t.key)),t.progress&&le.start(t.progress);let o=await M(t);o?(Te(o),j(o)):location.assign(t.key);}else return an(r.pages[e])}function cn(){r.observe.hrefs||(W.drag=!1,Me==="mouseOnly"?addEventListener(`${S}down`,W,!1):(Me==="touchOnly"||addEventListener(`${S}down`,W,!1),addEventListener("touchstart",W,!1)),r.observe.hrefs=!0);}function fn(){r.observe.hrefs&&(Me==="mouseOnly"?removeEventListener(`${S}down`,W,!1):(Me==="touchOnly"||removeEventListener(`${S}down`,W,!1),removeEventListener("touchstart",W,!1)),r.observe.hrefs=!1);}function pn(){let e=A(0),t=tn(P(e));Y(r,{prev:{get(){return r.pages[g.state.rev]}},page:{get(){return r.pages[g.state.key]}},snapDom:{get(){return pe(r.snaps[r.page.snap])}}});let o=()=>{let n=Pe(t,me());return cn(),at(),r.config.manual===!1&&(Ke(),Ue(),Je(),ie(),ze()),k(()=>{xe("type",6),rt(n),Po(n);}),n};return new Promise(n=>{let{readyState:s}=document;if(s==="interactive"||s==="complete")return n(o());addEventListener("DOMContentLoaded",()=>n(o()));})}function mn(){he(),Ke(),Ee(),Ue(),Z(),Je(),Le(),ie(),Ge(),ze();}function un(){on(),fn(),Ge(),he(),Ee(),Z(),r.config.components&&(Le(),Re(),r.components.registry.clear()),Q(),r.config.globalThis&&delete window.spx,l(2,"Disconnected");}var dn=class{constructor(e,t){this.state=m();Y(this,{scope:{get(){return e}},static:{get(){return t}}});let o=`${r.config.schema}${this.scope.instanceOf}`;this.state=new Proxy(m(),{set:(n,s,i)=>{let a=this.static.state[s],c=typeof i=="object"||L(i)?JSON.stringify(i):`${i}`;if(typeof a=="object"&&T(a,"persist")&&a.persist?n[s]=this.scope.state[s]=i:n[s]=i,this.dom&&c!==this.dom.getAttribute(`${o}:${s}`)&&this.dom.setAttribute(`${o}:${s}`,c),s in this.scope.context.binds)for(let f of this.scope.context.binds[s]){let p=this.scope.binds[f];r.components.elements.get(p.el).innerText=c;}return !0}});for(let n in this.scope.state){if(!T(t.state,n)){l(3,`Undefined state reference passed: ${o}:${n}`,this.dom);continue}let s=this.static.state[n],i,a=this.dom.getAttribute(`${o}:${n}`),c,f=a!==null&&a!==v;typeof s=="object"?(i=s.typeof,c=f,f||(a=s.default)):i=s,`has${De(n)}`in this.state||J(this.state,`has${De(n)}`,{get(){return f}}),typeof a=="string"&&a.startsWith("window.")?this.state[n]=window[a.slice(7)]:i===String?this.state[n]=a||v:i===Boolean?this.state[n]=a||!1:i===Number?this.state[n]=a?+a:0:i===Array?this.state[n]=f?Ae(a):c?a:[]:i===Object&&(this.state[n]=f?Ae(a):c?a:{}),this.scope.state[n]=this.state[n];}}get dom(){return r.components.elements.get(this.scope.el)}get html(){return this.dom.closest("html")}};var Zt=m({$:r,Component:dn,on:No,off:Co,observe:mn,connect:er,capture:ir,form:cr,render:sr,session:or,reload:nr,fetch:rr,clear:Q,hydrate:fr,prefetch:ar,visit:lr,disconnect:un,register:tr,get config(){return r.config},supported:!!(vt&&window.history.pushState&&window.requestAnimationFrame&&window.DOMParser&&window.Proxy),history:m({get state(){return g.state},api:g,push:Te,replace:ve,has:Ut,reverse:Zo})});function er(e={}){if(vt===!1)return l(5,"Invalid runtime environment: window is undefined.");if(!Zt.supported)return l(5,"Browser does not support SPX");if(!window.location.protocol.startsWith("http"))return l(5,"Invalid protocol, SPX expects HTTPS or HTTP protocol");Io(e),r.config.globalThis&&T(window,"spx")===!1&&et(window,"spx",Zt);let t=pn();return async function(o){let n=await t;if(o.constructor.name==="AsyncFunction")try{await o(n);}catch(s){l(3,"Connection Error",s);}else o(n);l(2,"Connection Established");}}function tr(...e){if(typeof e[0]=="string")e.length>2&&l(5,[`Named component registration expects 2 parameters, recieved ${e.length}.`,'Registry should follow this structure: spx.register("identifer", YourComponent)'],e),oe({[_e[0]]:e[1]});else for(let t of e)if(L(t))for(let o of t)typeof o[0]=="string"?oe({[o[0]]:o[1]}):typeof o=="function"&&oe({[tt(o)]:o});else {let o=typeof t;o==="function"?oe({[tt(t)]:t}):o==="object"&&oe(t);}r.ready&&(r.config.components||(ie(),r.config.components=!0));}function or(){return Y(m(),{config:{get(){return r.config}},snaps:{get(){return r.snaps}},pages:{get(){return r.pages}},observers:{get(){return r.observe}},components:{get(){return r.components}},fragments:{get(){return r.fragments}},memory:{get(){let e=r.memory;return e.size=bo(e.bytes),e}}})}async function nr(){let e=r.pages[g.state.key];e.type=9;let t=await M(e);return t?(l(2,"Triggered reload, page was re-cached"),j(t)):(l(3,"Reload failed, triggering refresh (cache will purge)"),location.assign(e.key))}async function rr(e){let t=A(e,2);t.location.origin!==ce&&l(5,"Cross origin fetches are not allowed");let o=await Xe(t.key);if(o)return o}async function sr(e,t,o){let n=r.page,s=A(e);s.location.origin!==ce&&l(5,"Cross origin fetches are not allowed");let i=await Xe(s.key,{type:"document"});if(i||l(5,`Fetch failed for: ${s.key}`,i),await o.call(n,i),t==="replace"){n.title=i.title;let a=G(R(n,s),me(i));return ve(a),a}else return j(Pe(s,me(i)))}function ir(e){let t=rn();if(!t)return;let o=de();if(e=L(e)?e:t.target,e.length===1&&e[0]==="body"){z(o.body,O()),G(t,me(o));return}let n=e.join(","),s=O().querySelectorAll(n);te(o.body.querySelectorAll(n),(i,a)=>{z(i,s[a]);}),G(t,me(o));}async function ar(e){let t=A(e,1);if(w(t.key)){l(3,`Cache already exists for ${t.key}, prefetch skipped`);return}let o=await M(P(t));if(o)return o;l(5,`Prefetch failed for ${t.key}`);}async function cr(e,t){let o=new FormData;for(let s in t.data)o.append(s,t.data[s]);return await Xe(e,{method:t.method,body:o})}async function fr(e,t){let o=A(e,7);if(M(o),L(t)){o.hydrate=[],o.preserve=[];for(let s of t)s.charCodeAt(0)===33?o.preserve.push(s.slice(1)):o.hydrate.push(s);}else o.hydrate=r.config.fragments;let n=await Ve(o);if(n){let{key:s}=g.state;if(ve(n),j(n),o.key!==s){r.index===s&&(r.index=o.key);for(let i in r.pages)r.pages[i].rev===s&&(r.pages[i].rev=o.key);Q(s);}}return de(n.key)}async function lr(e,t){let o=A(e),n=typeof t=="object"?R(o,t):o;return w(o.key)?Jt(o.key,G(n)):Jt(o.key,P(n))}var cc=Zt;

export { cc as default };
